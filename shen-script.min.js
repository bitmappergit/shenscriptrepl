!function(a){var t={};function __webpack_require__(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return a[s].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=a,__webpack_require__.c=t,__webpack_require__.d=function(a,t,s){__webpack_require__.o(a,t)||Object.defineProperty(a,t,{enumerable:!0,get:s})},__webpack_require__.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},__webpack_require__.t=function(a,t){if(1&t&&(a=__webpack_require__(a)),8&t)return a;if(4&t&&"object"==typeof a&&a&&a.__esModule)return a;var s=Object.create(null);if(__webpack_require__.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:a}),2&t&&"string"!=typeof a)for(var n in a)__webpack_require__.d(s,n,function(t){return a[t]}.bind(null,n));return s},__webpack_require__.n=function(a){var t=a&&a.__esModule?function getDefault(){return a.default}:function getModuleExports(){return a};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=5)}([function(a,t){const s=Object.getPrototypeOf(async()=>{}).constructor,n=Object.getPrototypeOf((function*(){})).constructor;class StringInStream{constructor(a){this.text=a,this.pos=0}read(){return this.pos>=this.text.length?-1:this.text.charCodeAt(this.pos++)}close(){return this.pos=1/0,null}}const produceState=(a,t,s,n,i=[])=>{for(;a(n);n=s(n))i.push(t(n));return{result:i,state:n}},produce=(a,t,s,n,i=[])=>produceState(a,t,s,n,i).result,raise=a=>{throw new Error(a)};a.exports={AsyncFunction:s,GeneratorFunction:n,StringInStream:StringInStream,fetchRead:async a=>new StringInStream(await(await fetch(a)).text()),flatMap:(a,t)=>{const s=[];for(const n of a)for(const a of t(n))s.push(a);return s},last:a=>0===a.length?void 0:a[a.length-1],mapAsync:async(a,t)=>{const s=[];for(const n of a)s.push(await t(await n));return s},most:a=>0===a.length?[]:a.slice(0,a.length-1),multiMatch:(a,...t)=>{for(const[s,n]of t)if(s.test(a))return n;return"Unknown"},onReady:a=>"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?a():document.addEventListener("DOMContentLoaded",a),pairs:(a,t="array must be of even length")=>a.length%2==0?produce(a=>a.length>0,a=>a.slice(0,2),a=>a.slice(2),a):raise(t),produce:produce,produceState:produceState,raise:raise,s:(a,t)=>Symbol.for(String.raw(a,t))}},function(a,t){var s,n,i=a.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(a){if(s===setTimeout)return setTimeout(a,0);if((s===defaultSetTimout||!s)&&setTimeout)return s=setTimeout,setTimeout(a,0);try{return s(a,0)}catch(t){try{return s.call(null,a,0)}catch(t){return s.call(this,a,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(a){s=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(a){n=defaultClearTimeout}}();var e,o=[],l=!1,r=-1;function cleanUpNextTick(){l&&e&&(l=!1,e.length?o=e.concat(o):r=-1,o.length&&drainQueue())}function drainQueue(){if(!l){var a=runTimeout(cleanUpNextTick);l=!0;for(var t=o.length;t;){for(e=o,o=[];++r<t;)e&&e[r].run();r=-1,t=o.length}e=null,l=!1,function runClearTimeout(a){if(n===clearTimeout)return clearTimeout(a);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(a);try{return n(a)}catch(t){try{return n.call(null,a)}catch(t){return n.call(this,a)}}}(a)}}function Item(a,t){this.fun=a,this.array=t}function noop(){}i.nextTick=function(a){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];o.push(new Item(a,t)),1!==o.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(a){return[]},i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(a,t,s){function ownKeys(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.push.apply(s,n)}return s}function _objectSpread(a){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){_defineProperty(a,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(s,t))}))}return a}function _defineProperty(a,t,s){return t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}const{generate:n}=s(8),i=/^[_A-Za-z0-9]$/,escapeCharacter=a=>i.test(a)?a:`$${(a=>("0"+a.charCodeAt(0).toString(16)).slice(-2))(a)}`,e=/^[_A-Za-z$][_A-Za-z0-9$]*$/,o=new Set(["abstract","arguments","await","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"]),l=new Set(["BlockStatement","DebuggerStatement","DoWhileStatement","EmptyStatement","ExpressionStatement","ForStatement","ForInStatement","ForOfStatement","IfStatement","ReturnStatement","TryStatement","VariableDeclaration","WhileStatement"]),isStatement=a=>a&&l.has(a.type),Arrow=(a,t,s=!1)=>({type:"ArrowFunctionExpression",async:s,params:a,body:t}),Await=a=>({type:"AwaitExpression",argument:a}),Call=(a,t,s=!1)=>{const n={type:"CallExpression",callee:a,arguments:t};return s?Await(n):n},Id=a=>({type:"Identifier",name:a}),Local=(a,t,s)=>({type:"VariableDeclaration",kind:a,declarations:[{type:"VariableDeclarator",id:t,init:s}]}),Statement=a=>isStatement(a)?a:{type:"ExpressionStatement",expression:a},TaggedTemplate=(a,t)=>({type:"TaggedTemplateExpression",tag:a,quasi:t}),TemplateElement=a=>({type:"TemplateElement",value:{raw:a}}),TemplateLiteral=(a,t)=>({type:"TemplateLiteral",quasis:a,expressions:t});a.exports={Arrow:Arrow,Assign:(a,t,s="=")=>({type:"AssignmentExpression",operator:s,left:a,right:t}),Async:a=>_objectSpread({},a,{async:!0}),Await:Await,Binary:(a,t,s)=>({type:"BinaryExpression",operator:a,left:t,right:s}),Block:(...a)=>({type:"BlockStatement",body:a.map(Statement)}),Call:Call,Catch:(a,t)=>({type:"CatchClause",param:a,body:t}),Class:(a,t,s)=>({type:"ClassExpression",id:a,superClass:t,body:{type:"ClassBody",body:s}}),Conditional:(a,t,s)=>({type:"ConditionalExpression",test:a,consequent:t,alternate:s}),Const:(a,t)=>Local("const",a,t),Debugger:()=>({type:"DebuggerStatement"}),DoWhile:(a,t)=>({type:"DoWhileStatement",test:a,body:t}),Empty:()=>({type:"EmptyStatement"}),For:(a,t,s,n)=>({type:"ForStatement",init:a,test:t,update:s,body:n}),ForIn:(a,t,s)=>({type:"ForInStatement",left:a,right:t,body:s}),ForOf:(a,t,s,n=!1)=>({type:"ForOfStatement",left:a,right:t,body:s,await:n}),Generator:(a,t,s)=>({type:"FunctionExpression",generator:!0,id:a,params:t,body:s}),Id:Id,If:(a,t,s)=>({type:"IfStatement",test:a,consequent:t,alternate:s}),Iife:(a,t,s,n=!1)=>Call(Arrow(a,s,n),t,n),Let:(a,t)=>Local("let",a,t),Literal:a=>({type:"Literal",value:a}),Local:Local,Member:(a,t)=>"Literal"===t.type&&(a=>e.test(a))(t.value)?{type:"MemberExpression",object:a,property:Id(t.value)}:{type:"MemberExpression",object:a,property:t,computed:"Identifier"!==t.type},New:(a,t)=>({type:"NewExpression",callee:a,arguments:t}),NewObj:a=>({type:"ObjectExpression",properties:a}),NewTarget:()=>({type:"MetaProperty",meta:Id("new"),property:Id("target")}),Procedure:(a,t,s)=>({type:"FunctionExpression",id:a,params:t,body:s}),Program:a=>({type:"Program",body:a}),Property:(a,t)=>({type:"Property",key:a,value:t,kind:"init"}),Return:a=>({type:"ReturnStatement",argument:a}),SafeId:(a,t="")=>Id((a=>a&&o.has(a)?"$_"+a:a)((a=>a.split("").map(escapeCharacter).join(""))(a)+t)),Sequence:(...a)=>({type:"SequenceExpression",expressions:a}),Slot:(a,t,s)=>({type:"MethodDefinition",key:t,computed:"Identifier"!==t.type,kind:a,value:s}),Spread:a=>({type:"SpreadElement",argument:a}),Statement:Statement,Static:a=>_objectSpread({},a,{static:!0}),Super:()=>({type:"Super"}),TaggedTemplate:TaggedTemplate,Template:(a,t)=>TaggedTemplate(a,TemplateLiteral([TemplateElement(t)],[])),TemplateElement:TemplateElement,TemplateLiteral:TemplateLiteral,This:()=>({type:"ThisExpression"}),Try:(a,t)=>({type:"TryStatement",block:a,handler:t}),Unary:(a,t,s=!0)=>({type:"UnaryExpression",operator:a,argument:t,prefix:s}),Var:(a,t)=>Local("var",a,t),Vector:a=>({type:"ArrayExpression",elements:a}),While:(a,t)=>({type:"WhileStatement",test:a,body:t}),Yield:a=>({type:"YieldExpression",argument:a}),YieldMany:a=>({type:"YieldExpression",delegate:!0,argument:a}),generate:n,isStatement:isStatement}},function(a,t){a.exports={language:"JavaScript",port:"0.15.0",porters:"Robert Koeninger"}},function(module,exports,__webpack_require__){const{AsyncFunction:AsyncFunction,GeneratorFunction:GeneratorFunction,flatMap:flatMap,last:last,mapAsync:mapAsync,pairs:pairs}=__webpack_require__(0),ast=__webpack_require__(2),{Arrow:Arrow,Assign:Assign,Async:Async,Await:Await,Binary:Binary,Block:Block,Call:Call,Catch:Catch,Class:Class,Conditional:Conditional,Const:Const,Debugger:Debugger,DoWhile:DoWhile,Empty:Empty,For:For,ForIn:ForIn,ForOf:ForOf,Generator:Generator,Id:Id,If:If,Let:Let,Literal:Literal,Member:Member,NewObj:NewObj,NewTarget:NewTarget,Procedure:Procedure,Property:Property,Return:Return,SafeId:SafeId,Sequence:Sequence,Slot:Slot,Spread:Spread,Statement:Statement,Static:Static,Super:Super,This:This,Try:Try,Unary:Unary,Var:Var,Vector:Vector,While:While,Yield:Yield,YieldMany:YieldMany,generate:generate}=ast;module.exports=async $=>{const{asFunction:asFunction,asJsBool:asJsBool,asList:asList,asNumber:asNumber,asShenBool:asShenBool,asString:asString,asSymbol:asSymbol,assign:assign,compile:compile,cons:cons,defun:defun,evalJs:evalJs,fun:fun,inline:inline,isArray:isArray,isSymbol:isSymbol,lookup:lookup,nameOf:nameOf,s:s,settle:settle,symbolOf:symbolOf,toArray:toArray,toArrayTree:toArrayTree,toList:toList,toListTree:toListTree,valueOf:valueOf}=$,signedfuncs=lookup("shen.*signedfuncs*"),macroregCell=lookup("shen.*macroreg*"),macrosCell=lookup("*macros*"),propertyVectorCell=lookup("*property-vector*"),caller=a=>{const t=lookup(a);return(...a)=>settle(t.f(...a))},curryType=caller("shen.curry-type"),incInfs=caller("shen.incinfs"),newpv=caller("shen.newpv"),unify=caller("unify!"),load=caller("load"),parse=caller("read-from-string"),put=caller("put"),evaluate=caller("eval"),define=async(a,t)=>{const n=symbolOf(a);return await defun(a,t),await put(n,s`shen.lambda-form`,t,propertyVectorCell.get()),await put(n,s`arity`,t.length,propertyVectorCell.get()),n},setSignedFuncs=(a,t)=>signedfuncs.set(cons(cons(a,t),signedfuncs.get())),freeVariables=a=>isArray(a)?[...new Set(flatMap(a,freeVariables)).values()]:isSymbol(a)&&nameOf(a).charCodeAt(0)>=65&&nameOf(a).charCodeAt(0)<=90?[a]:[],substitute=(a,t)=>isArray(t)?t.map(t=>substitute(a,t)):a.has(t)?a.get(t):t,declareType=async(a,t)=>{setSignedFuncs(symbolOf(a),t),await define("shen.type-signature-of-"+a,async(a,s,n)=>{const i=new Map(await mapAsync(freeVariables(t),async a=>[a,await newpv(s)]));return await incInfs(),await unify(a,substitute(i,t),s,n)})},defineTyped=async(a,t,s)=>{const n=await define(a,s);return await declareType(a,await curryType(toListTree(t))),n},defmacro=async(a,t)=>{const macrofn=a=>{const s=toListTree(t(toArrayTree(a)));return void 0===s?a:s};await define(a,macrofn);const s=macroregCell.get(),n=macrosCell.get(),i=symbolOf(a);return toArray(s).includes(i)||(macroregCell.set(cons(i,s)),macrosCell.set(cons(fun(a=>macrofn(a)),n))),i},evalShen=a=>evaluate(toListTree(a)),execEach=async a=>mapAsync(toArray(await parse(a)),evalShen),exec=async a=>last(await execEach(a)),symbol=async(a,t)=>{const s=a.lastIndexOf(".")+1,n=`${a.substr(0,s)}*${a.substr(s)}*`;return assign(n,t),await define(a,()=>valueOf(n)),t},sleep=a=>new Promise(t=>setTimeout(()=>t(null),a)),delay=(a,t)=>setTimeout(()=>settle(t()),a),repeat=(a,t)=>setInterval(()=>settle(t()),a);await define("js.ast.arguments",()=>Id("arguments")),await define("js.ast.array",a=>Vector(toArray(a))),await define("js.ast.arrow",(a,t)=>Arrow(toArray(a),t)),await define("js.ast.assign",(a,t)=>Assign(a,t)),await define("js.ast.async",a=>Async(a)),await define("js.ast.await",a=>Await(a)),await define("js.ast.binary",(a,t,s)=>Binary(a,t,s)),await define("js.ast.block",a=>Block(...toArray(a))),await define("js.ast.call",(a,t)=>Call(a,toArray(t))),await define("js.ast.catch",(a,t)=>Catch(a,t)),await define("js.ast.class",(a,t,s)=>Class(a,t,toArray(s))),await define("js.ast.const",(a,t)=>Const(a,t)),await define("js.ast.constructor",a=>Slot("constructor",Id("constructor"),a)),await define("js.ast.debugger",()=>Debugger()),await define("js.ast.do-while",(a,t)=>DoWhile(a,t)),await define("js.ast.empty",()=>Empty()),await define("js.ast.for",(a,t,s,n)=>For(a,t,s,n)),await define("js.ast.for-await-of",(a,t,s)=>ForOf(a,t,s,!0)),await define("js.ast.for-in",(a,t,s)=>ForIn(a,t,s)),await define("js.ast.for-of",(a,t,s)=>ForOf(a,t,s)),await define("js.ast.function",(a,t,s)=>Procedure(a,toArray(t),s)),await define("js.ast.function*",(a,t,s)=>Generator(a,toArray(t),s)),await define("js.ast.getter",(a,t)=>Slot("get",a,t)),await define("js.ast.id",a=>Id(a)),await define("js.ast.if",(a,t,s)=>If(a,t,s)),await define("js.ast.let",(a,t)=>Let(a,t)),await define("js.ast.literal",a=>Literal(a)),await define("js.ast.member",(a,t)=>Member(a,t)),await define("js.ast.method",(a,t)=>Slot("method",a,t)),await define("js.ast.new-target",()=>NewTarget()),await define("js.ast.object",a=>NewObj(pairs(toArray(a)).map(([a,t])=>Property(a,t)))),await define("js.ast.return",a=>Return(a)),await define("js.ast.safe-id",a=>SafeId(a)),await define("js.ast.setter",(a,t)=>Slot("set",a,t)),await define("js.ast.sequence",a=>Sequence(...toArray(a))),await define("js.ast.slot",(a,t,s)=>Slot(a,t,s)),await define("js.ast.spread",a=>Spread(toArray(a))),await define("js.ast.statement",a=>Statement(a)),await define("js.ast.static",a=>Static(a)),await define("js.ast.super",()=>Super()),await define("js.ast.ternary",(a,t,s)=>Conditional(a,t,s)),await define("js.ast.this",()=>This()),await define("js.ast.try",(a,t)=>Try(a,t)),await define("js.ast.update",(a,t,s)=>Assign(t,s,a+"=")),await define("js.ast.unary",(a,t)=>Unary(a,t)),await define("js.ast.var",(a,t)=>Var(a,t)),await define("js.ast.while",(a,t)=>While(a,t)),await define("js.ast.yield",a=>Yield(a)),await define("js.ast.yield*",a=>YieldMany(a)),await define("js.ast.compile",a=>compile(toArrayTree(a))),await define("js.ast.eval",a=>evalJs(a)),await define("js.ast.render",a=>generate(a)),await define("js.raw.==",(a,t)=>a==t),await define("js.raw.===",(a,t)=>a===t),await define("js.raw.!=",(a,t)=>a!=t),await define("js.raw.!==",(a,t)=>a!==t),await define("js.raw.not",a=>!a),await define("js.raw.and",(a,t)=>a&&t),await define("js.raw.or",(a,t)=>a||t),await define("js.raw.+",(a,t)=>a+t),await define("js.raw.-",(a,t)=>a-t),await define("js.raw.*",(a,t)=>a*t),await define("js.raw./",(a,t)=>a/t),await define("js.raw.%",(a,t)=>a%t),await define("js.raw.**",(a,t)=>a**t),await define("js.raw.<",(a,t)=>a<t),await define("js.raw.>",(a,t)=>a>t),await define("js.raw.<=",(a,t)=>a<=t),await define("js.raw.>=",(a,t)=>a>=t),await define("js.raw.bitwise.not",a=>~a),await define("js.raw.bitwise.and",(a,t)=>a&t),await define("js.raw.bitwise.or",(a,t)=>a|t),await define("js.raw.bitwise.xor",(a,t)=>a^t),await define("js.raw.<<",(a,t)=>a<<t),await define("js.raw.>>",(a,t)=>a>>t),await define("js.raw.>>>",(a,t)=>a>>>t),await define("js.raw.delete",(a,t)=>delete a[t]),await define("js.raw.eval",x=>eval(x)),await define("js.raw.in",(a,t)=>a in t),await define("js.raw.instanceof",(a,t)=>a instanceof t),await define("js.raw.typeof",a=>typeof a),await define("js.raw.void",a=>void 0),inline("js.raw.==",null,[null,null],(a,t)=>Binary("==",a,t)),inline("js.raw.===",null,[null,null],(a,t)=>Binary("===",a,t)),inline("js.raw.!=",null,[null,null],(a,t)=>Binary("!=",a,t)),inline("js.raw.!==",null,[null,null],(a,t)=>Binary("!==",a,t)),inline("js.raw.not",null,[null],a=>Unary("!",a)),inline("js.raw.and",null,[null,null],(a,t)=>Binary("&&",a,t)),inline("js.raw.or",null,[null,null],(a,t)=>Binary("||",a,t)),inline("js.raw.+",null,[null,null],(a,t)=>Binary("+",a,t)),inline("js.raw.-",null,[null,null],(a,t)=>Binary("-",a,t)),inline("js.raw.*",null,[null,null],(a,t)=>Binary("*",a,t)),inline("js.raw./",null,[null,null],(a,t)=>Binary("/",a,t)),inline("js.raw.%",null,[null,null],(a,t)=>Binary("%",a,t)),inline("js.raw.**",null,[null,null],(a,t)=>Binary("**",a,t)),inline("js.raw.<",null,[null,null],(a,t)=>Binary("<",a,t)),inline("js.raw.>",null,[null,null],(a,t)=>Binary(">",a,t)),inline("js.raw.<=",null,[null,null],(a,t)=>Binary("<=",a,t)),inline("js.raw.>=",null,[null,null],(a,t)=>Binary(">=",a,t)),inline("js.raw.bitwise.not",null,[null],a=>Unary("~",a)),inline("js.raw.bitwise.and",null,[null,null],(a,t)=>Binary("&",a,t)),inline("js.raw.bitwise.or",null,[null,null],(a,t)=>Binary("|",a,t)),inline("js.raw.bitwise.xor",null,[null,null],(a,t)=>Binary("^",a,t)),inline("js.raw.<<",null,[null,null],(a,t)=>Binary("<<",a,t)),inline("js.raw.>>",null,[null,null],(a,t)=>Binary(">>",a,t)),inline("js.raw.>>>",null,[null,null],(a,t)=>Binary(">>>",a,t)),inline("js.raw.delete",null,[null,null],(a,t)=>Unary("delete",Member(a,t))),inline("js.raw.eval",null,[null],a=>Call(Id("eval"),[a])),inline("js.raw.in",null,[null,null],(a,t)=>Binary("in",a,t)),inline("js.raw.instanceof",null,[null,null],(a,t)=>Binary("instanceof",a,t)),inline("js.raw.typeof",null,[null],a=>Unary("typeof",a)),inline("js.raw.void",null,[null],a=>Unary("void",a));const funType=(a,...t)=>0===t.length?[s`-->`,symbolOf(a)]:[symbolOf(a),...flatMap(t,a=>[s`-->`,symbolOf(a)])],A_B_boolean=funType("A","B","boolean"),number_number=funType("number","number"),number_number_number=funType("number","number","number"),string_string=funType("string","string"),string_A=funType("string","A"),A_unit=funType("A","unit"),string_number=funType("string","number"),string_number_number=funType("string","number","number"),A_boolean=funType("A","boolean"),timeout_unit=funType("js.timeout","unit"),number_unit=funType("number","unit"),number_lazy_timeout=[s`number`,s`-->`,[s`lazy`,s`A`],s`-->`,s`js.timeout`];return await defineTyped("js.==",A_B_boolean,(a,t)=>asShenBool(a==t)),await defineTyped("js.!=",A_B_boolean,(a,t)=>asShenBool(a!=t)),await defineTyped("js.===",A_B_boolean,(a,t)=>asShenBool(a===t)),await defineTyped("js.!==",A_B_boolean,(a,t)=>asShenBool(a!==t)),await defineTyped("js.%",number_number_number,(a,t)=>asNumber(a)%asNumber(t)),await defineTyped("js.**",number_number_number,(a,t)=>asNumber(a)**asNumber(t)),await defineTyped("js.bitwise.not",number_number,a=>~asNumber(a)),await defineTyped("js.bitwise.and",number_number_number,(a,t)=>asNumber(a)&asNumber(t)),await defineTyped("js.bitwise.or",number_number_number,(a,t)=>asNumber(a)|asNumber(t)),await defineTyped("js.bitwise.xor",number_number_number,(a,t)=>asNumber(a)^asNumber(t)),await defineTyped("js.<<",number_number_number,(a,t)=>asNumber(a)<<asNumber(t)),await defineTyped("js.>>",number_number_number,(a,t)=>asNumber(a)>>asNumber(t)),await defineTyped("js.>>>",number_number_number,(a,t)=>asNumber(a)>>>asNumber(t)),await defineTyped("js.clear",timeout_unit,a=>(clearTimeout(a),null)),await defineTyped("js.decode-uri",string_string,a=>decodeURI(asString(a))),await defineTyped("js.decode-uri-component",string_string,a=>decodeURIComponent(asString(a))),await defineTyped("js.delay",number_lazy_timeout,(a,t)=>delay(asNumber(a),asFunction(t))),await defineTyped("js.encode-uri",string_string,a=>encodeURI(asString(a))),await defineTyped("js.encode-uri-component",string_string,a=>encodeURIComponent(asString(a))),await defineTyped("js.eval",string_A,x=>eval(asString(x))),await defineTyped("js.log",A_unit,a=>(console.log(a),null)),await defineTyped("js.parse-float",string_number,a=>parseFloat(asString(a))),await defineTyped("js.parse-int",string_number,a=>parseInt(asString(a),10)),await defineTyped("js.parse-int-with-radix",string_number_number,(a,t)=>parseInt(asString(a),asNumber(t))),await defineTyped("js.repeat",number_lazy_timeout,(a,t)=>repeat(asNumber(a),asFunction(t))),await defineTyped("js.sleep",number_unit,a=>sleep(asNumber(a))),await define("json.parse",a=>JSON.parse(a)),await define("json.str",a=>JSON.stringify(a)),await defineTyped("js.array?",A_boolean,a=>asShenBool(Array.isArray(a))),await defineTyped("js.async?",A_boolean,a=>asShenBool(a instanceof AsyncFunction)),await defineTyped("js.boolean?",A_boolean,a=>asShenBool("boolean"==typeof a)),await defineTyped("js.defined?",A_boolean,a=>asShenBool(void 0!==a)),await defineTyped("js.false?",A_boolean,a=>asShenBool(!1===a)),await defineTyped("js.falsy?",A_boolean,a=>asShenBool(!a)),await defineTyped("js.finite?",A_boolean,a=>asShenBool(Number.isFinite(a))),await defineTyped("js.function?",A_boolean,a=>asShenBool("function"==typeof a)),await defineTyped("js.generator?",A_boolean,a=>asShenBool(a instanceof GeneratorFunction)),await defineTyped("js.infinite?",A_boolean,a=>asShenBool(!Number.isFinite(a))),await defineTyped("js.+infinity?",A_boolean,a=>asShenBool(a===1/0)),await defineTyped("js.-infinity?",A_boolean,a=>asShenBool(a===-1/0)),await defineTyped("js.integer?",A_boolean,a=>asShenBool(Number.isInteger(a))),await defineTyped("js.+integer?",A_boolean,a=>asShenBool(Number.isInteger(a)&&a>0)),await defineTyped("js.-integer?",A_boolean,a=>asShenBool(Number.isInteger(a)&&a<0)),await defineTyped("js.nan?",A_boolean,a=>asShenBool(Number.isNaN(a))),await defineTyped("js.null?",A_boolean,a=>asShenBool(null===a)),await defineTyped("js.object?",A_boolean,a=>asShenBool("object"==typeof a&&null!==a&&!Array.isArray(a))),await defineTyped("js.symbol?",A_boolean,a=>asShenBool("symbol"==typeof a)),await defineTyped("js.true?",A_boolean,a=>asShenBool(!0===a)),await defineTyped("js.truthy?",A_boolean,a=>asShenBool(!!a)),await defineTyped("js.undefined?",A_boolean,a=>asShenBool(void 0===a)),await define("js.get",(a,t)=>{const s=a[t];return"function"==typeof s?s.bind(a):s}),await defmacro("js.get-macro",a=>{if(isArray(a)&&a[0]===s`.`&&a.length>=2)return a.slice(2).reduce((a,t)=>[s`js.get`,a,t],a[1])}),await define("js.new",(a,t)=>new a(...toArray(asList(t)))),await define("js.obj",a=>pairs(toArray(asList(a))).reduce((a,[t,s])=>(a[t]=s,a),{})),await defmacro("js.obj-macro",a=>{if(isArray(a)&&a[0]===s`{`&&a[a.length-1]===s`}`)return[s`js.obj`,a.slice(1,a.length-1).reduceRight((a,t)=>[s`cons`,t,a],[])]}),await define("js.set",(a,t,s)=>a[t]=s),await symbol("js.Array",Array),await symbol("js.ArrayBuffer",ArrayBuffer),await symbol("js.AsyncFunction",AsyncFunction),await symbol("js.Boolean",Boolean),await symbol("js.console",console),await symbol("js.DataView",DataView),await symbol("js.Date",Date),await symbol("js.Function",Function),await symbol("js.GeneratorFunction",GeneratorFunction),await symbol("js.Infinity",1/0),await symbol("js.JSON",JSON),await symbol("js.Map",Map),await symbol("js.Math",Math),await symbol("js.NaN",NaN),await symbol("js.Number",Number),await symbol("js.null",null),await symbol("js.Object",Object),await symbol("js.Promise",Promise),await symbol("js.Proxy",Proxy),await symbol("js.Reflect",Reflect),await symbol("js.RegExp",RegExp),await symbol("js.Set",Set),await symbol("js.String",String),await symbol("js.Symbol",Symbol),await symbol("js.undefined",void 0),await symbol("js.WeakMap",WeakMap),await symbol("js.WeakSet",WeakSet),await symbol("js.WebAssembly",WebAssembly),"undefined"!=typeof Atomics&&await symbol("js.Atomics",Atomics),"undefined"!=typeof globalThis&&await symbol("js.globalThis",globalThis),"undefined"!=typeof SharedArrayBuffer&&await symbol("js.SharedArrayBuffer",SharedArrayBuffer),await define("shen-script.lookup",a=>lookup(nameOf(asSymbol(a)))),await define("shen-script.lookup-function",a=>lookup(nameOf(asSymbol(a))).f||null),await symbol("shen-script.ast",ast),await symbol("shen-script.$",$),await define("shen-script.array->list",a=>toList(a)),await define("shen-script.array->list+",(a,t)=>toList(a,t)),await define("shen-script.array->list-tree",a=>toListTree(a)),await define("shen-script.list->array",a=>toArray(a)),await define("shen-script.list->array-tree",a=>toArrayTree(a)),await define("shen-script.boolean.js->shen",a=>asShenBool(a)),await define("shen-script.boolean.shen->js",a=>asJsBool(a)),Object.assign($,{caller:caller,define:define,defineTyped:defineTyped,defmacro:defmacro,evalShen:evalShen,exec:exec,execEach:execEach,load:load,parse:parse,symbol:symbol})}},function(a,t,s){function ownKeys(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.push.apply(s,n)}return s}function _defineProperty(a,t,s){return t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}const n=s(6),{StringInStream:i,fetchRead:e}=s(0);window.Shen=class extends n{constructor(a){super(function _objectSpread(a){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){_defineProperty(a,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(s,t))}))}return a}({openRead:e,InStream:i},a))}}},function(a,t,s){(function(t){function ownKeys(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.push.apply(s,n)}return s}function _defineProperty(a,t,s){return t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}const n=void 0!==t&&null!=t.versions&&null!=t.versions.node;a.exports=class Shen{constructor(a={}){const t=n?"node":"web",i=s(7),e=s(9)(`./config.${t}.js`),o=s(12),l=s(14)(`./frontend.${t}.js`);return o(i(function _objectSpread(a){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){_defineProperty(a,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(s,t))}))}return a}({},e,{},a))).then(l)}}}).call(this,s(1))},function(a,t,s){function ownKeys(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.push.apply(s,n)}return s}function _objectSpread(a){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){_defineProperty(a,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(s,t))}))}return a}function _defineProperty(a,t,s){return t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}const{Arrow:n,Binary:i,Block:e,Call:o,Catch:l,Conditional:r,Id:f,Iife:w,Literal:c,Member:h,Return:y,SafeId:d,Sequence:C,Template:u,Try:b,Unary:p,Vector:m,generate:g,isStatement:S}=s(2),{AsyncFunction:v,flatMap:_,last:B,most:x,produce:q,produceState:j,raise:J,s:N}=s(0);class Cons{constructor(a,t){this.head=a,this.tail=t}}class Trampoline{constructor(a,t){this.f=a,this.args=t}}class Context{constructor(a){Object.assign(this,a)}with(a){return new Context(_objectSpread({},this,{},a))}sync(){return this.with({async:!1})}now(){return this.with({head:!0})}later(){return this.with({head:!1})}add(...a){return this.with({locals:new Map([...this.locals,...a])})}has(a){return this.locals.has(a)}get(a){return this.locals.get(a)}ann(a,t){return this.with({locals:new Map(this.locals).set(a,_objectSpread({},this.get(a)||{},{dataType:t}))})}}class Cell{constructor(a){this.name=a,this.f=()=>J(`function "${a}" is not defined`),this.value=void 0,this.valueExists=!1}set(a){return this.value=a,this.valueExists=!0,a}get(){return this.valueExists?this.value:J(`global "${this.name}" is not defined`)}}class Fabrication{constructor(a,t={}){this.ast=a,this.subs=t}get keys(){return Object.keys(this.subs)}get values(){return Object.values(this.subs)}}const k=Symbol.keyFor,O=Symbol.for,A=N`true`,T=N`false`,isObject=a=>!Array.isArray(a)&&"object"==typeof a&&null!==a,isNumber=a=>"number"==typeof a&&Number.isFinite(a),isString=a=>"string"==typeof a||a instanceof String,isSymbol=a=>"symbol"==typeof a,isFunction=a=>"function"==typeof a,isArray=a=>Array.isArray(a),isEArray=a=>isArray(a)&&0===a.length,isNeArray=a=>isArray(a)&&a.length>0,isError=a=>a instanceof Error,isCons=a=>a instanceof Cons,isList=a=>null===a||isCons(a),asNumber=a=>isNumber(a)?a:J("number expected"),asNzNumber=a=>(a=>isNumber(a)&&0!==a)(a)?a:J("non-zero number expected"),asString=a=>isString(a)?a:J("string expected"),asNeString=a=>(a=>isString(a)&&a.length>0)(a)?a:J("non-empty string expected"),asSymbol=a=>isSymbol(a)?a:J("symbol expected"),asFunction=a=>isFunction(a)?a:J("function expected"),asArray=a=>isArray(a)?a:J("array expected"),asCons=a=>isCons(a)?a:J("cons expected"),asList=a=>isList(a)?a:J("list expected"),asError=a=>isError(a)?a:J("error expected"),asIndex=(a,t)=>Number.isInteger(a)?a<0||a>=t.length?J(`index ${a} is not with array bounds of [0, ${t.length})`):a:J(`index ${a} is not valid`),asShenBool=a=>a?A:T,asJsBool=a=>a===A||a!==T&&J("Shen boolean expected"),cons=(a,t)=>new Cons(a,t),toArray=a=>isList(a)?q(isCons,a=>a.head,a=>a.tail,a):a,toArrayTree=a=>isList(a)?toArray(a).map(toArrayTree):a,toList=(a,t=null)=>isArray(a)?a.reduceRight((a,t)=>cons(t,a),t):a,toListTree=a=>isArray(a)?toList(a.map(toListTree)):a,equate=(a,t)=>a===t||isCons(a)&&isCons(t)&&equate(a.head,t.head)&&equate(a.tail,t.tail)||isArray(a)&&isArray(t)&&a.length===t.length&&a.every((a,s)=>equate(a,t[s]))||isObject(a)&&isObject(t)&&((a,t)=>a.constructor===t.constructor&&equate(Object.keys(a),Object.keys(t)))(a,t)&&Object.keys(a).every(s=>equate(a[s],t[s])),funSync=(a,t)=>(...s)=>s.length===t?a(...s):s.length>t?bounce(()=>asFunction(settle(a(...s.slice(0,t))))(...s.slice(t))):0===s.length?funSync(a,t):Object.assign(funSync((...t)=>a(...s,...t),t-s.length),{arity:a.arity-s.length}),funAsync=(a,t)=>async(...s)=>s.length===t?a(...s):s.length>t?bounce(async()=>asFunction(await settle(a(...s.slice(0,t))))(...s.slice(t))):0===s.length?funAsync(a,t):Object.assign(funAsync((...t)=>a(...s,...t),t-s.length),{arity:a.arity-s.length}),fun=(a,t=a.arity||a.length)=>Object.assign((a instanceof v?funAsync:funSync)(a,t),{arity:t}),bounce=(a,...t)=>new Trampoline(a,t),future=async a=>{for(;(a=await a)instanceof Trampoline;)a=a.f(...a.args);return a},settle=a=>{for(;;){if(!(a instanceof Trampoline))return a instanceof Promise?future(a):a;a=a.f(...a.args)}},Member$=a=>h(f("$"),f(a)),Call$=(a,t,s=!1)=>o(Member$(a),t,s),Call$f=(a,t,s=!1)=>inject(a,a=>o(h(a,f("f")),t,s)),ann=(a,t)=>t instanceof Fabrication?assemble(t=>ann(a,t),t):Object.assign(t,{dataType:a}),cast=(a,t)=>t instanceof Fabrication?assemble(t=>cast(a,t),t):a!==t.dataType?Object.assign(Call$("as"+a,[t]),{dataType:a}):t,uncast=a=>a instanceof Fabrication?assemble(a=>uncast(a),a):"JsBool"===a.dataType?cast("ShenBool",a):a,isForm=(a,t,s)=>isNeArray(a)&&a[0]===O(s)&&(!t||a.length===t),calls=a=>isForm(a,4,"if")?_(a.slice(1),calls):isForm(a,0,"cond")?_(_(a.slice(1),a=>a),calls):isForm(a,4,"let")?_(a.slice(2),calls):isForm(a,3,"lambda")?calls(a[2]):isForm(a,2,"function")&&isSymbol(a[1])?[a[1]]:isNeArray(a)?[a[0],..._(a.slice(1),calls)]:[],E=[N`+`,N`-`,N`*`,N`/`,N`=`,N`<`,N`>`,N`<=`,N`>=`,N`cn`,N`str`,N`tlstr`,N`pos`,N`n->string`,N`string->n`,N`cons`,N`hd`,N`tl`,N`cons?`,N`number?`,N`string?`,N`absvector?`,N`abvector`,N`<-address`,N`address->`,N`set`,N`value`,N`type`,N`simple-error`,N`error-to-string`,N`get-time`,N`and`,N`or`,N`if`,N`cond`,N`let`,N`do`,N`shen.pvar?`,N`@p`,N`shen.byte->digit`,N`shen.numbyte?`,N`integer?`,N`symbol?`,N`variable?`,N`shen.fillvector`,N`shen.initialise_arity_table`,N`put`,N`shen.dict`,N`shen.dict?`,N`shen.dict-count`,N`shen.dict->`,N`shen.<-dict`,N`shen.dict-rm`,N`shen.dict-keys`,N`shen.dict-values`],fabricate=(a,t)=>a instanceof Fabrication?t?new Fabrication(a.ast,Object.assign({},a.subs,t)):a:new Fabrication(a,t),assemble=(a,...t)=>{const s=t.map(a=>fabricate(a));return fabricate(a(...s.map(a=>a.ast)),Object.assign({},...s.map(a=>a.subs)))},inject=(a,t)=>{const s=d(a,"$c");return fabricate(t(s),{[s.name]:o(Member$("c"),[c(a)])})},inlineName=(a,t)=>isSymbol(t)&&!a.has(t)?fabricate(c(k(t))):assemble(a=>Call$("nameOf",[cast("Symbol",a)]),build(a.now(),t)),P=new Set(["Number","String","Symbol","Stream","Null","ShenBool"]),I=new Map([["absvector?","Array"],["boolean?","ShenBool"],["cons?","Cons"],["number?","Number"],["string?","String"],["symbol?","Symbol"]]),recognise=(a,t)=>{if(isArray(t)&&2===t.length&&isSymbol(t[0])&&a.has(t[1])){const s=I.get(k(t[0]));return s?a.ann(t[1],s):a}return a},buildFunction=(a,t,s)=>assemble(s=>Call$("l",[n(t.map(a=>isSymbol(a)?d(k(a)):a),s,a.async)]),uncast(build(a.later().add(...t.filter(isSymbol).map(a=>[a,{}])),s))),buildNestedLambda=(a,t,s)=>isForm(s,3,"lambda")?buildNestedLambda(a,[...t.map((a,t)=>a===s[1]?f(`$${t}$`):a),s[1]],s[2]):buildFunction(a,t,s),buildDefun=(a,[t,s,n,i])=>assemble((a,t)=>Call$("d",[a,t]),inlineName(a,s),buildFunction(((a,t)=>{const s=new Set(calls(t));s.delete(a);for(const a of E)s.delete(a);return s.size>0})(s,i)?a:a.sync(),n,i)),build=(a,t)=>isNumber(t)?fabricate(ann("Number",c(t))):isString(t)?fabricate(ann("String",c(t))):isEArray(t)?fabricate(ann("Null",c(null))):isSymbol(t)?a.has(t)?fabricate(((a,t)=>ann(a.get(t).dataType,d(k(t))))(a,t)):(a=>{const t=k(a),s=ann("Symbol",d(t,"$s"));return fabricate(s,{[s.name]:u(Member$("s"),t)})})(t):isForm(t,3,"and")?((a,[t,s,n])=>assemble((a,t)=>ann("JsBool",i("&&",cast("JsBool",a),cast("JsBool",t))),build(a.now(),s),build(recognise(a.now(),s),n)))(a,t):isForm(t,4,"if")?((a,[t,s,n,i])=>s===A?uncast(build(a,n)):assemble((a,t,s)=>r(cast("JsBool",a),t,s),build(a.now(),s),uncast(build(recognise(a,s),n)),uncast(build(a,i))))(a,t):isForm(t,0,"cond")?((a,[t,...s])=>build(a,s.reduceRight((a,[t,s])=>[N`if`,t,s,a],[N`simple-error`,"no condition was true"])))(a,t):isForm(t,3,"do")?((a,[t,...s])=>assemble(C,...x(s).map(t=>build(a.now(),t)),uncast(build(a,B(s)))))(a,t):isForm(t,4,"let")?((a,[t,s,i,e])=>assemble((t,i)=>o(n([d(k(s))],i,a.async),[t],a.async),uncast(build(a.now(),i)),uncast(build(a.add([asSymbol(s),{}]),e))))(a,t):isForm(t,3,"trap-error")?((a,[t,s,n])=>isForm(n,3,"lambda")?assemble((t,s)=>w([],[],e(b(e(y(t)),l(d(k(n[1])),e(y(s))))),a.async),uncast(build(a.now(),s)),uncast(build(a.add([asSymbol(n[1]),{dataType:"Error"}]),n[2]))):assemble((t,s)=>w([],[],e(b(e(y(t)),l(f("e$"),e(y(o(s,[f("e$")])))))),a.async),uncast(build(a.now(),s)),uncast(build(a,n))))(a,t):isForm(t,3,"lambda")?((a,[t,s,n])=>buildNestedLambda(a,[s],n))(a,t):isForm(t,2,"freeze")?((a,[t,s])=>buildFunction(a,[],s))(a,t):isForm(t,4,"defun")?buildDefun(a,t):isForm(t,3,"cons")?((a,t)=>{const{result:s,state:n}=j(a=>isForm(a,3,"cons"),a=>a[1],a=>a[2],t);return isEArray(n)||null===n?assemble((...a)=>ann("Cons",Call$("r",[m(a)])),...s.map(t=>uncast(build(a.now(),t)))):assemble((a,...t)=>ann("Cons",Call$("r",[m(t),a])),uncast(build(a.now(),n)),...s.map(t=>uncast(build(a.now(),t))))})(a,t):isForm(t,3,"set")?((a,[t,s,n])=>isSymbol(s)&&!a.has(s)?assemble(a=>inject(k(s),t=>o(h(t,f("set")),[a])),uncast(build(a.now(),n))):assemble((a,t)=>o(h(o(Member$("c"),[a]),f("set")),[t]),inlineName(a,s),uncast(build(a.now(),n))))(a,t):isForm(t,2,"value")?((a,[t,s])=>isSymbol(s)&&!a.has(s)?inject(k(s),a=>o(h(a,f("get")),[])):assemble(a=>Call$("valueOf",[a]),inlineName(a,s)))(a,t):((a,t)=>{if(isNeArray(t)&&isSymbol(t[0])){const s=a.inlines.get(k(t[0]));return s&&s.arity===t.length-1}return!1})(a,t)?((a,[t,...s])=>assemble((...s)=>a.inlines.get(k(t))(...s),...s.map(t=>build(a.now(),t))))(a,t):isArray(t)?((a,[t,...s])=>assemble((t,...s)=>a.head?Call$("t",[o(t,s)],a.async):Call$("b",[t,...s]),a.has(t)?fabricate(d(k(t))):isArray(t)?uncast(build(a.now(),t)):isSymbol(t)?inject(k(t),a=>h(a,f("f"))):J("not a valid application form"),...s.map(t=>uncast(build(a.now(),t)))))(a,t):J("not a valid form");a.exports=(a={})=>{const t=new Context({async:!0,head:!0,locals:new Map,inlines:new Map}),construct=a=>uncast(build(t,a)),compile=a=>((a,t=!1)=>0===a.keys.length?a.ast:w(a.keys.map(a=>f(a)),a.values,a.ast,t))(construct(a),!0),s=new Map,lookup=a=>{let t=s.get(a);return t||(t=new Cell(a),s.set(a,t)),t},valueOf=a=>lookup(a).get(),n=a.openRead||(()=>J("open(in) not supported")),l=a.openWrite||(()=>J("open(out) not supported")),r=a.isInStream||a.InStream&&(t=>t instanceof a.InStream)||(()=>!1),d=a.isOutStream||a.OutStream&&(t=>t instanceof a.OutStream)||(()=>!1),asInStream=a=>r(a)?a:J("input stream expected"),asOutStream=a=>d(a)?a:J("output stream expected"),isStream=a=>r(a)||d(a),asStream=a=>isStream(a)?a:J("stream expected"),C=a.clock||(()=>Date.now()/1e3),u=C(),show=a=>null===a?"[]":isString(a)?`"${a}"`:isSymbol(a)?k(a):isCons(a)?(a=>{const{result:t,state:s}=j(isCons,a=>a.head,a=>a.tail,a);return`[${t.map(show).join(" ")}${null===s?"":` | ${show(s)}`}]`})(a):isFunction(a)?`<Function ${a.arity||"?"}>`:isArray(a)?`<Vector ${a.length}>`:isError(a)?`<Error "${a.toString()}">`:isStream(a)?`<Stream ${a.name}>`:`${a}`,assign=(a,t)=>lookup(a).set(t),defun=(a,t)=>(lookup(a).f=t.arity?t:fun(t),O(a)),inline=(a,s,n,i)=>{const inliner=(...a)=>{const t=i(...a.map((a,t)=>n[t]?cast(n[t],a):uncast(a)));return s?ann(s,t):t};return inliner.arity=i.length,t.inlines.set(a,inliner),inliner},b={cons:cons,toArray:toArray,toArrayTree:toArrayTree,toList:toList,toListTree:toListTree,asJsBool:asJsBool,asShenBool:asShenBool,isEArray:isEArray,isNeArray:isNeArray,asNeString:asNeString,asNzNumber:asNzNumber,globals:s,lookup:lookup,assign:assign,defun:defun,inline:inline,isStream:isStream,isInStream:r,isOutStream:d,isNumber:isNumber,isString:isString,isSymbol:isSymbol,isCons:isCons,isList:isList,isArray:isArray,isError:isError,isFunction:isFunction,asStream:asStream,asInStream:asInStream,asOutStream:asOutStream,asNumber:asNumber,asString:asString,asSymbol:asSymbol,asCons:asCons,asList:asList,asArray:asArray,asError:asError,asFunction:asFunction,symbolOf:O,nameOf:k,valueOf:valueOf,show:show,equate:equate,raise:J,fun:fun,bounce:bounce,settle:settle,assemble:assemble,construct:construct,compile:compile,b:bounce,d:defun,l:fun,r:toList,s:N,t:settle,c:lookup,evalJs:a=>v("$",g(S(a)?e(a):y(a)))(b),evalKl:a=>b.evalJs(compile(toArrayTree(a)))},m=a.stoutput;return assign("*language*","JavaScript"),assign("*implementation*",a.implementation||"Unknown"),assign("*release*",a.release||"Unknown"),assign("*os*",a.os||"Unknown"),assign("*port*",a.port||"Unknown"),assign("*porters*",a.porters||"Unknown"),assign("*stinput*",a.stinput||(()=>J("standard input not supported"))),assign("*stoutput*",m||(()=>J("standard output not supported"))),assign("*sterror*",a.sterror||m||(()=>J("standard output not supported"))),assign("*home-directory*",a.homeDirectory||""),assign("shen-script.*instream-supported*",asShenBool(a.isInStream||a.InStream)),assign("shen-script.*outstream-supported*",asShenBool(a.isOutStream||a.OutStream)),defun("eval-kl",b.evalKl),defun("if",(a,t,s)=>asJsBool(a)?t:s),defun("and",(a,t)=>asShenBool(asJsBool(a)&&asJsBool(t))),defun("or",(a,t)=>asShenBool(asJsBool(a)||asJsBool(t))),defun("open",(a,t)=>((a,t)=>"in"===t?n(asString(valueOf("*home-directory*"))+a):"out"===t?l(asString(valueOf("*home-directory*"))+a):J(`open only accepts symbols in or out, not ${t}`))(asString(a),k(asSymbol(t)))),defun("close",a=>(asStream(a).close(),null)),defun("read-byte",a=>asInStream(a).read()),defun("write-byte",(a,t)=>(asOutStream(t).write(asNumber(a)),a)),defun("number?",a=>asShenBool(isNumber(a))),defun("string?",a=>asShenBool(isString(a))),defun("absvector?",a=>asShenBool(isArray(a))),defun("cons?",a=>asShenBool(isCons(a))),defun("hd",a=>asCons(a).head),defun("tl",a=>asCons(a).tail),defun("cons",cons),defun("tlstr",a=>asNeString(a).substring(1)),defun("cn",(a,t)=>asString(a)+asString(t)),defun("string->n",a=>asNeString(a).charCodeAt(0)),defun("n->string",a=>String.fromCharCode(asNumber(a))),defun("pos",(a,t)=>asString(a)[asIndex(t,a)]),defun("str",show),defun("absvector",a=>new Array(asNumber(a)).fill(null)),defun("<-address",(a,t)=>asArray(a)[asIndex(t,a)]),defun("address->",(a,t,s)=>(asArray(a)[asIndex(t,a)]=s,a)),defun("+",(a,t)=>asNumber(a)+asNumber(t)),defun("-",(a,t)=>asNumber(a)-asNumber(t)),defun("*",(a,t)=>asNumber(a)*asNumber(t)),defun("/",(a,t)=>asNumber(a)/asNzNumber(t)),defun(">",(a,t)=>asShenBool(asNumber(a)>asNumber(t))),defun("<",(a,t)=>asShenBool(asNumber(a)<asNumber(t))),defun(">=",(a,t)=>asShenBool(asNumber(a)>=asNumber(t))),defun("<=",(a,t)=>asShenBool(asNumber(a)<=asNumber(t))),defun("=",(a,t)=>asShenBool(equate(a,t))),defun("intern",a=>O(asString(a))),defun("get-time",a=>(a=>"unix"===a?C():"run"===a?C()-u:J(`get-time only accepts symbols unix or run, not ${a}`))(k(asSymbol(a)))),defun("simple-error",a=>J(asString(a))),defun("error-to-string",a=>asError(a).message),defun("set",(a,t)=>lookup(k(asSymbol(a))).set(t)),defun("value",a=>valueOf(k(asSymbol(a)))),defun("type",(a,t)=>a),inline("=","JsBool",[null,null],(a,t)=>((a,t)=>P.has(a.dataType)||P.has(t.dataType))(a,t)?i("===",a,t):Call$("equate",[a,t])),inline("not","JsBool",["JsBool"],a=>p("!",a)),inline("or","JsBool",["JsBool","JsBool"],(a,t)=>i("||",a,t)),inline("+","Number",["Number","Number"],(a,t)=>i("+",a,t)),inline("-","Number",["Number","Number"],(a,t)=>i("-",a,t)),inline("*","Number",["Number","Number"],(a,t)=>i("*",a,t)),inline("/","Number",["Number","NzNumber"],(a,t)=>i("/",a,t)),inline("<","JsBool",["Number","Number"],(a,t)=>i("<",a,t)),inline(">","JsBool",["Number","Number"],(a,t)=>i(">",a,t)),inline("<=","JsBool",["Number","Number"],(a,t)=>i("<=",a,t)),inline(">=","JsBool",["Number","Number"],(a,t)=>i(">=",a,t)),inline("cn","String",["String","String"],(a,t)=>i("+",a,t)),inline("str","String",[null],a=>Call$("show",[a])),inline("intern","Symbol",["String"],a=>Call$("symbolOf",[a])),inline("number?","JsBool",[null],a=>Call$("isNumber",[a])),inline("string?","JsBool",[null],a=>Call$("isString",[a])),inline("cons?","JsBool",[null],a=>Call$("isCons",[a])),inline("absvector?","JsBool",[null],a=>Call$("isArray",[a])),inline("cons","Cons",[null,null],(a,t)=>Call$("cons",[a,t])),inline("hd",null,["Cons"],a=>h(a,f("head"))),inline("tl",null,["Cons"],a=>h(a,f("tail"))),inline("error-to-string","String",["Error"],a=>h(a,f("message"))),inline("simple-error",null,["String"],a=>Call$("raise",[a])),inline("read-byte","Number",["InStream"],a=>o(h(a,f("read")),[])),inline("write-byte","Number",[null,null],(a,t)=>Call$f("write-byte",[a,t])),inline("get-time","Number",[null],a=>Call$f("get-time",[a])),inline("string->n","Number",["NeString"],a=>o(h(a,f("charCodeAt")),[c(0)])),inline("n->string","String",["Number"],a=>o(h(f("String"),f("fromCharCode")),[a])),inline("tlstr","String",["NeString"],a=>o(h(a,f("substring")),[c(1)])),inline("pos","String",[null,null],(a,t)=>Call$f("pos",[a,t])),inline("absvector","Array",[null],a=>Call$f("absvector",[a])),inline("address->","Array",[null,null,null],(a,t,s)=>Call$f("address->",[a,t,s])),b}},function(a,t,s){"use strict";s.r(t),s.d(t,"baseGenerator",(function(){return y})),s.d(t,"generate",(function(){return generate}));const{stringify:n}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const i={"||":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},e=17,o={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:e,ClassExpression:e,FunctionExpression:e,ObjectExpression:e,UpdateExpression:16,UnaryExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,AwaitExpression:2,YieldExpression:2,RestElement:1};function formatSequence(a,t){const{generator:s}=a;if(a.write("("),null!=t&&t.length>0){s[t[0].type](t[0],a);const{length:n}=t;for(let i=1;i<n;i++){const n=t[i];a.write(", "),s[n.type](n,a)}}a.write(")")}function formatBinaryExpressionPart(a,t,s,n){const{generator:l}=a;!function expressionNeedsParenthesis(a,t,s){const n=o[a.type];if(n===e)return!0;const l=o[t.type];return n!==l?!s&&15===n&&14===l&&"**"===t.operator||n<l:(13===n||14===n)&&("**"===a.operator&&"**"===t.operator?!s:s?i[a.operator]<=i[t.operator]:i[a.operator]<i[t.operator])}(t,s,n)?l[t.type](t,a):(a.write("("),l[t.type](t,a),a.write(")"))}function reindent(a,t,s,n){const i=t.split("\n"),e=i.length-1;if(a.write(i[0].trim()),e>0){a.write(n);for(let t=1;t<e;t++)a.write(s+i[t].trim()+n);a.write(s+i[e].trim())}}function formatComments(a,t,s,n){const{length:i}=t;for(let e=0;e<i;e++){const i=t[e];a.write(s),"L"===i.type[0]?a.write("// "+i.value.trim()+"\n"):(a.write("/*"),reindent(a,i.value,s,n),a.write("*/"+n))}}function formatVariableDeclaration(a,t){const{generator:s}=a,{declarations:n}=t;a.write(t.kind+" ");const{length:i}=n;if(i>0){s.VariableDeclarator(n[0],a);for(let t=1;t<i;t++)a.write(", "),s.VariableDeclarator(n[t],a)}}let l,r,f,w,c,h;const y={Program(a,t){const s=t.indent.repeat(t.indentLevel),{lineEnd:n,writeComments:i}=t;i&&null!=a.comments&&formatComments(t,a.comments,s,n);const e=a.body,{length:o}=e;for(let a=0;a<o;a++){const o=e[a];i&&null!=o.comments&&formatComments(t,o.comments,s,n),t.write(s),this[o.type](o,t),t.write(n)}i&&null!=a.trailingComments&&formatComments(t,a.trailingComments,s,n)},BlockStatement:h=function(a,t){const s=t.indent.repeat(t.indentLevel++),{lineEnd:n,writeComments:i}=t,e=s+t.indent;t.write("{");const o=a.body;if(null!=o&&o.length>0){t.write(n),i&&null!=a.comments&&formatComments(t,a.comments,e,n);const{length:l}=o;for(let a=0;a<l;a++){const s=o[a];i&&null!=s.comments&&formatComments(t,s.comments,e,n),t.write(e),this[s.type](s,t),t.write(n)}t.write(s)}else i&&null!=a.comments&&(t.write(n),formatComments(t,a.comments,e,n),t.write(s));i&&null!=a.trailingComments&&formatComments(t,a.trailingComments,e,n),t.write("}"),t.indentLevel--},ClassBody:h,EmptyStatement(a,t){t.write(";")},ExpressionStatement(a,t){const s=o[a.expression.type];s===e||3===s&&"O"===a.expression.left.type[0]?(t.write("("),this[a.expression.type](a.expression,t),t.write(")")):this[a.expression.type](a.expression,t),t.write(";")},IfStatement(a,t){t.write("if ("),this[a.test.type](a.test,t),t.write(") "),this[a.consequent.type](a.consequent,t),null!=a.alternate&&(t.write(" else "),this[a.alternate.type](a.alternate,t))},LabeledStatement(a,t){this[a.label.type](a.label,t),t.write(": "),this[a.body.type](a.body,t)},BreakStatement(a,t){t.write("break"),null!=a.label&&(t.write(" "),this[a.label.type](a.label,t)),t.write(";")},ContinueStatement(a,t){t.write("continue"),null!=a.label&&(t.write(" "),this[a.label.type](a.label,t)),t.write(";")},WithStatement(a,t){t.write("with ("),this[a.object.type](a.object,t),t.write(") "),this[a.body.type](a.body,t)},SwitchStatement(a,t){const s=t.indent.repeat(t.indentLevel++),{lineEnd:n,writeComments:i}=t;t.indentLevel++;const e=s+t.indent,o=e+t.indent;t.write("switch ("),this[a.discriminant.type](a.discriminant,t),t.write(") {"+n);const{cases:l}=a,{length:r}=l;for(let a=0;a<r;a++){const s=l[a];i&&null!=s.comments&&formatComments(t,s.comments,e,n),s.test?(t.write(e+"case "),this[s.test.type](s.test,t),t.write(":"+n)):t.write(e+"default:"+n);const{consequent:r}=s,{length:f}=r;for(let a=0;a<f;a++){const s=r[a];i&&null!=s.comments&&formatComments(t,s.comments,o,n),t.write(o),this[s.type](s,t),t.write(n)}}t.indentLevel-=2,t.write(s+"}")},ReturnStatement(a,t){t.write("return"),a.argument&&(t.write(" "),this[a.argument.type](a.argument,t)),t.write(";")},ThrowStatement(a,t){t.write("throw "),this[a.argument.type](a.argument,t),t.write(";")},TryStatement(a,t){if(t.write("try "),this[a.block.type](a.block,t),a.handler){const{handler:s}=a;null==s.param?t.write(" catch "):(t.write(" catch ("),this[s.param.type](s.param,t),t.write(") ")),this[s.body.type](s.body,t)}a.finalizer&&(t.write(" finally "),this[a.finalizer.type](a.finalizer,t))},WhileStatement(a,t){t.write("while ("),this[a.test.type](a.test,t),t.write(") "),this[a.body.type](a.body,t)},DoWhileStatement(a,t){t.write("do "),this[a.body.type](a.body,t),t.write(" while ("),this[a.test.type](a.test,t),t.write(");")},ForStatement(a,t){if(t.write("for ("),null!=a.init){const{init:s}=a;"V"===s.type[0]?formatVariableDeclaration(t,s):this[s.type](s,t)}t.write("; "),a.test&&this[a.test.type](a.test,t),t.write("; "),a.update&&this[a.update.type](a.update,t),t.write(") "),this[a.body.type](a.body,t)},ForInStatement:l=function(a,t){t.write(`for ${a.await?"await ":""}(`);const{left:s}=a;"V"===s.type[0]?formatVariableDeclaration(t,s):this[s.type](s,t),t.write("I"===a.type[3]?" in ":" of "),this[a.right.type](a.right,t),t.write(") "),this[a.body.type](a.body,t)},ForOfStatement:l,DebuggerStatement(a,t){t.write("debugger;"+t.lineEnd)},FunctionDeclaration:r=function(a,t){t.write((a.async?"async ":"")+(a.generator?"function* ":"function ")+(a.id?a.id.name:""),a),formatSequence(t,a.params),t.write(" "),this[a.body.type](a.body,t)},FunctionExpression:r,VariableDeclaration(a,t){formatVariableDeclaration(t,a),t.write(";")},VariableDeclarator(a,t){this[a.id.type](a.id,t),null!=a.init&&(t.write(" = "),this[a.init.type](a.init,t))},ClassDeclaration(a,t){t.write("class "+(a.id?`${a.id.name} `:""),a),a.superClass&&(t.write("extends "),this[a.superClass.type](a.superClass,t),t.write(" ")),this.ClassBody(a.body,t)},ImportDeclaration(a,t){t.write("import ");const{specifiers:s}=a,{length:n}=s;let i=0;if(n>0){for(;i<n;){i>0&&t.write(", ");const a=s[i],n=a.type[6];if("D"===n)t.write(a.local.name,a),i++;else{if("N"!==n)break;t.write("* as "+a.local.name,a),i++}}if(i<n){for(t.write("{");;){const a=s[i],{name:e}=a.imported;if(t.write(e,a),e!==a.local.name&&t.write(" as "+a.local.name),!(++i<n))break;t.write(", ")}t.write("}")}t.write(" from ")}this.Literal(a.source,t),t.write(";")},ExportDefaultDeclaration(a,t){t.write("export default "),this[a.declaration.type](a.declaration,t),o[a.declaration.type]&&"F"!==a.declaration.type[0]&&t.write(";")},ExportNamedDeclaration(a,t){if(t.write("export "),a.declaration)this[a.declaration.type](a.declaration,t);else{t.write("{");const{specifiers:s}=a,{length:n}=s;if(n>0)for(let a=0;;){const i=s[a],{name:e}=i.local;if(t.write(e,i),e!==i.exported.name&&t.write(" as "+i.exported.name),!(++a<n))break;t.write(", ")}t.write("}"),a.source&&(t.write(" from "),this.Literal(a.source,t)),t.write(";")}},ExportAllDeclaration(a,t){t.write("export * from "),this.Literal(a.source,t),t.write(";")},MethodDefinition(a,t){a.static&&t.write("static ");const s=a.kind[0];"g"!==s&&"s"!==s||t.write(a.kind+" "),a.value.async&&t.write("async "),a.value.generator&&t.write("*"),a.computed?(t.write("["),this[a.key.type](a.key,t),t.write("]")):this[a.key.type](a.key,t),formatSequence(t,a.value.params),t.write(" "),this[a.value.body.type](a.value.body,t)},ClassExpression(a,t){this.ClassDeclaration(a,t)},ArrowFunctionExpression(a,t){t.write(a.async?"async ":"",a);const{params:s}=a;null!=s&&(1===s.length&&"I"===s[0].type[0]?t.write(s[0].name,s[0]):formatSequence(t,a.params)),t.write(" => "),"O"===a.body.type[0]?(t.write("("),this.ObjectExpression(a.body,t),t.write(")")):this[a.body.type](a.body,t)},ThisExpression(a,t){t.write("this",a)},Super(a,t){t.write("super",a)},RestElement:f=function(a,t){t.write("..."),this[a.argument.type](a.argument,t)},SpreadElement:f,YieldExpression(a,t){t.write(a.delegate?"yield*":"yield"),a.argument&&(t.write(" "),this[a.argument.type](a.argument,t))},AwaitExpression(a,t){t.write("await "),a.argument&&this[a.argument.type](a.argument,t)},TemplateLiteral(a,t){const{quasis:s,expressions:n}=a;t.write("`");const{length:i}=n;for(let a=0;a<i;a++){const i=n[a];this.TemplateElement(s[a],t),t.write("${"),this[i.type](i,t),t.write("}")}t.write(s[s.length-1].value.raw),t.write("`")},TemplateElement(a,t){t.write(a.value.raw)},TaggedTemplateExpression(a,t){this[a.tag.type](a.tag,t),this[a.quasi.type](a.quasi,t)},ArrayExpression:c=function(a,t){if(t.write("["),a.elements.length>0){const{elements:s}=a,{length:n}=s;for(let a=0;;){const i=s[a];if(null!=i&&this[i.type](i,t),!(++a<n)){null==i&&t.write(", ");break}t.write(", ")}}t.write("]")},ArrayPattern:c,ObjectExpression(a,t){const s=t.indent.repeat(t.indentLevel++),{lineEnd:n,writeComments:i}=t,e=s+t.indent;if(t.write("{"),a.properties.length>0){t.write(n),i&&null!=a.comments&&formatComments(t,a.comments,e,n);const o=","+n,{properties:l}=a,{length:r}=l;for(let a=0;;){const s=l[a];if(i&&null!=s.comments&&formatComments(t,s.comments,e,n),t.write(e),this[s.type](s,t),!(++a<r))break;t.write(o)}t.write(n),i&&null!=a.trailingComments&&formatComments(t,a.trailingComments,e,n),t.write(s+"}")}else i?null!=a.comments?(t.write(n),formatComments(t,a.comments,e,n),null!=a.trailingComments&&formatComments(t,a.trailingComments,e,n),t.write(s+"}")):null!=a.trailingComments?(t.write(n),formatComments(t,a.trailingComments,e,n),t.write(s+"}")):t.write("}"):t.write("}");t.indentLevel--},Property(a,t){a.method||"i"!==a.kind[0]?this.MethodDefinition(a,t):(a.shorthand||(a.computed?(t.write("["),this[a.key.type](a.key,t),t.write("]")):this[a.key.type](a.key,t),t.write(": ")),this[a.value.type](a.value,t))},ObjectPattern(a,t){if(t.write("{"),a.properties.length>0){const{properties:s}=a,{length:n}=s;for(let a=0;this[s[a].type](s[a],t),++a<n;)t.write(", ")}t.write("}")},SequenceExpression(a,t){formatSequence(t,a.expressions)},UnaryExpression(a,t){a.prefix?(t.write(a.operator),a.operator.length>1&&t.write(" "),o[a.argument.type]<o.UnaryExpression?(t.write("("),this[a.argument.type](a.argument,t),t.write(")")):this[a.argument.type](a.argument,t)):(this[a.argument.type](a.argument,t),t.write(a.operator))},UpdateExpression(a,t){a.prefix?(t.write(a.operator),this[a.argument.type](a.argument,t)):(this[a.argument.type](a.argument,t),t.write(a.operator))},AssignmentExpression(a,t){this[a.left.type](a.left,t),t.write(" "+a.operator+" "),this[a.right.type](a.right,t)},AssignmentPattern(a,t){this[a.left.type](a.left,t),t.write(" = "),this[a.right.type](a.right,t)},BinaryExpression:w=function(a,t){const s="in"===a.operator;s&&t.write("("),formatBinaryExpressionPart(t,a.left,a,!1),t.write(" "+a.operator+" "),formatBinaryExpressionPart(t,a.right,a,!0),s&&t.write(")")},LogicalExpression:w,ConditionalExpression(a,t){o[a.test.type]>o.ConditionalExpression?this[a.test.type](a.test,t):(t.write("("),this[a.test.type](a.test,t),t.write(")")),t.write(" ? "),this[a.consequent.type](a.consequent,t),t.write(" : "),this[a.alternate.type](a.alternate,t)},NewExpression(a,t){t.write("new "),o[a.callee.type]<o.CallExpression||function hasCallExpression(a){let t=a;for(;null!=t;){const{type:a}=t;if("C"===a[0]&&"a"===a[1])return!0;if("M"!==a[0]||"e"!==a[1]||"m"!==a[2])return!1;t=t.object}}(a.callee)?(t.write("("),this[a.callee.type](a.callee,t),t.write(")")):this[a.callee.type](a.callee,t),formatSequence(t,a.arguments)},CallExpression(a,t){o[a.callee.type]<o.CallExpression?(t.write("("),this[a.callee.type](a.callee,t),t.write(")")):this[a.callee.type](a.callee,t),formatSequence(t,a.arguments)},MemberExpression(a,t){o[a.object.type]<o.MemberExpression?(t.write("("),this[a.object.type](a.object,t),t.write(")")):this[a.object.type](a.object,t),a.computed?(t.write("["),this[a.property.type](a.property,t),t.write("]")):(t.write("."),this[a.property.type](a.property,t))},MetaProperty(a,t){t.write(a.meta.name+"."+a.property.name,a)},Identifier(a,t){t.write(a.name,a)},Literal(a,t){null!=a.raw?t.write(a.raw,a):null!=a.regex?this.RegExpLiteral(a,t):t.write(n(a.value),a)},RegExpLiteral(a,t){const{regex:s}=a;t.write(`/${s.pattern}/${s.flags}`,a)}},d={};class State{constructor(a){const t=null==a?d:a;this.output="",null!=t.output?(this.output=t.output,this.write=this.writeToStream):this.output="",this.generator=null!=t.generator?t.generator:y,this.indent=null!=t.indent?t.indent:"  ",this.lineEnd=null!=t.lineEnd?t.lineEnd:"\n",this.indentLevel=null!=t.startingIndentLevel?t.startingIndentLevel:0,this.writeComments=!!t.comments&&t.comments,null!=t.sourceMap&&(this.write=null==t.output?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=t.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split("\n").length-1,this.mapping={original:null,generated:this,name:void 0,source:t.sourceMap.file||t.sourceMap._file})}write(a){this.output+=a}writeToStream(a){this.output.write(a)}writeAndMap(a,t){this.output+=a,this.map(a,t)}writeToStreamAndMap(a,t){this.output.write(a),this.map(a,t)}map(a,t){if(null!=t&&null!=t.loc){const{mapping:a}=this;a.original=t.loc.start,a.name=t.name,this.sourceMap.addMapping(a)}a.length>0&&(this.lineEndSize>0&&a.endsWith(this.lineEnd)?(this.line+=this.lineEndSize,this.column=0):"\n"===a[a.length-1]?(this.line++,this.column=0):this.column+=a.length)}toString(){return this.output}}function generate(a,t){const s=new State(t);return s.generator[a.type](a,s),s.output}},function(a,t,s){var n={"./config.node.js":10,"./config.web.js":11};function webpackContext(a){var t=webpackContextResolve(a);return s(t)}function webpackContextResolve(a){if(!s.o(n,a)){var t=new Error("Cannot find module '"+a+"'");throw t.code="MODULE_NOT_FOUND",t}return n[a]}webpackContext.keys=function webpackContextKeys(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,a.exports=webpackContext,webpackContext.id=9},function(a,t,s){(function(t){function ownKeys(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.push.apply(s,n)}return s}function _defineProperty(a,t,s){return t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}const{multiMatch:n}=s(0),i=n(t.platform,[/win32|win64/i,"Windows"],[/darwin|mac/i,"macOS"],[/linux/i,"Linux"]),e=t.version.slice(1);a.exports=function _objectSpread(a){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){_defineProperty(a,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(s,t))}))}return a}({},s(3),{implementation:"Node.js",os:i,release:e})}).call(this,s(1))},function(a,t,s){function ownKeys(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.push.apply(s,n)}return s}function _defineProperty(a,t,s){return t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}const{multiMatch:n}=s(0),i=n(navigator.userAgent,[/edge/i,"Edge"],[/trident|explorer/i,"Internet Explorer"],[/chrome/i,"Chrome"],[/opera/i,"Opera"],[/firefox/i,"Firefox"],[/safari/i,"Safari"],[/vivaldi/i,"Vivaldi"],[/android/i,"Android"]),e=n(navigator.userAgent,[/win32|win64/i,"Windows"],[/darwin|mac/i,"macOS"],[/darwin|ios|iphone|ipad/i,"iOS"],[/linux/i,"Linux"],[/droid/i,"Android"],[/x11/i,"Unix"]),o=(()=>{let a,t=navigator.userAgent,s=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d.]+)/i)||[];return/trident/i.test(s[1])?(a=/\brv[ :]+([\d.]+)/g.exec(t)||[],a[1]||""):"Chrome"===s[1]&&(a=t.match(/\b(OPR|Edge)\/([\d.]+)/),null!=a)?a[2]:(s=s[2]?[s[1],s[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=t.match(/version\/([\d.]+)/i))&&s.splice(1,1,a[1]),s[1])})();a.exports=function _objectSpread(a){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){_defineProperty(a,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(s,t))}))}return a}({},s(3),{implementation:i,os:e,release:o})},function(a,t,s){a.exports=async a=>{const t=a.c("compile"),n=a.c("shen.<define>"),i=a.c("shen.shen-syntax-error"),e=a.c("shen.app"),o=a.c("shen.next-50"),l=a.s`shen.a`,r=a.c("shen.<name>"),f=a.c("fail"),w=a.c("shen.<signature>"),c=a.c("shen.<rules>"),h=a.c("shen.pair"),y=a.c("shen.compile_to_machine_code"),d=a.c("shen.hdtl"),C=a.c("shen.hdhd"),u=a.c("shen.tlhd"),b=a.c("symbol?"),p=a.c("shen.sysfunc?"),m=a.c("element?"),g=a.c("get"),S=a.s`shen.external-symbols`,v=a.c("*property-vector*"),_=a.s`{`,B=a.c("shen.<signature-help>"),x=a.s`}`,q=a.c("shen.demodulate"),j=a.c("shen.curry-type"),J=a.c("shen.active-cons"),N=a.c("shen.curry-type-h"),k=a.s`bar!`,O=a.s`-->`,A=a.s`*`,T=a.c("map"),E=a.c("<e>"),P=a.c("shen.<rule>"),I=a.c("shen.linearise"),L=a.c("shen.<patterns>"),F=a.s`->`,D=a.c("shen.<action>"),M=a.s`where`,R=a.c("shen.<guard>"),$=a.s`<-`,z=a.s`shen.choicepoint!`,U=a.s`false`,V=a.s`true`,W=a.c("shen.*custom-pattern-compiler*"),K=a.c("shen.*custom-pattern-reducer*"),G=a.c("shen.<pattern>"),Y=a.s`@p`,X=a.c("shen.<pattern1>"),Q=a.c("shen.<pattern2>"),Z=a.s`cons`,H=a.s`@v`,aa=a.s`@s`,ta=a.s`vector`,sa=a.c("shen.custom-pattern-compiler"),na=a.c("shen.constructor-error"),ia=a.c("shen.<simple_pattern>"),ea=a.s`_`,oa=a.c("gensym"),la=a.s`Parse_Y`,ra=a.c("shen.compile_to_lambda+"),fa=a.c("shen.compile_to_kl"),wa=a.c("shen.record-source"),ca=a.c("shen.*installing-kl*"),ha=a.s`shen.skip`,ya=a.c("put"),da=a.s`shen.source`,Ca=a.c("shen.aritycheck"),ua=a.c("shen.update-symbol-table"),ba=a.c("shen.for-each"),pa=a.c("shen.free_variable_check"),ma=a.c("shen.parameters"),ga=a.c("shen.strip-protect"),Sa=a.c("shen.abstract_rule"),va=a.c("shen.application_build"),_a=a.s`shen.lambda-form`,Ba=a.c("eval-kl"),xa=a.c("shen.lambda-form"),qa=a.c("shen.extract_vars"),ja=a.c("shen.extract_free_vars"),Ja=a.c("shen.free_variable_warnings"),Na=a.c("shen.f_error"),ka=a.s`shen.free_variable_check`,Oa=a.c("variable?"),Aa=a.c("union"),Ta=a.s`protect`,Ea=a.s`lambda`,Pa=a.s`let`,Ia=a.c("shen.list_variables"),La=a.s`shen.list_variables`,Fa=a.c("shen.linearise_help"),Da=a.c("shen.flatten"),Ma=a.s`shen.linearise`,Ra=a.c("append"),$a=a.s`=`,za=a.c("shen.linearise_X"),Ua=a.s`shen.linearise_help`,Va=a.c("shen.aritycheck-action"),Wa=a.c("shen.aritycheck-name"),Ka=a.c("arity"),Ga=a.c("length"),Ya=a.s`shen.aritycheck`,Xa=a.c("shen.prhush"),Qa=a.c("stoutput"),Za=a.c("shen.aah"),Ha=a.c("shen.abstraction_build"),at=a.s`shen.abstract_rule`,tt=a.s`/.`,st=a.s`shen.abstraction_build`,nt=a.s`V`,it=a.s`shen.application_build`,et=a.c("shen.store-arity"),ot=a.c("shen.reduce"),lt=a.c("shen.cond-expression"),rt=a.c("shen.*optimise*"),ft=a.c("shen.typextable"),wt=a.c("shen.get-type"),ct=a.c("shen.assign-types"),ht=a.s`defun`,yt=a.s`shen.compile_to_kl`,dt=a.c("assoc"),Ct=a.c("shen.*signedfuncs*"),ut=a.c("empty?"),bt=a.s`cond`,pt=a.s`type`,mt=a.c("shen.atom-type"),gt=a.s`string`,St=a.s`number`,vt=a.c("boolean?"),_t=a.s`boolean`,Bt=a.s`symbol`,xt=a.s`arity`,qt=a.c("shen.*teststack*"),jt=a.c("shen.reduce_help"),Jt=a.c("reverse"),Nt=a.s`:`,kt=a.s`shen.tests`,Ot=a.c("shen.add_test"),At=a.s`cons?`,Tt=a.c("shen.ebr"),Et=a.s`hd`,Pt=a.s`tl`,It=a.s`tuple?`,Lt=a.s`fst`,Ft=a.s`snd`,Dt=a.s`shen.+vector?`,Mt=a.s`hdv`,Rt=a.s`tlv`,$t=a.s`shen.+string?`,zt=a.s`pos`,Ut=a.s`tlstr`,Vt=a.c("shen.custom-pattern-reducer"),Wt=a.c("<-address"),Kt=a.c("shen.clash?"),Gt=a.c("shen.err-condition"),Yt=a.c("shen.case-form"),Xt=a.c("shen.encode-choices"),Qt=a.c("shen.cond-form"),Zt=a.s`Result`,Ht=a.s`if`,as=a.s`fail`,ts=a.s`shen.sys-error`,ss=a.s`shen.f_error`,ns=a.s`Freeze`,is=a.s`freeze`,es=a.s`thaw`,os=a.s`shen.encode-choices`,ls=a.c("shen.embed-and"),rs=a.s`shen.case-form`,fs=a.s`and`,ws=a.s`shen.embed-and`,cs=a.c("shen.initialise_arity_table"),hs=a.s`shen.initialise_arity_table`,ys=a.c("adjoin"),ds=a.s`package`,Cs=a.s`receive`,us=a.c("shen.add-end"),bs=a.s`shen.set-lambda-form-entry`,ps=a.c("shen.*special*"),ms=a.c("remove"),gs=a.s`shen.s`,Ss=a.c("absvector"),vs=a.c("address->"),_s=a.s`shen.dictionary`,Bs=a.c("shen.fillvector"),xs=a.s`shen.not-dictionary`,qs=a.c("shen.dict-count->"),js=a.c("shen.dict-count"),Js=a.c("hash"),Ns=a.c("shen.dict-capacity"),ks=a.c("shen.<-dict-bucket"),Os=a.c("shen.assoc-set"),As=a.c("shen.dict-bucket->"),Ts=a.c("shen.dict-update-count"),Es=a.c("shen.assoc-rm"),Ps=a.c("shen.dict-fold-h"),Is=a.c("shen.bucket-fold"),Ls=a.s`shen.bucket-fold`,Fs=a.c("shen.dict-fold"),Ds=a.c("shen.*history*"),Ms=a.c("shen.*tc*"),Rs=a.c("shen.dict"),$s=a.c("shen.*process-counter*"),zs=a.c("shen.*varcounter*"),Us=a.c("vector"),Vs=a.c("shen.*prologvectors*"),Ws=a.c("shen.*demodulation-function*"),Ks=a.c("thaw"),Gs=a.c("shen.*macroreg*"),Ys=a.s`shen.timer-macro`,Xs=a.s`shen.cases-macro`,Qs=a.s`shen.abs-macro`,Zs=a.s`shen.put/get-macro`,Hs=a.s`shen.compile-macro`,an=a.s`shen.datatype-macro`,tn=a.s`shen.let-macro`,sn=a.s`shen.assoc-macro`,nn=a.s`shen.make-string-macro`,en=a.s`shen.output-macro`,on=a.s`shen.input-macro`,ln=a.s`shen.error-macro`,rn=a.s`shen.prolog-macro`,fn=a.s`shen.synonyms-macro`,wn=a.s`shen.nl-macro`,cn=a.s`shen.@s-macro`,hn=a.s`shen.defprolog-macro`,yn=a.s`shen.function-macro`,dn=a.c("*macros*"),Cn=a.c("shen.timer-macro"),un=a.c("shen.cases-macro"),bn=a.c("shen.abs-macro"),pn=a.c("shen.put/get-macro"),mn=a.c("shen.compile-macro"),gn=a.c("shen.datatype-macro"),Sn=a.c("shen.let-macro"),vn=a.c("shen.assoc-macro"),_n=a.c("shen.make-string-macro"),Bn=a.c("shen.output-macro"),xn=a.c("shen.input-macro"),qn=a.c("shen.error-macro"),jn=a.c("shen.prolog-macro"),Jn=a.c("shen.synonyms-macro"),Nn=a.c("shen.nl-macro"),kn=a.c("shen.@s-macro"),On=a.c("shen.defprolog-macro"),An=a.c("shen.function-macro"),Tn=a.c("shen.*gensym*"),En=a.c("shen.*tracking*"),Pn=a.c("shen.*alphabet*"),In=a.s`A`,Ln=a.s`B`,Fn=a.s`C`,Dn=a.s`D`,Mn=a.s`E`,Rn=a.s`F`,$n=a.s`G`,zn=a.s`H`,Un=a.s`I`,Vn=a.s`J`,Wn=a.s`K`,Kn=a.s`L`,Gn=a.s`M`,Yn=a.s`N`,Xn=a.s`O`,Qn=a.s`P`,Zn=a.s`Q`,Hn=a.s`R`,ai=a.s`S`,ti=a.s`T`,si=a.s`U`,ni=a.s`W`,ii=a.s`X`,ei=a.s`Y`,oi=a.s`Z`,li=a.s`set`,ri=a.s`open`,fi=a.c("shen.*extraspecial*"),wi=a.s`define`,ci=a.s`shen.process-datatype`,hi=a.s`input+`,yi=a.s`defcc`,di=a.s`shen.read+`,Ci=a.s`defmacro`,ui=a.c("shen.*spy*"),bi=a.c("shen.*datatypes*"),pi=a.c("shen.*alldatatypes*"),mi=a.c("shen.*shen-type-theory-enabled?*"),gi=a.c("shen.*synonyms*"),Si=a.c("shen.*system*"),vi=a.c("shen.*maxcomplexity*"),_i=a.c("shen.*occurs*"),Bi=a.c("shen.*maxinferences*"),xi=a.c("*maximum-print-sequence-size*"),qi=a.c("shen.*catch*"),ji=a.c("shen.*call*"),Ji=a.c("shen.*infs*"),Ni=a.c("*hush*"),ki=a.c("*version*"),Oi=a.c("bound?"),Ai=a.s`*home-directory*`,Ti=a.c("*home-directory*"),Ei=a.s`*sterror*`,Pi=a.c("*sterror*"),Ii=a.c("*stoutput*"),Li=a.s`abort`,Fi=a.s`absvector?`,Di=a.s`absvector`,Mi=a.s`adjoin`,Ri=a.s`append`,$i=a.s`assoc`,zi=a.s`boolean?`,Ui=a.s`bound?`,Vi=a.s`cd`,Wi=a.s`close`,Ki=a.s`compile`,Gi=a.s`concat`,Yi=a.s`cn`,Xi=a.s`declare`,Qi=a.s`destroy`,Zi=a.s`difference`,Hi=a.s`do`,ae=a.s`element?`,te=a.s`empty?`,se=a.s`enable-type-theory`,ne=a.s`error-to-string`,ie=a.s`shen.interror`,ee=a.s`eval`,oe=a.s`eval-kl`,le=a.s`explode`,re=a.s`external`,fe=a.s`fail-if`,we=a.s`fix`,ce=a.s`findall`,he=a.s`gensym`,ye=a.s`get`,de=a.s`get-time`,Ce=a.s`address->`,ue=a.s`<-address`,be=a.s`<-vector`,pe=a.s`>`,me=a.s`>=`,ge=a.s`hash`,Se=a.s`hdstr`,ve=a.s`head`,_e=a.s`integer?`,Be=a.s`intern`,xe=a.s`identical`,qe=a.s`inferences`,je=a.s`input`,Je=a.s`implementation`,Ne=a.s`intersection`,ke=a.s`internal`,Oe=a.s`it`,Ae=a.s`kill`,Te=a.s`language`,Ee=a.s`length`,Pe=a.s`limit`,Ie=a.s`lineread`,Le=a.s`load`,Fe=a.s`<`,De=a.s`<=`,Me=a.s`macroexpand`,Re=a.s`map`,$e=a.s`mapcan`,ze=a.s`maxinferences`,Ue=a.s`nl`,Ve=a.s`not`,We=a.s`nth`,Ke=a.s`n->string`,Ge=a.s`number?`,Ye=a.s`occurs-check`,Xe=a.s`occurrences`,Qe=a.s`optimise`,Ze=a.s`or`,He=a.s`os`,ao=a.s`package?`,to=a.s`port`,so=a.s`porters`,no=a.s`print`,io=a.s`profile`,eo=a.s`profile-results`,oo=a.s`pr`,lo=a.s`ps`,ro=a.s`preclude`,fo=a.s`preclude-all-but`,wo=a.s`put`,co=a.s`shen.reassemble`,ho=a.s`read-file-as-string`,yo=a.s`read-file`,Co=a.s`read-file-as-bytelist`,uo=a.s`read`,bo=a.s`read-byte`,po=a.s`read-from-string`,mo=a.s`release`,go=a.s`remove`,So=a.s`shen.require`,vo=a.s`reverse`,_o=a.s`simple-error`,Bo=a.s`specialise`,xo=a.s`spy`,qo=a.s`step`,jo=a.s`stinput`,Jo=a.s`stoutput`,No=a.s`sterror`,ko=a.s`string->n`,Oo=a.s`string->symbol`,Ao=a.s`string?`,To=a.s`str`,Eo=a.s`subst`,Po=a.s`sum`,Io=a.s`symbol?`,Lo=a.s`systemf`,Fo=a.s`tail`,Do=a.s`tc`,Mo=a.s`tc?`,Ro=a.s`track`,$o=a.s`trap-error`,zo=a.s`return`,Uo=a.s`undefmacro`,Vo=a.s`unput`,Wo=a.s`unprofile`,Ko=a.s`unify`,Go=a.s`unify!`,Yo=a.s`union`,Xo=a.s`untrack`,Qo=a.s`unspecialise`,Zo=a.s`vector?`,Ho=a.s`vector->`,al=a.s`value`,tl=a.s`variable?`,sl=a.s`version`,nl=a.s`write-byte`,il=a.s`write-to-file`,el=a.s`y-or-n?`,ol=a.s`+`,ll=a.s`/`,rl=a.s`-`,fl=a.s`==`,wl=a.s`<e>`,cl=a.s`<!>`,hl=a.s`include`,yl=a.s`include-all-but`,dl=a.s`!`,Cl=a.s`<--`,ul=a.s`&&`,bl=a.s`;`,pl=a.s`,`,ml=a.s`*language*`,gl=a.s`*implementation*`,Sl=a.s`*stinput*`,vl=a.s`*stoutput*`,_l=a.s`*version*`,Bl=a.s`*maximum-print-sequence-size*`,xl=a.s`*macros*`,ql=a.s`*os*`,jl=a.s`*release*`,Jl=a.s`*property-vector*`,Nl=a.s`*port*`,kl=a.s`*porters*`,Ol=a.s`*hush*`,Al=a.s`=!`,Tl=a.s`$`,El=a.s`>>`,Pl=a.s`when`,Il=a.s`warn`,Ll=a.s`verified`,Fl=a.s`unit`,Dl=a.s`shen.unix`,Ml=a.s`time`,Rl=a.s`synonyms`,$l=a.s`stream`,zl=a.s`save`,Ul=a.s`run`,Vl=a.s`prolog?`,Wl=a.s`output`,Kl=a.s`out`,Gl=a.s`null`,Yl=a.s`mode`,Xl=a.s`make-string`,Ql=a.s`loaded`,Zl=a.s`list`,Hl=a.s`lazy`,ar=a.s`is`,tr=a.s`in`,sr=a.s`function`,nr=a.s`file`,ir=a.s`fwhen`,er=a.s`exception`,or=a.s`error`,lr=a.s`defprolog`,rr=a.s`datatype`,fr=a.s`cut`,wr=a.s`cases`,cr=a.s`call`,hr=a.s`bind`,yr=a.c("shen.*step*"),dr=a.c("shen.*empty-absvector*"),Cr=a.s`shen.app`,ur=a.s`shen.==>`,br=a.s`shen.insert`,pr=a.s`shen.proc-nl`,mr=a.s`shen.prhush`,gr=a.c("shen.set-lambda-form-entry"),Sr=a.c("shen.type-signature-of-absvector?"),vr=a.s`shen.type-signature-of-absvector?`,_r=a.c("shen.type-signature-of-adjoin"),Br=a.s`shen.type-signature-of-adjoin`,xr=a.c("shen.type-signature-of-and"),qr=a.s`shen.type-signature-of-and`,jr=a.c("shen.type-signature-of-shen.app"),Jr=a.s`shen.type-signature-of-shen.app`,Nr=a.c("shen.type-signature-of-append"),kr=a.s`shen.type-signature-of-append`,Or=a.c("shen.type-signature-of-arity"),Ar=a.s`shen.type-signature-of-arity`,Tr=a.c("shen.type-signature-of-assoc"),Er=a.s`shen.type-signature-of-assoc`,Pr=a.c("shen.type-signature-of-boolean?"),Ir=a.s`shen.type-signature-of-boolean?`,Lr=a.c("shen.type-signature-of-bound?"),Fr=a.s`shen.type-signature-of-bound?`,Dr=a.c("shen.type-signature-of-cd"),Mr=a.s`shen.type-signature-of-cd`,Rr=a.c("shen.type-signature-of-close"),$r=a.s`shen.type-signature-of-close`,zr=a.c("shen.type-signature-of-cn"),Ur=a.s`shen.type-signature-of-cn`,Vr=a.c("shen.type-signature-of-compile"),Wr=a.s`shen.type-signature-of-compile`,Kr=a.c("shen.type-signature-of-cons?"),Gr=a.s`shen.type-signature-of-cons?`,Yr=a.c("shen.type-signature-of-destroy"),Xr=a.s`shen.type-signature-of-destroy`,Qr=a.c("shen.type-signature-of-difference"),Zr=a.s`shen.type-signature-of-difference`,Hr=a.c("shen.type-signature-of-do"),af=a.s`shen.type-signature-of-do`,tf=a.c("shen.type-signature-of-<e>"),sf=a.s`shen.type-signature-of-<e>`,nf=a.c("shen.type-signature-of-<!>"),ef=a.s`shen.type-signature-of-<!>`,of=a.c("shen.type-signature-of-element?"),lf=a.s`shen.type-signature-of-element?`,rf=a.c("shen.type-signature-of-empty?"),ff=a.s`shen.type-signature-of-empty?`,wf=a.c("shen.type-signature-of-enable-type-theory"),cf=a.s`shen.type-signature-of-enable-type-theory`,hf=a.c("shen.type-signature-of-external"),yf=a.s`shen.type-signature-of-external`,df=a.c("shen.type-signature-of-error-to-string"),Cf=a.s`shen.type-signature-of-error-to-string`,uf=a.c("shen.type-signature-of-explode"),bf=a.s`shen.type-signature-of-explode`,pf=a.c("shen.type-signature-of-fail"),mf=a.s`shen.type-signature-of-fail`,gf=a.c("shen.type-signature-of-fail-if"),Sf=a.s`shen.type-signature-of-fail-if`,vf=a.c("shen.type-signature-of-fix"),_f=a.s`shen.type-signature-of-fix`,Bf=a.c("shen.type-signature-of-freeze"),xf=a.s`shen.type-signature-of-freeze`,qf=a.c("shen.type-signature-of-fst"),jf=a.s`shen.type-signature-of-fst`,Jf=a.c("shen.type-signature-of-function"),Nf=a.s`shen.type-signature-of-function`,kf=a.c("shen.type-signature-of-gensym"),Of=a.s`shen.type-signature-of-gensym`,Af=a.c("shen.type-signature-of-<-vector"),Tf=a.s`shen.type-signature-of-<-vector`,Ef=a.c("shen.type-signature-of-vector->"),Pf=a.s`shen.type-signature-of-vector->`,If=a.c("shen.type-signature-of-vector"),Lf=a.s`shen.type-signature-of-vector`,Ff=a.c("shen.type-signature-of-get-time"),Df=a.s`shen.type-signature-of-get-time`,Mf=a.c("shen.type-signature-of-hash"),Rf=a.s`shen.type-signature-of-hash`,$f=a.c("shen.type-signature-of-head"),zf=a.s`shen.type-signature-of-head`,Uf=a.c("shen.type-signature-of-hdv"),Vf=a.s`shen.type-signature-of-hdv`,Wf=a.c("shen.type-signature-of-hdstr"),Kf=a.s`shen.type-signature-of-hdstr`,Gf=a.c("shen.type-signature-of-if"),Yf=a.s`shen.type-signature-of-if`,Xf=a.c("shen.type-signature-of-it"),Qf=a.s`shen.type-signature-of-it`,Zf=a.c("shen.type-signature-of-implementation"),Hf=a.s`shen.type-signature-of-implementation`,aw=a.c("shen.type-signature-of-include"),tw=a.s`shen.type-signature-of-include`,sw=a.c("shen.type-signature-of-include-all-but"),nw=a.s`shen.type-signature-of-include-all-but`,iw=a.c("shen.type-signature-of-inferences"),ew=a.s`shen.type-signature-of-inferences`,ow=a.c("shen.type-signature-of-shen.insert"),lw=a.s`shen.type-signature-of-shen.insert`,rw=a.c("shen.type-signature-of-integer?"),fw=a.s`shen.type-signature-of-integer?`,ww=a.c("shen.type-signature-of-internal"),cw=a.s`shen.type-signature-of-internal`,hw=a.c("shen.type-signature-of-intersection"),yw=a.s`shen.type-signature-of-intersection`,dw=a.c("shen.type-signature-of-kill"),Cw=a.s`shen.type-signature-of-kill`,uw=a.c("shen.type-signature-of-language"),bw=a.s`shen.type-signature-of-language`,pw=a.c("shen.type-signature-of-length"),mw=a.s`shen.type-signature-of-length`,gw=a.c("shen.type-signature-of-limit"),Sw=a.s`shen.type-signature-of-limit`,vw=a.c("shen.type-signature-of-load"),_w=a.s`shen.type-signature-of-load`,Bw=a.c("shen.type-signature-of-map"),xw=a.s`shen.type-signature-of-map`,qw=a.c("shen.type-signature-of-mapcan"),jw=a.s`shen.type-signature-of-mapcan`,Jw=a.c("shen.type-signature-of-maxinferences"),Nw=a.s`shen.type-signature-of-maxinferences`,kw=a.c("shen.type-signature-of-n->string"),Ow=a.s`shen.type-signature-of-n->string`,Aw=a.c("shen.type-signature-of-nl"),Tw=a.s`shen.type-signature-of-nl`,Ew=a.c("shen.type-signature-of-not"),Pw=a.s`shen.type-signature-of-not`,Iw=a.c("shen.type-signature-of-nth"),Lw=a.s`shen.type-signature-of-nth`,Fw=a.c("shen.type-signature-of-number?"),Dw=a.s`shen.type-signature-of-number?`,Mw=a.c("shen.type-signature-of-occurrences"),Rw=a.s`shen.type-signature-of-occurrences`,$w=a.c("shen.type-signature-of-occurs-check"),zw=a.s`shen.type-signature-of-occurs-check`,Uw=a.c("shen.type-signature-of-optimise"),Vw=a.s`shen.type-signature-of-optimise`,Ww=a.c("shen.type-signature-of-or"),Kw=a.s`shen.type-signature-of-or`,Gw=a.c("shen.type-signature-of-os"),Yw=a.s`shen.type-signature-of-os`,Xw=a.c("shen.type-signature-of-package?"),Qw=a.s`shen.type-signature-of-package?`,Zw=a.c("shen.type-signature-of-port"),Hw=a.s`shen.type-signature-of-port`,ac=a.c("shen.type-signature-of-porters"),tc=a.s`shen.type-signature-of-porters`,sc=a.c("shen.type-signature-of-pos"),nc=a.s`shen.type-signature-of-pos`,ic=a.c("shen.type-signature-of-pr"),ec=a.s`shen.type-signature-of-pr`,oc=a.c("shen.type-signature-of-print"),lc=a.s`shen.type-signature-of-print`,rc=a.c("shen.type-signature-of-profile"),fc=a.s`shen.type-signature-of-profile`,wc=a.c("shen.type-signature-of-preclude"),cc=a.s`shen.type-signature-of-preclude`,hc=a.c("shen.type-signature-of-shen.proc-nl"),yc=a.s`shen.type-signature-of-shen.proc-nl`,dc=a.c("shen.type-signature-of-profile-results"),Cc=a.s`shen.type-signature-of-profile-results`,uc=a.c("shen.type-signature-of-protect"),bc=a.s`shen.type-signature-of-protect`,pc=a.c("shen.type-signature-of-preclude-all-but"),mc=a.s`shen.type-signature-of-preclude-all-but`,gc=a.c("shen.type-signature-of-shen.prhush"),Sc=a.s`shen.type-signature-of-shen.prhush`,vc=a.c("shen.type-signature-of-ps"),_c=a.s`shen.type-signature-of-ps`,Bc=a.c("shen.type-signature-of-read"),xc=a.s`shen.type-signature-of-read`,qc=a.c("shen.type-signature-of-read-byte"),jc=a.s`shen.type-signature-of-read-byte`,Jc=a.c("shen.type-signature-of-read-file-as-bytelist"),Nc=a.s`shen.type-signature-of-read-file-as-bytelist`,kc=a.c("shen.type-signature-of-read-file-as-string"),Oc=a.s`shen.type-signature-of-read-file-as-string`,Ac=a.c("shen.type-signature-of-read-file"),Tc=a.s`shen.type-signature-of-read-file`,Ec=a.c("shen.type-signature-of-read-from-string"),Pc=a.s`shen.type-signature-of-read-from-string`,Ic=a.c("shen.type-signature-of-release"),Lc=a.s`shen.type-signature-of-release`,Fc=a.c("shen.type-signature-of-remove"),Dc=a.s`shen.type-signature-of-remove`,Mc=a.c("shen.type-signature-of-reverse"),Rc=a.s`shen.type-signature-of-reverse`,$c=a.c("shen.type-signature-of-simple-error"),zc=a.s`shen.type-signature-of-simple-error`,Uc=a.c("shen.type-signature-of-snd"),Vc=a.s`shen.type-signature-of-snd`,Wc=a.c("shen.type-signature-of-specialise"),Kc=a.s`shen.type-signature-of-specialise`,Gc=a.c("shen.type-signature-of-spy"),Yc=a.s`shen.type-signature-of-spy`,Xc=a.c("shen.type-signature-of-step"),Qc=a.s`shen.type-signature-of-step`,Zc=a.c("shen.type-signature-of-stinput"),Hc=a.s`shen.type-signature-of-stinput`,ah=a.c("shen.type-signature-of-sterror"),th=a.s`shen.type-signature-of-sterror`,sh=a.c("shen.type-signature-of-stoutput"),nh=a.s`shen.type-signature-of-stoutput`,ih=a.c("shen.type-signature-of-string?"),eh=a.s`shen.type-signature-of-string?`,oh=a.c("shen.type-signature-of-str"),lh=a.s`shen.type-signature-of-str`,rh=a.c("shen.type-signature-of-string->n"),fh=a.s`shen.type-signature-of-string->n`,wh=a.c("shen.type-signature-of-string->symbol"),ch=a.s`shen.type-signature-of-string->symbol`,hh=a.c("shen.type-signature-of-sum"),yh=a.s`shen.type-signature-of-sum`,dh=a.c("shen.type-signature-of-symbol?"),Ch=a.s`shen.type-signature-of-symbol?`,uh=a.c("shen.type-signature-of-systemf"),bh=a.s`shen.type-signature-of-systemf`,ph=a.c("shen.type-signature-of-tail"),mh=a.s`shen.type-signature-of-tail`,gh=a.c("shen.type-signature-of-tlstr"),Sh=a.s`shen.type-signature-of-tlstr`,vh=a.c("shen.type-signature-of-tlv"),_h=a.s`shen.type-signature-of-tlv`,Bh=a.c("shen.type-signature-of-tc"),xh=a.s`shen.type-signature-of-tc`,qh=a.c("shen.type-signature-of-tc?"),jh=a.s`shen.type-signature-of-tc?`,Jh=a.c("shen.type-signature-of-thaw"),Nh=a.s`shen.type-signature-of-thaw`,kh=a.c("shen.type-signature-of-track"),Oh=a.s`shen.type-signature-of-track`,Ah=a.c("shen.type-signature-of-trap-error"),Th=a.s`shen.type-signature-of-trap-error`,Eh=a.c("shen.type-signature-of-tuple?"),Ph=a.s`shen.type-signature-of-tuple?`,Ih=a.c("shen.type-signature-of-undefmacro"),Lh=a.s`shen.type-signature-of-undefmacro`,Fh=a.c("shen.type-signature-of-union"),Dh=a.s`shen.type-signature-of-union`,Mh=a.c("shen.type-signature-of-unprofile"),Rh=a.s`shen.type-signature-of-unprofile`,$h=a.c("shen.type-signature-of-untrack"),zh=a.s`shen.type-signature-of-untrack`,Uh=a.c("shen.type-signature-of-unspecialise"),Vh=a.s`shen.type-signature-of-unspecialise`,Wh=a.c("shen.type-signature-of-variable?"),Kh=a.s`shen.type-signature-of-variable?`,Gh=a.c("shen.type-signature-of-vector?"),Yh=a.s`shen.type-signature-of-vector?`,Xh=a.c("shen.type-signature-of-version"),Qh=a.s`shen.type-signature-of-version`,Zh=a.c("shen.type-signature-of-write-to-file"),Hh=a.s`shen.type-signature-of-write-to-file`,ay=a.c("shen.type-signature-of-write-byte"),ty=a.s`shen.type-signature-of-write-byte`,sy=a.c("shen.type-signature-of-y-or-n?"),ny=a.s`shen.type-signature-of-y-or-n?`,iy=a.c("shen.type-signature-of->"),ey=a.s`shen.type-signature-of->`,oy=a.c("shen.type-signature-of-<"),ly=a.s`shen.type-signature-of-<`,ry=a.c("shen.type-signature-of->="),fy=a.s`shen.type-signature-of->=`,wy=a.c("shen.type-signature-of-<="),cy=a.s`shen.type-signature-of-<=`,hy=a.c("shen.type-signature-of-="),yy=a.s`shen.type-signature-of-=`,dy=a.c("shen.type-signature-of-+"),Cy=a.s`shen.type-signature-of-+`,uy=a.c("shen.type-signature-of-/"),by=a.s`shen.type-signature-of-/`,py=a.c("shen.type-signature-of--"),my=a.s`shen.type-signature-of--`,gy=a.c("shen.type-signature-of-*"),Sy=a.s`shen.type-signature-of-*`,vy=a.c("shen.type-signature-of-=="),_y=a.s`shen.type-signature-of-==`,By=a.c("shen.datatype-error"),xy=a.s`shen.datatype-error`,qy=a.c("shen.tuple"),jy=a.s`shen.tuple`,Jy=a.c("shen.pvar"),Ny=a.s`shen.pvar`,ky=a.c("shen.dictionary"),Oy=a.c("@v"),Ay=a.c("@p"),Ty=a.c("@s"),Ey=a.c("<!>"),Py=a.c("=="),Iy=a.c("y-or-n?"),Ly=a.c("write-to-file"),Fy=a.c("write-byte"),Dy=a.c("vector->"),My=a.c("<-vector"),Ry=a.c("vector?"),$y=a.c("unspecialise"),zy=a.c("untrack"),Uy=a.c("unify"),Vy=a.c("unify!"),Wy=a.c("unput"),Ky=a.c("unprofile"),Gy=a.c("undefmacro"),Yy=a.c("return"),Xy=a.c("type"),Qy=a.c("tuple?"),Zy=a.c("track"),Hy=a.c("tc"),ad=a.c("tail"),td=a.c("systemf"),sd=a.c("string->symbol"),nd=a.c("sum"),id=a.c("subst"),ed=a.c("step"),od=a.c("spy"),ld=a.c("specialise"),rd=a.c("snd"),fd=a.c("read"),wd=a.c("read-file"),cd=a.c("read-file-as-bytelist"),hd=a.c("read-file-as-string"),yd=a.c("read-from-string"),dd=a.c("package?"),Cd=a.c("preclude"),ud=a.c("preclude-all-but"),bd=a.c("ps"),pd=a.c("protect"),md=a.c("profile-results"),gd=a.c("profile"),Sd=a.c("print"),vd=a.c("pr"),_d=a.c("pos"),Bd=a.c("optimise"),xd=a.c("open"),qd=a.c("occurrences"),jd=a.c("occurs-check"),Jd=a.c("nth"),Nd=a.c("nl"),kd=a.c("macroexpand"),Od=a.c("maxinferences"),Ad=a.c("mapcan"),Td=a.c("load"),Ed=a.c("lineread"),Pd=a.c("limit"),Id=a.c("intersection"),Ld=a.c("integer?"),Fd=a.c("input"),Dd=a.c("input+"),Md=a.c("include"),Rd=a.c("include-all-but"),$d=a.c("internal"),zd=a.c("identical"),Ud=a.c("head"),Vd=a.c("hdv"),Wd=a.c("hdstr"),Kd=a.c("get-time"),Gd=a.c("fst"),Yd=a.c("fix"),Xd=a.c("fail-if"),Qd=a.c("findall"),Zd=a.c("enable-type-theory"),Hd=a.c("explode"),aC=a.c("external"),tC=a.c("eval"),sC=a.c("difference"),nC=a.c("destroy"),iC=a.c("declare"),eC=a.c("concat"),oC=a.c("cd"),lC=a.c("close"),rC=a.c("shen.initialise-environment"),fC=a.c("shen.initialise-lambda-forms"),wC=a.c("shen.initialise-signedfunc-lambda-forms"),cC=a.c("shen.initialise-signedfuncs"),hC=a.c("shen.load-help"),yC=a.c("inferences"),dC=a.c("shen.eval-without-macros"),CC=a.c("shen.remove-synonyms"),uC=a.c("shen.typetable"),bC=a.c("shen.assumetype"),pC=a.c("shen.typecheck-and-load"),mC=a.c("shen.unwind-types"),gC=a.s`shen.synonyms-help`,SC=a.c("shen.typecheck-and-evaluate"),vC=a.c("shen.<sig+rest>"),_C=a.s`shen.assumetype`,BC=a.c("shen.remtype"),xC=a.s`shen.unwind-types`,qC=a.c("shen.removetype"),jC=a.s`shen.removetype`,JC=a.c("shen.compose"),NC=a.c("shen.walk"),kC=a.c("shen.mkstr"),OC=a.s`shen.compose`,AC=a.s`NPP`,TC=a.s`shen.start-new-prolog-process`,EC=a.c("shen.bld-prolog-call"),PC=a.c("shen.externally-bound"),IC=a.c("shen.locally-bind-prolog-vs"),LC=a.s`shen.newpv`,FC=a.c("shen.insert-deref"),DC=a.c("shen.insert-lazyderef"),MC=a.c("shen.<defprolog>"),RC=a.c("shen.prolog-error"),$C=a.c("shen.intern-type"),zC=a.s`shen.<datatype-rules>`,UC=a.c("shen.rcons_form"),VC=a.c("shen.curry-synonyms"),WC=a.s`Start`,KC=a.s`Finish`,GC=a.s`Time`,YC=a.s`Message`,XC=a.c("shen.tuple-up"),QC=a.c("shen.function-abstraction"),ZC=a.c("shen.function-abstraction-help"),HC=a.c("shen.findpos"),au=a.c("shen.remove-nth"),tu=a.s`shen.findpos`,su=a.s`shen.remove-nth`,nu=a.c("shen.<predicate*>"),iu=a.c("shen.<clauses*>"),eu=a.c("shen.prolog->shen"),ou=a.c("shen.insert-predicate"),lu=a.c("shen.decons-string"),ru=a.s`shen.next-50`,fu=a.c("shen.eval-cons"),wu=a.s`shen.r`,cu=a.s`shen.insert-predicate`,hu=a.c("shen.<clause*>"),yu=a.c("shen.<head*>"),du=a.c("shen.<body*>"),Cu=a.c("shen.<end*>"),uu=a.c("shen.<term*>"),bu=a.c("shen.legitimate-term?"),pu=a.c("shen.<literal*>"),mu=a.c("shen.insert_modes"),gu=a.c("shen.compile_prolog_procedure"),Su=a.c("shen.group_clauses"),vu=a.c("shen.s-prolog_clause"),_u=a.c("shen.head_abstraction"),Bu=a.c("shen.s-prolog_literal"),xu=a.s`shen.s-prolog_clause`,qu=a.c("shen.complexity_head"),ju=a.c("shen.remove_modes"),Ju=a.c("shen.cons_form"),Nu=a.s`shen.head_abstraction`,ku=a.c("shen.safe-product"),Ou=a.c("shen.complexity"),Au=a.s`shen.complexity_head`,Tu=a.c("shen.safe-multiply"),Eu=a.s`shen.safe-product`,Pu=a.s`ProcessN`,Iu=a.s`shen.s-prolog_literal`,Lu=a.s`shen.deref`,Fu=a.s`shen.lazyderef`,Du=a.c("shen.collect"),Mu=a.c("shen.same_predicate?"),Ru=a.s`shen.group_clauses`,$u=a.s`shen.collect`,zu=a.s`shen.same_predicate?`,Uu=a.c("shen.procedure_name"),Vu=a.c("shen.clauses-to-shen"),Wu=a.s`shen.procedure_name`,Ku=a.c("shen.linearise-clause"),Gu=a.c("shen.prolog-aritycheck"),Yu=a.c("shen.aum"),Xu=a.c("shen.catch-cut"),Qu=a.c("shen.nest-disjunct"),Zu=a.c("shen.aum_to_shen"),Hu=a.s`Continuation`,ab=a.c("shen.occurs?"),tb=a.s`Throwcontrol`,sb=a.s`shen.catchpoint`,nb=a.s`shen.cutpoint`,ib=a.s`shen.catchpoint!`,eb=a.c("shen.lisp-or"),ob=a.s`shen.nest-disjunct`,lb=a.s`Case`,rb=a.s`shen.prolog-aritycheck`,fb=a.c("shen.clause_form"),wb=a.s`shen.linearise-clause`,cb=a.c("shen.explicit_modes"),hb=a.c("shen.cf_help"),yb=a.s`shen.clause_form`,db=a.c("shen.em_help"),Cb=a.s`shen.explicit_modes`,ub=a.c("shen.make_mu_application"),bb=a.s`shen.mu`,pb=a.c("shen.continuation_call"),mb=a.c("shen.mu_reduction"),gb=a.s`shen.aum`,Sb=a.c("shen.cc_help"),vb=a.c("shen.remove-h"),_b=a.s`shen.remove-h`,Bb=a.s`shen.pop`,xb=a.s`shen.the`,qb=a.s`shen.stack`,jb=a.s`shen.rename`,Jb=a.s`shen.variables`,Nb=a.s`shen.then`,kb=a.s`shen.continuation`,Ob=a.s`shen.make_mu_application`,Ab=a.c("shen.ephemeral_variable?"),Tb=a.s`shen.be`,Eb=a.c("shen.prolog_constant?"),Pb=a.s`shen.result`,Ib=a.s`shen.of`,Lb=a.s`shen.dereferencing`,Fb=a.s`shen.to`,Db=a.s`shen.else`,Mb=a.s`shen.failed!`,Rb=a.s`shen.variable`,$b=a.s`shen.non-empty`,zb=a.s`shen.pvar?`,Ub=a.s`shen.bindv`,Vb=a.c("shen.chwild"),Wb=a.s`shen.unbindv`,Kb=a.s`shen.incinfs`,Gb=a.c("shen.call_the_continuation"),Yb=a.c("shen.resizeprocessvector"),Xb=a.c("shen.mk-pvar"),Qb=a.c("shen.resize-vector"),Zb=a.s`shen.-null-`,Hb=a.c("shen.copy-vector"),ap=a.c("shen.copy-vector-stage-2"),tp=a.c("shen.copy-vector-stage-1"),sp=a.s`shen.not-pvar`,np=a.c("shen.newcontinuation"),ip=a.s`shen.call_the_continuation`,ep=a.s`shen.newcontinuation`,op=a.c("shen.deref"),lp=a.c("shen.lzy="),rp=a.c("shen.lazyderef"),fp=a.c("shen.pvar?"),wp=a.c("bind"),cp=a.c("shen.valvector"),hp=a.c("shen.lzy=!"),yp=a.c("shen.lzy=="),dp=a.c("shen.bindv"),Cp=a.c("shen.unbindv"),up=a.c("shen.call-help"),bp=a.c("function"),pp=a.c("call"),mp=a.s`shen.call-help`,gp=a.c("shen.start-new-prolog-process"),Sp=a.c("shen.intprolog-help"),vp=a.c("shen.insert-prolog-variables"),_p=a.s`shen.intprolog`,Bp=a.c("shen.intprolog-help-help"),xp=a.s`shen.intprolog-help`,qp=a.c("shen.call-rest"),jp=a.s`shen.intprolog-help-help`,Jp=a.s`shen.call-rest`,Np=a.c("shen.initialise-prolog"),kp=a.c("shen.insert-prolog-variables-help"),Op=a.c("shen.newpv"),Ap=a.s`shen.insert-prolog-variables-help`,Tp=a.c("shen.read-file-as-Xlist"),Ep=a.c("shen.read-char-code"),Pp=a.c("shen.read-file-as-Xlist-help"),Ip=a.c("shen.rfas-h"),Lp=a.c("shen.monotype"),Fp=a.c("shen.typecheck"),Dp=a.c("shen.read-loop"),Mp=a.c("shen.*it*"),Rp=a.c("shen.<st_input>"),$p=a.c("shen.terminator?"),zp=a.c("shen.record-it"),Up=a.s`shen.nextbyte`,Vp=a.c("shen.lineread-loop"),Wp=a.c("shen.hat"),Kp=a.c("shen.newline"),Gp=a.c("shen.carriage-return"),Yp=a.s`shen.nextline`,Xp=a.c("shen.trim-whitespace"),Qp=a.c("shen.record-it-h"),Zp=a.c("shen.cn-all"),Hp=a.s`shen.cn-all`,am=a.c("shen.read-file-as-charlist"),tm=a.c("shen.read-error"),sm=a.c("shen.compress-50"),nm=a.s`shen.compress-50`,im=a.c("shen.<lsb>"),em=a.c("shen.<st_input1>"),om=a.c("shen.<rsb>"),lm=a.c("shen.<st_input2>"),rm=a.c("shen.<lrb>"),fm=a.c("shen.<rrb>"),wm=a.c("shen.package-macro"),cm=a.c("shen.<lcurly>"),hm=a.c("shen.<rcurly>"),ym=a.c("shen.<bar>"),dm=a.c("shen.<semicolon>"),Cm=a.c("shen.<colon>"),um=a.c("shen.<equal>"),bm=a.c("shen.<minus>"),pm=a.c("shen.<comma>"),mm=a.c("shen.<comment>"),gm=a.c("shen.<atom>"),Sm=a.c("shen.<whitespaces>"),vm=a.c("shen.<str>"),_m=a.c("shen.control-chars"),Bm=a.c("shen.<number>"),xm=a.c("shen.<sym>"),qm=a.c("shen.code-point"),jm=a.c("shen.after-codepoint"),Jm=a.c("shen.decimalise"),Nm=a.s`shen.control-chars`,km=a.s`shen.after-codepoint`,Om=a.c("shen.pre"),Am=a.c("shen.digits->integers"),Tm=a.c("shen.<alpha>"),Em=a.c("shen.<alphanums>"),Pm=a.c("shen.<alphanum>"),Im=a.c("shen.<num>"),Lm=a.c("shen.numbyte?"),Fm=a.c("shen.symbol-code?"),Dm=a.c("shen.<dbq>"),Mm=a.c("shen.<strcontents>"),Rm=a.c("shen.<strc>"),$m=a.c("shen.<plus>"),zm=a.c("shen.<predigits>"),Um=a.c("shen.<stop>"),Vm=a.c("shen.<postdigits>"),Wm=a.c("shen.<E>"),Km=a.c("shen.<log10>"),Gm=a.c("shen.expt"),Ym=a.c("shen.post"),Xm=a.c("shen.<digits>"),Qm=a.c("shen.<digit>"),Zm=a.c("shen.byte->digit"),Hm=a.s`shen.byte->digit`,ag=a.s`shen.pre`,tg=a.s`shen.post`,sg=a.c("shen.<singleline>"),ng=a.c("shen.<multiline>"),ig=a.c("shen.<backslash>"),eg=a.c("shen.<anysingle>"),og=a.c("shen.<return>"),lg=a.c("shen.<non-return>"),rg=a.c("shen.<times>"),fg=a.c("shen.<anymulti>"),wg=a.c("shen.<whitespace>"),cg=a.s`shen.cons_form`,hg=a.c("shen.record-exceptions"),yg=a.c("shen.packageh"),dg=a.c("shen.record-internal"),Cg=a.c("shen.internal-symbols"),ug=a.s`shen.internal-symbols`,bg=a.c("shen.prefix?"),pg=a.c("shen.doubleunderline?"),mg=a.c("shen.singleunderline?"),gg=a.c("shen.<datatype-rule>"),Sg=a.c("shen.<datatype-rules>"),vg=a.c("shen.<side-conditions>"),_g=a.c("shen.<premises>"),Bg=a.c("shen.<singleunderline>"),xg=a.c("shen.<conclusion>"),qg=a.c("shen.sequent"),jg=a.s`shen.single`,Jg=a.c("shen.<doubleunderline>"),Ng=a.s`shen.double`,kg=a.c("shen.<side-condition>"),Og=a.c("shen.<expr>"),Ag=a.c("shen.<variable?>"),Tg=a.c("shen.remove-bar"),Eg=a.c("shen.<premise>"),Pg=a.c("shen.<semicolon-symbol>"),Ig=a.c("shen.<formulae>"),Lg=a.c("shen.<formula>"),Fg=a.c("shen.<comma-symbol>"),Dg=a.c("shen.<type>"),Mg=a.c("shen.curry"),Rg=a.c("shen.sh?"),$g=a.c("shen.dh?"),zg=a.c("shen.remember-datatype"),Ug=a.c("shen.s-prolog"),Vg=a.c("shen.rules->horn-clauses"),Wg=a.s`shen.remember-datatype`,Kg=a.c("shen.rule->horn-clause"),Gg=a.c("shen.double->singles"),Yg=a.s`shen.rules->horn-clauses`,Xg=a.c("shen.right-rule"),Qg=a.c("shen.left-rule"),Zg=a.s`Qv`,Hg=a.c("shen.right->left"),aS=a.s`shen.left-rule`,tS=a.c("shen.rule->horn-clause-head"),sS=a.c("shen.rule->horn-clause-body"),nS=a.s`shen.rule->horn-clause`,iS=a.c("shen.mode-ify"),eS=a.s`Context_1957`,oS=a.s`shen.cl`,lS=a.c("shen.construct-search-literals"),rS=a.s`Context1_1957`,fS=a.c("shen.construct-search-clauses"),wS=a.c("shen.construct-side-literals"),cS=a.c("shen.construct-premiss-literal"),hS=a.c("shen.csl-help"),yS=a.s`ContextOut_1957`,dS=a.s`Context`,CS=a.s`shen.csl-help`,uS=a.c("shen.construct-search-clause"),bS=a.s`shen.construct-search-clauses`,pS=a.c("shen.construct-base-search-clause"),mS=a.c("shen.construct-recursive-search-clause"),gS=a.s`In_1957`,SS=a.s`Assumptions_1957`,vS=a.s`Assumption_1957`,_S=a.s`Out_1957`,BS=a.s`shen.construct-side-literals`,xS=a.s`shen.t*`,qS=a.c("shen.recursive_cons_form"),jS=a.c("shen.construct-context"),JS=a.s`shen.construct-premiss-literal`,NS=a.s`shen.construct-context`,kS=a.c("shen.preclude-h"),OS=a.c("shen.include-h"),AS=a.c("shen.update-demodulation-function"),TS=a.c("shen.demod-rule"),ES=a.c("shen.pushnew"),PS=a.s`shen.*synonyms*`,IS=a.c("shen.synonyms-help"),LS=a.s`shen.demod-rule`,FS=a.s`shen.lambda-of-defun`,DS=a.c("shen.lambda-of-defun"),MS=a.c("shen.elim-def"),RS=a.c("shen.default-rule"),$S=a.s`shen.demod`,zS=a.c("shen.packaged?"),US=a.c("shen.package-contents"),VS=a.c("shen.proc-input+"),WS=a.c("shen.shen->kl"),KS=a.c("shen.add-macro"),GS=a.c("shen.yacc"),YS=a.s`shen.package-contents`,XS=a.c("*stinput*"),QS=a.c("shen.analyse-symbol?"),ZS=a.c("shen.+string?"),HS=a.c("shen.alpha?"),av=a.c("shen.alphanums?"),tv=a.s`shen.analyse-symbol?`,sv=a.c("shen.alphanum?"),nv=a.s`shen.alphanums?`,iv=a.c("shen.digit?"),ev=a.c("shen.analyse-variable?"),ov=a.c("shen.uppercase?"),lv=a.s`shen.analyse-variable?`,rv=a.s`shen.not-tuple`,fv=a.c("shen.@v-help"),wv=a.c("shen.copyfromvector"),cv=a.c("shen.tlv-help"),hv=a.s`shen.assoc-set`,yv=a.s`shen.assoc-rm`,dv=a.c("shen.fix-help"),Cv=a.c("shen.<-dict"),uv=a.c("shen.dict->"),bv=a.c("shen.mod"),pv=a.c("shen.modh"),mv=a.c("shen.multiples"),gv=a.s`shen.multiples`,Sv=a.s`shen.modh`,vv=a.c("shen.reverse_help"),_v=a.s`shen.reverse_help`,Bv=a.c("shen.proc-nl"),xv=a.c("stinput"),qv=a.c("shen.explode-h"),jv=a.s`shen.explode-h`,Jv=a.s`shen.for-each`,Nv=a.c("shen.length-h"),kv=a.c("shen.abs"),Ov=a.c("shen.integer-test?"),Av=a.c("shen.magless"),Tv=a.s`shen.this-symbol-is-unbound`,Ev=a.c("shen.string->bytes"),Pv=a.c("*os*"),Iv=a.c("*language*"),Lv=a.c("*port*"),Fv=a.c("*porters*"),Dv=a.c("*implementation*"),Mv=a.c("*release*"),Rv=a.c("shen.lookup-func"),$v=a.s`shen.void`,zv=a.c("shen.t*"),Uv=a.c("shen.special?"),Vv=a.c("shen.extraspecial?"),Wv=a.c("shen.catchpoint"),Kv=a.c("shen.cutpoint"),Gv=a.c("shen.incinfs"),Yv=a.c("fwhen"),Xv=a.c("shen.maxinfexceeded?"),Qv=a.c("shen.errormaxinfs"),Zv=a.c("cut"),Hv=a.c("shen.prolog-failure"),a_=a.c("shen.type-theory-enabled?"),t_=a.c("shen.th*"),s_=a.c("shen.show"),n_=a.c("shen.udefs*"),i_=a.c("shen.typedf?"),e_=a.c("shen.sigf"),o_=a.c("shen.base"),l_=a.c("shen.by_hypothesis"),r_=a.c("shen.placeholder"),f_=a.c("shen.t*-hyps"),w_=a.c("shen.t*-def"),c_=a.c("shen.line"),h_=a.c("shen.show-p"),y_=a.c("shen.show-assumptions"),d_=a.c("shen.pause-for-user"),C_=a.s`shen.show-assumptions`,u_=a.s`shen.type-signature-of-`,b_=a.c("shen.ue?"),p_=a.c("shen.t*-defh"),m_=a.c("shen.<sig+rules>"),g_=a.c("shen.t*-defhh"),S_=a.c("shen.ue-sig"),v_=a.c("shen.t*-rules"),__=a.c("shen.memo"),B_=a.c("shen.<non-ll-rules>"),x_=a.c("shen.ue"),q_=a.s`&&&`,j_=a.c("shen.ues"),J_=a.c("shen.ue-h?"),N_=a.c("shen.t*-rule"),k_=a.c("shen.newhyps"),O_=a.c("shen.placeholders"),A_=a.c("shen.t*-patterns"),T_=a.c("shen.t*-action"),E_=a.c("shen.result-type"),P_=a.c("shen.patthyps"),I_=a.s`shen.patthyps`,L_=a.s`shen.result-type`,F_=a.c("shen.findallhelp"),D_=a.c("shen.remember"),M_=a.c("shen.credits"),R_=a.c("shen.loop"),$_=a.c("shen.initialise_environment"),z_=a.c("shen.prompt"),U_=a.c("shen.read-evaluate-print"),V_=a.c("shen.toplevel-display-exception"),W_=a.c("shen.multiple-set"),K_=a.s`shen.*call*`,G_=a.s`shen.*infs*`,Y_=a.s`shen.*process-counter*`,X_=a.s`shen.*catch*`,Q_=a.s`shen.multiple-set`,Z_=a.c("shen.toplineread"),H_=a.c("shen.retrieve-from-history-if-needed"),aB=a.c("shen.update_history"),tB=a.c("shen.toplevel"),sB=a.c("shen.space"),nB=a.c("shen.exclamation"),iB=a.c("shen.prbytes"),eB=a.c("shen.make-key"),oB=a.c("shen.find-past-inputs"),lB=a.c("shen.percent"),rB=a.c("shen.print-past-inputs"),fB=a.c("abort"),wB=a.c("shen.toplineread_loop"),cB=a.c("shen.toplevel_evaluate"),hB=a.c("shen.find"),yB=a.c("shen.trim-gubbins"),dB=a.c("shen.tab"),CB=a.c("shen.left-round"),uB=a.s`shen.find`,bB=a.s`shen.print-past-inputs`,pB=a.s`shen.toplevel_evaluate`,mB=a.c("shen.pretty-type"),gB=a.c("shen.mult_subst"),SB=a.c("shen.extract-pvars"),vB=a.s`shen.mult_subst`,_B=a.c("shen.tracked?"),BB=a.c("shen.track-function"),xB=(a.s`shen.ok`,a.c("shen.insert-tracking-code")),qB=a.s`shen.track-function`,jB=a.s`shen.input-track`,JB=a.s`shen.terpri-or-read-char`,NB=a.s`shen.output-track`,kB=a.c("shen.check-byte"),OB=a.c("shen.spaces"),AB=a.c("shen.recursively-print"),TB=a.s`shen.recursively-print`,EB=a.c("shen.profile-help"),PB=a.s`shen.f`,IB=a.c("shen.profile-func"),LB=a.s`Record`,FB=a.s`shen.put-profile`,DB=a.s`shen.get-profile`,MB=a.c("shen.get-profile"),RB=a.c("shen.put-profile"),$B=a.c("shen.variancy-test"),zB=a.c("shen.variant?"),UB=a.c("shen.prh"),VB=a.c("shen.write-char-and-inc"),WB=a.c("shen.insert"),KB=a.c("shen.mkstr-l"),GB=a.c("shen.mkstr-r"),YB=a.c("shen.insert-l"),XB=a.s`shen.mkstr-l`,QB=a.c("shen.factor-cn"),ZB=a.s`shen.insert-l`,HB=a.s`shen.mkstr-r`,ax=a.c("shen.insert-h"),tx=a.s`shen.insert-h`,sx=a.c("shen.arg->str"),nx=a.c("shen.list?"),ix=a.c("shen.list->str"),ex=a.c("shen.str->str"),ox=a.c("shen.vector->str"),lx=a.c("shen.atom->str"),rx=a.c("shen.iter-list"),fx=a.c("shen.maxseq"),wx=a.c("shen.print-vector?"),cx=a.c("shen.iter-vector"),hx=a.c("shen.empty-absvector?"),yx=a.c("shen.fbound?"),dx=a.s`shen.out-of-bounds`,Cx=a.c("shen.funexstring"),ux=a.c("shen.yacc->shen"),bx=a.s`shen.yacc`,px=a.c("shen.split_cc_rules"),mx=a.c("shen.cc_body"),gx=a.c("shen.yacc_cases"),Sx=a.s`Stream`,vx=a.c("shen.kill-code"),_x=a.s`shen.analyse-kill`,Bx=a.c("shen.split_cc_rule"),xx=a.s`shen.split_cc_rules`,qx=a.c("shen.semantic-completion-warning"),jx=a.c("shen.default_semantics"),Jx=a.s`shen.split_cc_rule`,Nx=a.c("shen.grammar_symbol?"),kx=a.s`shen.default_semantics`,Ox=a.c("shen.strip-pathname"),Ax=a.s`YaccParse`,Tx=a.s`shen.yacc_cases`,Ex=a.c("shen.syntax"),Px=a.s`shen.cc_body`,Ix=a.c("shen.semantics"),Lx=a.s`shen.pair`,Fx=a.c("shen.recursive_descent"),Dx=a.c("shen.variable-match"),Mx=a.c("shen.jump_stream?"),Rx=a.c("shen.jump_stream"),$x=a.c("shen.terminal?"),zx=a.c("shen.check_stream"),Ux=a.c("shen.list-stream"),Vx=a.c("shen.decons"),Wx=a.s`shen.syntax`,Kx=a.s`shen.hdhd`,Gx=a.s`shen.place`,Yx=a.s`shen.tlhd`,Xx=a.s`shen.hdtl`,Qx=a.c("shen.insert-runon"),Zx=a.s`shen.strip-pathname`,Hx=a.s`Parse_`,aq=a.s`shen.recursive_descent`,tq=a.s`shen.variable-match`,sq=a.s`NewStream`,nq=a.s`shen.check_stream`,iq=a.s`shen.jump_stream`,eq=a.s`shen.fail!`,oq=a.s`shen.x.features.cond-expand`,lq=a.c("shen.x.features.*features*"),rq=a.c("shen.x.features.cond-expand-macro"),fq=a.s`shen.x.features.cond-expand-macro`,wq=a.c("shen.x.features.current"),cq=a.c("version"),hq=a.c("language"),yq=a.c("port"),dq=a.c("implementation"),Cq=a.c("release"),uq=a.s`success`,bq=a.c("shen.x.launcher.execute-all"),pq=a.s`shen.x.launcher.execute-all`,mq=a.c("shen.x.launcher.eval-command-h"),gq=a.c("shen.x.launcher.eval-string"),Sq=a.s`launch-repl`,vq=a.s`shen.x.launcher.eval-command-h`,_q=a.c("shen.x.launcher.eval-flag-map"),Bq=a.c("*argv*"),xq=a.c("shen.x.launcher.quiet-load"),qq=a.s`show-help`,jq=a.c("shen.x.launcher.help-text"),Jq=a.c("shen.x.launcher.version-string"),Nq=a.c("shen.x.launcher.script-command"),kq=a.c("shen.x.launcher.eval-command"),Oq=a.s`unknown-arguments`,Aq=a.s`shen.x.launcher.launch-shen`,Tq=a.s`shen.x.launcher.done`,Eq=a.c("shen.repl"),Pq=a.s`shen.x.launcher.default-handle-result`,Iq=a.c("shen.x.launcher.default-handle-result"),Lq=a.c("shen.x.launcher.launch-shen"),Fq=a.c("shen.initialise");return a.d("shen.shen->kl",a.l(async(s,e)=>a.b(t.f,a.l(async t=>a.b(n.f,t)),a.r([s],e),a.l(async t=>a.b(i.f,s,t))))),a.d("shen.shen-syntax-error",a.l(async(t,s)=>a.isCons(s)?a.raise("syntax error in "+a.asString(await a.t(e.f(t," here:\n\n "+a.asString(await a.t(e.f(await a.t(o.f(50,s.head)),"\n",l))),l)))):a.raise("syntax error in "+a.asString(await a.t(e.f(t,"\n",l)))))),a.d("shen.<define>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):a.b(h.f,a.asCons(s).head,await a.t(y.f(await a.t(d.f(t)),await a.t(d.f(s))))))(await a.t(c.f(t))))(await a.t(r.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,await a.t(y.f(await a.t(d.f(t)),await a.t(d.f(s)))))))(await a.t(c.f(s))))(await a.t(w.f(t))))(await a.t(r.f(t)))))),a.d("shen.<name>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,a.asJsBool(await a.t(b.f(s)))&&!a.asJsBool(await a.t(p.f(s)))?s:a.raise(a.asString(await a.t(e.f(s," is not a legitimate function name.\n",l))))))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.sysfunc?",a.l(async t=>a.b(m.f,t,await a.t(g.f(a.symbolOf("shen"),S,v.get()))))),a.d("shen.<signature>",a.l(async t=>a.isCons(a.asCons(t).head)&&_===await a.t(C.f(t))?await(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.isCons(a.asCons(t).head)&&x===await a.t(C.f(t))?await(async s=>a.b(h.f,a.asCons(s).head,await a.t(q.f(await a.t(j.f(await a.t(d.f(t))))))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))(await a.t(B.f(t))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.curry-type",a.l(async t=>a.b(J.f,await a.t(N.f(t))))),a.d("shen.active-cons",a.l(t=>a.isCons(t)&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&a.asCons(t.tail).head===k?a.r([a.t(J.f(a.asCons(t).head))],a.t(J.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head))):a.isCons(t)?a.r([a.t(J.f(t.head))],a.t(J.f(t.tail))):t)),a.d("shen.curry-type-h",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&O===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&O===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).head?a.b(N.f,a.r([a.asCons(t).head,O,a.asCons(a.asCons(t).tail).tail])):a.isCons(t)&&a.isCons(t.tail)&&A===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&A===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).head?a.b(N.f,a.r([a.asCons(t).head,A,a.asCons(a.asCons(t).tail).tail])):a.isCons(t)?a.b(T.f,a.l(async t=>a.b(N.f,t)),t):t)),a.d("shen.<signature-help>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(a.isCons(a.asCons(t).head)?await(async s=>await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):a.asJsBool(await a.t(m.f(s,a.r([_,x]))))?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([s],await a.t(d.f(t))))))(await a.t(B.f(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))))))(await a.t(C.f(t))):await a.t(f.f())))),a.d("shen.<rules>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,a.r([await a.t(I.f(await a.t(d.f(t))))])))(await a.t(P.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(I.f(await a.t(d.f(t))))],await a.t(d.f(s))))))(await a.t(c.f(t))))(await a.t(P.f(t)))))),a.d("shen.<rule>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.isCons(a.asCons(t).head)&&$===await a.t(C.f(t))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):a.b(h.f,a.asCons(s).head,a.r([await a.t(d.f(t)),a.r([z,await a.t(d.f(s))])])))(await a.t(D.f(s))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))(await a.t(L.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):a.isCons(a.asCons(t).head)&&$===await a.t(C.f(t))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):a.isCons(a.asCons(s).head)&&M===await a.t(C.f(s))?await(async n=>await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await a.t(h.f(a.asCons(n).head,a.r([await a.t(d.f(t)),a.r([M,await a.t(d.f(n)),a.r([z,await a.t(d.f(s))])])]))))(await a.t(R.f(n))))(await a.t(h.f(await a.t(u.f(s)),await a.t(d.f(s))))):await a.t(f.f()))(await a.t(D.f(s))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):await a.t(f.f()))(await a.t(L.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):a.isCons(a.asCons(t).head)&&F===await a.t(C.f(t))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t)),await a.t(d.f(s))]))))(await a.t(D.f(s))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):await a.t(f.f()))(await a.t(L.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):a.isCons(a.asCons(t).head)&&F===await a.t(C.f(t))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):a.isCons(a.asCons(s).head)&&M===await a.t(C.f(s))?await(async n=>await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await a.t(h.f(a.asCons(n).head,a.r([await a.t(d.f(t)),a.r([M,await a.t(d.f(n)),await a.t(d.f(s))])]))))(await a.t(R.f(n))))(await a.t(h.f(await a.t(u.f(s)),await a.t(d.f(s))))):await a.t(f.f()))(await a.t(D.f(s))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):await a.t(f.f()))(await a.t(L.f(t)))))),a.d("shen.fail_if",a.l(async(t,s)=>a.asJsBool(await a.t(t(s)))?a.b(f.f):s)),a.d("shen.succeeds?",a.l(async t=>a.equate(t,await a.t(f.f()))?U:V)),a.d("shen.custom-pattern-compiler",a.l(async(t,s)=>a.b(W.get(),t,s))),a.d("shen.custom-pattern-reducer",a.l(async t=>a.b(K.get(),t))),a.d("shen.<patterns>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(L.f(t))))(await a.t(G.f(t)))))),a.d("shen.<pattern>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(d.f(t))))(await a.t(ia.f(t))):s)(a.isCons(a.asCons(t).head)?await(async s=>a.isCons(s)?await a.t(h.f(a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,await a.t(sa.f(s,a.l(async()=>a.b(na.f,s)))))):await a.t(f.f()))(await a.t(C.f(t))):await a.t(f.f())):s)(a.isCons(a.asCons(t).head)&&a.isCons(await a.t(C.f(t)))&&a.isCons(a.asCons(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))).head)&&ta===await a.t(C.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))?await(async s=>a.isCons(a.asCons(s).head)&&0===await a.t(C.f(s))?await(async s=>await a.t(h.f(a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,a.r([ta,0]))))(await a.t(h.f(await a.t(u.f(s)),await a.t(d.f(s))))):await a.t(f.f()))(await a.t(h.f(await a.t(u.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t)))))),await a.t(d.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))))):await a.t(f.f())):s)(a.isCons(a.asCons(t).head)&&a.isCons(await a.t(C.f(t)))&&a.isCons(a.asCons(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))).head)&&aa===await a.t(C.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await a.t(h.f(a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,a.r([aa,await a.t(d.f(s)),await a.t(d.f(n))]))))(await a.t(Q.f(s))))(await a.t(X.f(s))))(await a.t(h.f(await a.t(u.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t)))))),await a.t(d.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))))):await a.t(f.f())):s)(a.isCons(a.asCons(t).head)&&a.isCons(await a.t(C.f(t)))&&a.isCons(a.asCons(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))).head)&&H===await a.t(C.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await a.t(h.f(a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,a.r([H,await a.t(d.f(s)),await a.t(d.f(n))]))))(await a.t(Q.f(s))))(await a.t(X.f(s))))(await a.t(h.f(await a.t(u.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t)))))),await a.t(d.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))))):await a.t(f.f())):s)(a.isCons(a.asCons(t).head)&&a.isCons(await a.t(C.f(t)))&&a.isCons(a.asCons(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))).head)&&Z===await a.t(C.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await a.t(h.f(a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,a.r([Z,await a.t(d.f(s)),await a.t(d.f(n))]))))(await a.t(Q.f(s))))(await a.t(X.f(s))))(await a.t(h.f(await a.t(u.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t)))))),await a.t(d.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))))):await a.t(f.f())):s)(a.isCons(a.asCons(t).head)&&a.isCons(await a.t(C.f(t)))&&a.isCons(a.asCons(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))).head)&&Y===await a.t(C.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await a.t(h.f(a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,a.r([Y,await a.t(d.f(s)),await a.t(d.f(n))]))))(await a.t(Q.f(s))))(await a.t(X.f(s))))(await a.t(h.f(await a.t(u.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t)))))),await a.t(d.f(await a.t(h.f(await a.t(C.f(t)),await a.t(d.f(t))))))))):await a.t(f.f())))),a.d("shen.constructor-error",a.l(async t=>a.raise(a.asString(await a.t(e.f(t," is not a legitimate constructor\n",l)))))),a.d("shen.<simple_pattern>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(m.f(s,a.r([F,$]))))?a.b(f.f):a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s))(await a.t(C.f(t))):a.b(f.f):s)(a.isCons(a.asCons(t).head)?await(async s=>s===ea?await a.t(h.f(a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,await a.t(oa.f(la)))):await a.t(f.f()))(await a.t(C.f(t))):await a.t(f.f())))),a.d("shen.<pattern1>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(d.f(t))))(await a.t(G.f(t))))),a.d("shen.<pattern2>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(d.f(t))))(await a.t(G.f(t))))),a.d("shen.<action>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<guard>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.compile_to_machine_code",a.l(async(t,s)=>await(async s=>await(async s=>await(async a=>s)(await a.t(wa.f(t,s))))(await a.t(fa.f(t,s))))(await a.t(ra.f(t,s))))),a.d("shen.record-source",a.l((t,s)=>a.asJsBool(ca.get())?ha:a.b(ya.f,t,da,s,v.get()))),a.d("shen.compile_to_lambda+",a.l(async(t,s)=>await(async n=>await(async i=>await(async t=>await(async t=>await(async s=>await(async s=>await(async s=>a.r([t,s]))(await a.t(T.f(a.l(async s=>a.b(va.f,t,s)),s))))(await a.t(T.f(a.l(async t=>a.b(Sa.f,t)),s))))(await a.t(T.f(a.l(async t=>a.b(ga.f,t)),s))))(await a.t(ma.f(n))))(await a.t(ba.f(a.l(async s=>a.b(pa.f,t,s)),s))))(await a.t(ua.f(t,n))))(await a.t(Ca.f(t,s))))),a.d("shen.update-symbol-table",a.l(async(t,s)=>0===s?ha:a.b(ya.f,t,_a,await a.t(Ba.f(await a.t(xa.f(t,s)))),v.get()))),a.d("shen.free_variable_check",a.l(async(t,s)=>a.isCons(s)&&a.isCons(s.tail)&&null===a.asCons(s.tail).tail?await(async n=>await(async s=>a.b(Ja.f,t,s))(await a.t(ja.f(n,a.asCons(a.asCons(s).tail).head))))(await a.t(qa.f(a.asCons(s).head))):a.b(Na.f,ka))),a.d("shen.extract_vars",a.l(async t=>a.asJsBool(await a.t(Oa.f(t)))?a.r([t]):a.isCons(t)?a.b(Aa.f,await a.t(qa.f(t.head)),await a.t(qa.f(t.tail))):null)),a.d("shen.extract_free_vars",a.l(async(t,s)=>a.isCons(s)&&a.isCons(s.tail)&&null===a.asCons(s.tail).tail&&s.head===Ta?null:a.asJsBool(await a.t(Oa.f(s)))&&!a.asJsBool(await a.t(m.f(s,t)))?a.r([s]):a.isCons(s)&&Ea===s.head&&a.isCons(s.tail)&&a.isCons(a.asCons(s.tail).tail)&&null===a.asCons(a.asCons(s.tail).tail).tail?a.b(ja.f,a.r([a.asCons(a.asCons(s).tail).head],t),a.asCons(a.asCons(a.asCons(s).tail).tail).head):a.isCons(s)&&Pa===s.head&&a.isCons(s.tail)&&a.isCons(a.asCons(s.tail).tail)&&a.isCons(a.asCons(a.asCons(s.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(s.tail).tail).tail).tail?a.b(Aa.f,await a.t(ja.f(t,a.asCons(a.asCons(a.asCons(s).tail).tail).head)),await a.t(ja.f(a.r([a.asCons(a.asCons(s).tail).head],t),a.asCons(a.asCons(a.asCons(a.asCons(s).tail).tail).tail).head))):a.isCons(s)?a.b(Aa.f,await a.t(ja.f(t,s.head)),await a.t(ja.f(t,s.tail))):null)),a.d("shen.free_variable_warnings",a.l(async(t,s)=>null===s?ea:a.raise("error: the following variables are free in "+a.asString(await a.t(e.f(t,": "+a.asString(await a.t(e.f(await a.t(Ia.f(s)),"",l))),l)))))),a.d("shen.list_variables",a.l(async t=>a.isCons(t)&&null===t.tail?a.show(a.asCons(t).head)+".":a.isCons(t)?a.show(t.head)+", "+a.asString(await a.t(Ia.f(t.tail))):a.b(Na.f,La))),a.d("shen.strip-protect",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&t.head===Ta?a.b(ga.f,a.asCons(a.asCons(t).tail).head):a.isCons(t)?a.b(T.f,a.l(async t=>a.b(ga.f,t)),t):t)),a.d("shen.linearise",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(Fa.f,await a.t(Da.f(a.asCons(t).head)),a.asCons(t).head,a.asCons(a.asCons(t).tail).head):a.b(Na.f,Ma))),a.d("shen.flatten",a.l(async t=>null===t?null:a.isCons(t)?a.b(Ra.f,await a.t(Da.f(t.head)),await a.t(Da.f(t.tail))):a.r([t]))),a.d("shen.linearise_help",a.l(async(t,s,n)=>null===t?a.r([s,n]):a.isCons(t)?a.asJsBool(await a.t(Oa.f(t.head)))&&a.asJsBool(await a.t(m.f(t.head,t.tail)))?await(async i=>await(async n=>await(async s=>a.b(Fa.f,t.tail,s,n))(await a.t(za.f(t.head,i,s))))(a.r([M,a.r([$a,t.head,i]),n])))(await a.t(oa.f(t.head))):a.b(Fa.f,t.tail,s,n):a.b(Na.f,Ua))),a.d("shen.linearise_X",a.l((t,s,n)=>a.equate(n,t)?s:a.isCons(n)?(i=>a.equate(i,n.head)?a.r([n.head],a.t(za.f(t,s,n.tail))):a.r([i],n.tail))(a.t(za.f(t,s,n.head))):n)),a.d("shen.aritycheck",a.l(async(t,s)=>a.isCons(s)&&a.isCons(s.head)&&a.isCons(a.asCons(s.head).tail)&&null===a.asCons(a.asCons(s.head).tail).tail&&null===s.tail?(await a.t(Va.f(a.asCons(a.asCons(a.asCons(s).head).tail).head)),a.b(Wa.f,t,await a.t(Ka.f(t)),await a.t(Ga.f(a.asCons(a.asCons(s).head).head)))):a.isCons(s)&&a.isCons(s.head)&&a.isCons(a.asCons(s.head).tail)&&null===a.asCons(a.asCons(s.head).tail).tail&&a.isCons(s.tail)&&a.isCons(a.asCons(s.tail).head)&&a.isCons(a.asCons(a.asCons(s.tail).head).tail)&&null===a.asCons(a.asCons(a.asCons(s.tail).head).tail).tail?a.equate(await a.t(Ga.f(a.asCons(a.asCons(s).head).head)),await a.t(Ga.f(a.asCons(a.asCons(a.asCons(s).tail).head).head)))?(await a.t(Va.f(a.asCons(a.asCons(a.asCons(s).head).tail).head)),a.b(Ca.f,t,a.asCons(s).tail)):a.raise("arity error in "+a.asString(await a.t(e.f(t,"\n",l)))):a.b(Na.f,Ya))),a.d("shen.aritycheck-name",a.l(async(t,s,n)=>-1===s?n:a.equate(n,s)?n:(await a.t(Xa.f("\nwarning: changing the arity of "+a.asString(await a.t(e.f(t," can cause errors.\n",l))),await a.t(Qa.f()))),n))),a.d("shen.aritycheck-action",a.l(async t=>a.isCons(t)?(await a.t(Za.f(t.head,t.tail)),a.b(ba.f,a.l(async t=>a.b(Va.f,t)),t)):ha)),a.d("shen.aah",a.l(async(t,s)=>await(async n=>await(async s=>a.asNumber(n)>-1&&a.asNumber(s)>a.asNumber(n)?a.b(Xa.f,"warning: "+a.asString(await a.t(e.f(t," might not like "+a.asString(await a.t(e.f(s," argument"+a.asString(await a.t(e.f(a.asNumber(s)>1?"s":"",".\n",l))),l))),l))),await a.t(Qa.f())):ha)(await a.t(Ga.f(s))))(await a.t(Ka.f(t))))),a.d("shen.abstract_rule",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(Ha.f,a.asCons(t).head,a.asCons(a.asCons(t).tail).head):a.b(Na.f,at))),a.d("shen.abstraction_build",a.l(async(t,s)=>null===t?s:a.isCons(t)?a.r([tt,t.head,await a.t(Ha.f(t.tail,s))]):a.b(Na.f,st))),a.d("shen.parameters",a.l(async t=>0===t?null:a.r([await a.t(oa.f(nt))],await a.t(ma.f(a.asNumber(t)-1))))),a.d("shen.application_build",a.l(async(t,s)=>null===t?s:a.isCons(t)?a.b(va.f,t.tail,a.r([s,t.head])):a.b(Na.f,it))),a.d("shen.compile_to_kl",a.l(async(t,s)=>a.isCons(s)&&a.isCons(s.tail)&&null===a.asCons(s.tail).tail?await(async n=>await(async n=>await(async n=>await(async i=>await(async n=>a.r([ht,t,a.asCons(s).head,n]))(a.asJsBool(rt.get())?await a.t(ct.f(a.asCons(s).head,i,n)):n))(a.asJsBool(rt.get())?await a.t(ft.f(await a.t(wt.f(t)),a.asCons(s).head)):ha))(await a.t(lt.f(t,a.asCons(s).head,n))))(await a.t(T.f(a.l(async t=>a.b(ot.f,t)),a.asCons(a.asCons(s).tail).head))))(await a.t(et.f(t,await a.t(Ga.f(a.asCons(s).head))))):a.b(Na.f,yt))),a.d("shen.get-type",a.l(async t=>a.isCons(t)?ha:await(async t=>a.asJsBool(await a.t(ut.f(t)))?ha:a.asCons(t).tail)(await a.t(dt.f(t,Ct.get()))))),a.d("shen.typextable",a.l((t,s)=>a.isCons(t)&&a.isCons(t.tail)&&O===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&a.isCons(s)?a.asJsBool(a.t(Oa.f(a.asCons(t).head)))?a.b(ft.f,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.asCons(s).tail):a.r([a.r([a.asCons(s).head],a.asCons(t).head)],a.t(ft.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.asCons(s).tail))):null)),a.d("shen.assign-types",a.l(async(t,s,n)=>a.isCons(n)&&Pa===n.head&&a.isCons(n.tail)&&a.isCons(a.asCons(n.tail).tail)&&a.isCons(a.asCons(a.asCons(n.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(n.tail).tail).tail).tail?a.r([Pa,a.asCons(a.asCons(n).tail).head,await a.t(ct.f(t,s,a.asCons(a.asCons(a.asCons(n).tail).tail).head)),await a.t(ct.f(a.r([a.asCons(a.asCons(n).tail).head],t),s,a.asCons(a.asCons(a.asCons(a.asCons(n).tail).tail).tail).head))]):a.isCons(n)&&Ea===n.head&&a.isCons(n.tail)&&a.isCons(a.asCons(n.tail).tail)&&null===a.asCons(a.asCons(n.tail).tail).tail?a.r([Ea,a.asCons(a.asCons(n).tail).head,await a.t(ct.f(a.r([a.asCons(a.asCons(n).tail).head],t),s,a.asCons(a.asCons(a.asCons(n).tail).tail).head))]):a.isCons(n)&&bt===n.head?a.r([bt],await a.t(T.f(a.l(async n=>a.r([await a.t(ct.f(t,s,a.asCons(n).head)),await a.t(ct.f(t,s,a.asCons(a.asCons(n).tail).head))])),a.asCons(n).tail))):a.isCons(n)?await(async i=>a.r([n.head],await a.t(T.f(a.l(async n=>a.b(ct.f,t,await a.t(Ra.f(s,i)),n)),n.tail))))(await a.t(ft.f(await a.t(wt.f(n.head)),n.tail))):await(async s=>a.isCons(s)?a.r([pt,n,s.tail]):a.asJsBool(await a.t(m.f(n,t)))?n:a.b(mt.f,n))(await a.t(dt.f(n,s))))),a.d("shen.atom-type",a.l(async t=>a.isString(t)?a.r([pt,t,gt]):a.isNumber(t)?a.r([pt,t,St]):a.asJsBool(await a.t(vt.f(t)))?a.r([pt,t,_t]):a.asJsBool(await a.t(b.f(t)))?a.r([pt,t,Bt]):t)),a.d("shen.store-arity",a.l((t,s)=>a.asJsBool(ca.get())?ha:a.b(ya.f,t,xt,s,v.get()))),a.d("shen.reduce",a.l(async t=>(qt.set(null),await(async t=>a.r([a.r([Nt,kt],await a.t(Jt.f(qt.get()))),t]))(await a.t(jt.f(t)))))),a.d("shen.reduce_help",a.l(async t=>a.isCons(t)&&a.isCons(t.head)&&tt===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&Z===a.asCons(a.asCons(a.asCons(t.head).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail).tail&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?(await a.t(Ot.f(a.r([At],a.asCons(t).tail))),await(async s=>await(async t=>a.b(jt.f,t))(a.r([a.r([s,a.r([Et],a.asCons(t).tail)]),a.r([Pt],a.asCons(t).tail)])))(a.r([tt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).head,a.r([tt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).tail).head,await a.t(Tt.f(a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).head).tail).head,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head))])]))):a.isCons(t)&&a.isCons(t.head)&&tt===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&Y===a.asCons(a.asCons(a.asCons(t.head).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail).tail&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?(await a.t(Ot.f(a.r([It],a.asCons(t).tail))),await(async s=>await(async t=>a.b(jt.f,t))(a.r([a.r([s,a.r([Lt],a.asCons(t).tail)]),a.r([Ft],a.asCons(t).tail)])))(a.r([tt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).head,a.r([tt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).tail).head,await a.t(Tt.f(a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).head).tail).head,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head))])]))):a.isCons(t)&&a.isCons(t.head)&&tt===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&H===a.asCons(a.asCons(a.asCons(t.head).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail).tail&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?(await a.t(Ot.f(a.r([Dt],a.asCons(t).tail))),await(async s=>await(async t=>a.b(jt.f,t))(a.r([a.r([s,a.r([Mt],a.asCons(t).tail)]),a.r([Rt],a.asCons(t).tail)])))(a.r([tt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).head,a.r([tt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).tail).head,await a.t(Tt.f(a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).head).tail).head,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head))])]))):a.isCons(t)&&a.isCons(t.head)&&tt===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&aa===a.asCons(a.asCons(a.asCons(t.head).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail).tail&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?(await a.t(Ot.f(a.r([$t],a.asCons(t).tail))),await(async s=>await(async t=>a.b(jt.f,t))(a.r([a.r([s,a.r([zt,a.asCons(a.asCons(t).tail).head,0])]),a.r([Ut],a.asCons(t).tail)])))(a.r([tt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).head,a.r([tt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).tail).head,await a.t(Tt.f(a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).head).tail).head,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head))])]))):a.isCons(t)&&a.isCons(t.head)&&tt===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(Vt.f,t):a.isCons(t)&&a.isCons(t.head)&&tt===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&!a.asJsBool(await a.t(Oa.f(a.asCons(a.asCons(t.head).tail).head)))?(await a.t(Ot.f(a.r([$a,a.asCons(a.asCons(a.asCons(t).head).tail).head],a.asCons(t).tail))),a.b(jt.f,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head)):a.isCons(t)&&a.isCons(t.head)&&tt===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(jt.f,await a.t(Tt.f(a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).head).tail).head,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head))):a.isCons(t)&&M===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?(await a.t(Ot.f(a.asCons(a.asCons(t).tail).head)),a.b(jt.f,a.asCons(a.asCons(a.asCons(t).tail).tail).head)):a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?await(async s=>a.equate(a.asCons(t).head,s)?t:a.b(jt.f,a.r([s],a.asCons(t).tail)))(await a.t(jt.f(a.asCons(t).head))):t)),a.d("shen.+string?",a.l(t=>""===t?U:a.asShenBool(a.isString(t)))),a.d("shen.+vector?",a.l(t=>a.asShenBool(a.isArray(t)&&a.asNumber(a.t(Wt.f(t,0)))>0))),a.d("shen.ebr",a.l(async(t,s,n)=>a.equate(n,s)?t:a.isCons(n)&&Ea===n.head&&a.isCons(n.tail)&&a.isCons(a.asCons(n.tail).tail)&&null===a.asCons(a.asCons(n.tail).tail).tail&&a.asJsBool(await a.t(Kt.f(a.asCons(n.tail).head,s)))?n:a.isCons(n)&&Pa===n.head&&a.isCons(n.tail)&&a.isCons(a.asCons(n.tail).tail)&&a.isCons(a.asCons(a.asCons(n.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(n.tail).tail).tail).tail&&a.asJsBool(await a.t(Kt.f(a.asCons(n.tail).head,s)))?a.r([Pa,a.asCons(a.asCons(n).tail).head,await a.t(Tt.f(t,s,a.asCons(a.asCons(a.asCons(n).tail).tail).head))],a.asCons(a.asCons(a.asCons(n).tail).tail).tail):a.isCons(n)?a.r([await a.t(Tt.f(t,s,n.head))],await a.t(Tt.f(t,s,n.tail))):n)),a.d("shen.clash?",a.l((t,s)=>a.equate(s,t)?V:a.isCons(s)?a.asShenBool(a.asJsBool(a.t(Kt.f(t,s.head)))||a.asJsBool(a.t(Kt.f(t,s.tail)))):U)),a.d("shen.add_test",a.l(t=>qt.set(a.r([t],qt.get())))),a.d("shen.cond-expression",a.l(async(t,s,n)=>await(async s=>await(async s=>await(async t=>a.b(Qt.f,t))(await a.t(Xt.f(s,t))))(await a.t(Yt.f(n,s))))(await a.t(Gt.f(t))))),a.d("shen.cond-form",a.l(t=>a.isCons(t)&&a.isCons(t.head)&&V===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&null===a.asCons(a.asCons(t.head).tail).tail?a.asCons(a.asCons(a.asCons(t).head).tail).head:a.r([bt],t))),a.d("shen.encode-choices",a.l(async(t,s)=>null===t?null:a.isCons(t)&&a.isCons(t.head)&&V===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&z===a.asCons(a.asCons(a.asCons(t.head).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail&&null===a.asCons(a.asCons(t.head).tail).tail&&null===t.tail?a.r([a.r([V,a.r([Pa,Zt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).head,a.r([Ht,a.r([$a,Zt,a.r([as])]),a.asJsBool(ca.get())?a.r([ts,s]):a.r([ss,s]),Zt])])])]):a.isCons(t)&&a.isCons(t.head)&&V===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&z===a.asCons(a.asCons(a.asCons(t.head).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail&&null===a.asCons(a.asCons(t.head).tail).tail?a.r([a.r([V,a.r([Pa,Zt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).head,a.r([Ht,a.r([$a,Zt,a.r([as])]),await a.t(Qt.f(await a.t(Xt.f(a.asCons(t).tail,s)))),Zt])])])]):a.isCons(t)&&a.isCons(t.head)&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&z===a.asCons(a.asCons(a.asCons(t.head).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail&&null===a.asCons(a.asCons(t.head).tail).tail?a.r([a.r([V,a.r([Pa,ns,a.r([is,await a.t(Qt.f(await a.t(Xt.f(a.asCons(t).tail,s))))]),a.r([Ht,a.asCons(a.asCons(t).head).head,a.r([Pa,Zt,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).head,a.r([Ht,a.r([$a,Zt,a.r([as])]),a.r([es,ns]),Zt])]),a.r([es,ns])])])])]):a.isCons(t)&&a.isCons(t.head)&&a.isCons(a.asCons(t.head).tail)&&null===a.asCons(a.asCons(t.head).tail).tail?a.r([a.asCons(t).head],await a.t(Xt.f(a.asCons(t).tail,s))):a.b(Na.f,os))),a.d("shen.case-form",a.l(async(t,s)=>null===t?a.r([s]):a.isCons(t)&&a.isCons(t.head)&&a.isCons(a.asCons(t.head).head)&&Nt===a.asCons(a.asCons(t.head).head).head&&a.isCons(a.asCons(a.asCons(t.head).head).tail)&&kt===a.asCons(a.asCons(a.asCons(t.head).head).tail).head&&null===a.asCons(a.asCons(a.asCons(t.head).head).tail).tail&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&z===a.asCons(a.asCons(a.asCons(t.head).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail&&null===a.asCons(a.asCons(t.head).tail).tail?a.r([a.r([V],a.asCons(a.asCons(t).head).tail)],await a.t(Yt.f(a.asCons(t).tail,s))):a.isCons(t)&&a.isCons(t.head)&&a.isCons(a.asCons(t.head).head)&&Nt===a.asCons(a.asCons(t.head).head).head&&a.isCons(a.asCons(a.asCons(t.head).head).tail)&&kt===a.asCons(a.asCons(a.asCons(t.head).head).tail).head&&null===a.asCons(a.asCons(a.asCons(t.head).head).tail).tail&&a.isCons(a.asCons(t.head).tail)&&null===a.asCons(a.asCons(t.head).tail).tail?a.r([a.r([V],a.asCons(a.asCons(t).head).tail)]):a.isCons(t)&&a.isCons(t.head)&&a.isCons(a.asCons(t.head).head)&&Nt===a.asCons(a.asCons(t.head).head).head&&a.isCons(a.asCons(a.asCons(t.head).head).tail)&&kt===a.asCons(a.asCons(a.asCons(t.head).head).tail).head&&a.isCons(a.asCons(t.head).tail)&&null===a.asCons(a.asCons(t.head).tail).tail?a.r([a.r([await a.t(ls.f(a.asCons(a.asCons(a.asCons(a.asCons(t).head).head).tail).tail))],a.asCons(a.asCons(t).head).tail)],await a.t(Yt.f(a.asCons(t).tail,s))):a.b(Na.f,rs))),a.d("shen.embed-and",a.l(async t=>a.isCons(t)&&null===t.tail?a.asCons(t).head:a.isCons(t)?a.r([fs,t.head,await a.t(ls.f(t.tail))]):a.b(Na.f,ws))),a.d("shen.err-condition",a.l(t=>a.r([V,a.r([ss,t])]))),a.d("shen.sys-error",a.l(async t=>a.raise("system function "+a.asString(await a.t(e.f(t,": unexpected argument\n",l)))))),a.d("shen.initialise_arity_table",a.l(async t=>null===t?null:a.isCons(t)&&a.isCons(t.tail)?await(async s=>a.b(cs.f,a.asCons(a.asCons(t).tail).tail))(await a.t(ya.f(a.asCons(t).head,xt,a.asCons(a.asCons(t).tail).head,v.get()))):a.b(Na.f,hs))),a.d("arity",a.l(async t=>await(async()=>{try{return await a.t(g.f(t,xt,v.get()))}catch(a){return-1}})())),a.d("systemf",a.l(async t=>await(async s=>await(async n=>await(async a=>t)(await a.t(ya.f(s,S,await a.t(ys.f(t,n)),v.get()))))(await a.t(g.f(s,S,v.get()))))(a.symbolOf("shen")))),a.d("adjoin",a.l(async(t,s)=>a.asJsBool(await a.t(m.f(t,s)))?s:a.r([t],s))),a.d("shen.lambda-form-entry",a.l(async t=>ds===t?null:Cs===t?null:await(async s=>-1===s?null:0===s?null:a.r([a.r([t],await a.t(Ba.f(await a.t(xa.f(t,s)))))]))(await a.t(Ka.f(t))))),a.d("shen.lambda-form",a.l(async(t,s)=>0===s?t:await(async n=>a.r([Ea,n,await a.t(xa.f(await a.t(us.f(t,n)),a.asNumber(s)-1))]))(await a.t(oa.f(nt))))),a.d("shen.add-end",a.l(async(t,s)=>a.isCons(t)?a.b(Ra.f,t,a.r([s])):a.r([t,s]))),a.d("shen.set-lambda-form-entry",a.l(async t=>a.isCons(t)?a.b(ya.f,t.head,_a,t.tail,v.get()):a.b(Na.f,bs))),a.d("specialise",a.l(t=>(ps.set(a.r([t],ps.get())),t))),a.d("unspecialise",a.l(async t=>(ps.set(await a.t(ms.f(t,ps.get()))),t))),a.d("shen.dict",a.l(async t=>a.asNumber(t)<1?a.raise("invalid initial dict size: "+a.asString(await a.t(e.f(t,"",gs)))):await(async s=>await(async n=>await(async n=>await(async n=>await(async a=>s)(await a.t(Bs.f(s,3,2+a.asNumber(t),null))))(vs.f(s,2,0)))(vs.f(s,1,t)))(vs.f(s,0,_s)))(Ss.f(3+a.asNumber(t))))),a.d("shen.dict?",a.l(async t=>a.asShenBool(a.isArray(t)&&await(async()=>{try{return await a.t(Wt.f(t,0))}catch(a){return xs}})()===_s))),a.d("shen.dict-capacity",a.l(t=>a.b(Wt.f,t,1))),a.d("shen.dict-count",a.l(t=>a.b(Wt.f,t,2))),a.d("shen.dict-count->",a.l((a,t)=>vs.f(a,2,t))),a.d("shen.<-dict-bucket",a.l((t,s)=>a.b(Wt.f,t,3+a.asNumber(s)))),a.d("shen.dict-bucket->",a.l((t,s,n)=>vs.f(t,3+a.asNumber(s),n))),a.d("shen.dict-update-count",a.l(async(t,s,n)=>await(async s=>a.b(qs.f,t,a.asNumber(s)+a.asNumber(await a.t(js.f(t)))))(a.asNumber(await a.t(Ga.f(n)))-a.asNumber(await a.t(Ga.f(s)))))),a.d("shen.dict->",a.l(async(t,s,n)=>await(async i=>await(async e=>await(async s=>await(async i=>await(async a=>n)(await a.t(Ts.f(t,e,s))))(await a.t(As.f(t,i,s))))(await a.t(Os.f(s,n,e))))(await a.t(ks.f(t,i))))(await a.t(Js.f(s,await a.t(Ns.f(t))))))),a.d("shen.<-dict",a.l(async(t,s)=>await(async n=>await(async t=>await(async t=>a.asJsBool(await a.t(ut.f(t)))?a.raise("value "+a.asString(await a.t(e.f(s," not found in dict\n",l)))):a.asCons(t).tail)(await a.t(dt.f(s,t))))(await a.t(ks.f(t,n))))(await a.t(Js.f(s,await a.t(Ns.f(t))))))),a.d("shen.dict-rm",a.l(async(t,s)=>await(async n=>await(async i=>await(async e=>await(async n=>await(async a=>s)(await a.t(Ts.f(t,i,e))))(await a.t(As.f(t,n,e))))(await a.t(Es.f(s,i))))(await a.t(ks.f(t,n))))(await a.t(Js.f(s,await a.t(Ns.f(t))))))),a.d("shen.dict-fold",a.l(async(t,s,n)=>await(async i=>a.b(Ps.f,t,s,n,0,i))(await a.t(Ns.f(s))))),a.d("shen.dict-fold-h",a.l(async(t,s,n,i,e)=>a.equate(e,i)?n:await(async o=>await(async n=>a.b(Ps.f,t,s,n,1+a.asNumber(i),e))(await a.t(Is.f(t,o,n))))(await a.t(ks.f(s,i))))),a.d("shen.bucket-fold",a.l(async(t,s,n)=>null===s?n:a.isCons(s)&&a.isCons(s.head)?a.b(t,a.asCons(a.asCons(s).head).head,a.asCons(a.asCons(s).head).tail,await a.t(Is.f(t,a.asCons(s).tail,n))):a.b(Na.f,Ls))),a.d("shen.dict-keys",a.l(async t=>a.b(Fs.f,a.l(async(t,s,n)=>a.r([t],n)),t,null))),a.d("shen.dict-values",a.l(async t=>a.b(Fs.f,a.l(async(t,s,n)=>a.r([s],n)),t,null))),a.d("shen.initialise-environment",a.l(async()=>(ca.set(U),Ds.set(null),Ms.set(U),v.set(await a.t(Rs.f(2e4))),$s.set(0),zs.set(await a.t(Us.f(1e4))),Vs.set(await a.t(Us.f(1e4))),Ws.set(a.l(async a=>a)),W.set(a.l(async(t,s)=>a.b(Ks.f,s))),K.set(a.l(async a=>a)),Gs.set(a.r([Ys,Xs,Qs,Zs,Hs,an,tn,sn,nn,en,on,ln,rn,fn,wn,cn,hn,yn])),dn.set(a.r([a.l(async t=>a.b(Cn.f,t)),a.l(async t=>a.b(un.f,t)),a.l(async t=>a.b(bn.f,t)),a.l(async t=>a.b(pn.f,t)),a.l(async t=>a.b(mn.f,t)),a.l(async t=>a.b(gn.f,t)),a.l(async t=>a.b(Sn.f,t)),a.l(async t=>a.b(vn.f,t)),a.l(async t=>a.b(_n.f,t)),a.l(async t=>a.b(Bn.f,t)),a.l(async t=>a.b(xn.f,t)),a.l(async t=>a.b(qn.f,t)),a.l(async t=>a.b(jn.f,t)),a.l(async t=>a.b(Jn.f,t)),a.l(async t=>a.b(Nn.f,t)),a.l(async t=>a.b(kn.f,t)),a.l(async t=>a.b(On.f,t)),a.l(async t=>a.b(An.f,t))])),Tn.set(0),En.set(null),Pn.set(a.r([In,Ln,Fn,Dn,Mn,Rn,$n,zn,Un,Vn,Wn,Kn,Gn,Yn,Xn,Qn,Zn,Hn,ai,ti,si,nt,ni,ii,ei,oi])),ps.set(a.r([Y,aa,H,Z,Ea,Pa,M,li,ri])),fi.set(a.r([wi,ci,hi,yi,di,Ci])),ui.set(U),bi.set(null),pi.set(null),mi.set(V),gi.set(null),Si.set(null),vi.set(128),_i.set(V),Bi.set(1e6),xi.set(20),qi.set(0),ji.set(0),Ji.set(0),Ni.set(U),rt.set(U),ki.set("Shen 22.3"),a.asJsBool(await a.t(Oi.f(Ai)))||Ti.set(""),a.asJsBool(await a.t(Oi.f(Ei)))||Pi.set(Ii.get()),await a.t(cs.f(a.r([Li,0,Fi,1,Di,1,Mi,2,fs,2,Ri,2,xt,1,$i,2,zi,1,Ui,1,Vi,1,Wi,1,Ki,3,Gi,2,Z,2,At,1,Yi,2,Xi,2,Qi,1,Zi,2,Hi,2,ae,2,te,1,se,1,ne,1,ie,2,ee,1,oe,1,le,1,re,1,fe,2,as,0,we,2,ce,5,is,1,Lt,1,he,1,ye,3,de,1,Ce,3,ue,2,be,2,pe,2,me,2,$a,2,ge,2,Et,1,Mt,1,Se,1,ve,1,Ht,3,_e,1,Be,1,xe,4,qe,0,je,1,hi,2,Je,0,Ne,2,ke,1,Oe,0,Ae,0,Te,0,Ee,1,Pe,1,Ie,1,Le,1,Fe,2,De,2,ta,1,Me,1,Re,2,$e,2,ze,1,Ue,1,Ve,1,We,2,Ke,1,Ge,1,Ye,1,Xe,2,Ye,1,ri,2,Qe,1,Ze,2,He,0,ds,3,ao,1,to,0,so,0,zt,2,no,1,io,1,eo,1,oo,2,lo,1,ro,1,fo,1,Ta,1,Ce,3,wo,4,co,2,ho,1,yo,1,Co,1,uo,1,bo,1,po,1,Cs,1,mo,0,go,2,So,3,vo,1,li,2,_o,1,Ft,1,Bo,1,xo,1,qo,1,jo,0,Jo,0,No,0,ko,1,Oo,1,Ao,1,To,1,Eo,3,Po,1,Io,1,Lo,1,Fo,1,Pt,1,Do,1,Mo,0,es,1,Ut,1,Ro,1,$o,2,It,1,pt,2,zo,3,Uo,1,Vo,3,Wo,1,Ko,4,Go,4,Yo,2,Xo,1,Qo,1,Uo,1,ta,1,Zo,1,Ho,3,al,1,tl,1,sl,0,nl,2,il,2,el,1,ol,2,A,2,ll,2,rl,2,fl,2,wl,1,cl,1,Y,2,H,2,aa,2,ro,1,hl,1,fo,1,yl,1]))),await a.t(ya.f(a.symbolOf("shen"),S,a.r([dl,x,_,O,Cl,ul,Nt,bl,rl,$a,ea,pl,ml,gl,Sl,vl,Ei,Ai,_l,Bl,xl,ql,jl,Jl,Nl,kl,Ol,H,Y,aa,$,F,wl,cl,fl,$a,me,pe,tt,Al,Tl,rl,ll,A,ol,De,Fe,El,el,il,nl,M,Pl,Il,sl,Ll,tl,al,Ho,be,ta,Zo,Qo,Xo,Fl,Dl,Yo,Ko,Go,Vo,Wo,Uo,zo,pt,It,V,$o,Ro,Ml,es,Mo,Do,Pt,Ut,Rt,Fo,Lo,Rl,Bt,Io,Oo,Po,Eo,Ao,ko,$l,gt,jo,No,Jo,qo,xo,Bo,Ft,_o,li,zl,To,Ul,vo,go,mo,uo,Cs,yo,Co,ho,bo,po,ao,wo,ro,fo,lo,Vl,Ta,eo,io,no,oo,zt,so,to,ds,Wl,Kl,He,Ze,Qe,ri,Xe,Ye,Ke,Ge,St,Gl,We,Ve,Ue,Yl,Me,ze,$e,Re,Xl,Le,Ql,Zl,Ie,Pe,Ee,Pa,Hl,Ea,Te,Ae,ar,Ne,qe,Be,_e,je,hi,hl,yl,Oe,tr,ke,Je,Ht,xe,ve,Et,Mt,Se,ge,ye,de,he,sr,Lt,is,we,nr,as,fe,ir,ce,U,se,le,re,er,oe,ee,ne,or,te,ae,Hi,Zi,Qi,ht,wi,Ci,yi,lr,Xi,rr,fr,Yi,At,Z,bt,Gi,Ki,Vi,wr,cr,Wi,hr,Ui,zi,_t,k,$i,xt,Li,Ri,fs,Mi,ue,Ce,Fi,Di]),v.get())),Ds.set(null),yr.set(U),dr.set(Ss.f(0))))),a.d("shen.initialise-signedfuncs",a.l(()=>(Ct.set(null),Ct.set(a.r([a.r([Fi,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([Mi,In,O,a.r([a.r([Zl,In]),O,a.r([Zl,In])])])],Ct.get())),Ct.set(a.r([a.r([fs,_t,O,a.r([_t,O,_t])])],Ct.get())),Ct.set(a.r([a.r([Cr,In,O,a.r([gt,O,a.r([Bt,O,gt])])])],Ct.get())),Ct.set(a.r([a.r([Ri,a.r([Zl,In]),O,a.r([a.r([Zl,In]),O,a.r([Zl,In])])])],Ct.get())),Ct.set(a.r([a.r([xt,In,O,St])],Ct.get())),Ct.set(a.r([a.r([$i,In,O,a.r([a.r([Zl,a.r([Zl,In])]),O,a.r([Zl,In])])])],Ct.get())),Ct.set(a.r([a.r([zi,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([Ui,Bt,O,_t])],Ct.get())),Ct.set(a.r([a.r([Vi,gt,O,gt])],Ct.get())),Ct.set(a.r([a.r([Wi,a.r([$l,In]),O,a.r([Zl,Ln])])],Ct.get())),Ct.set(a.r([a.r([Yi,gt,O,a.r([gt,O,gt])])],Ct.get())),Ct.set(a.r([a.r([Ki,a.r([In,ur,Ln]),O,a.r([In,O,a.r([a.r([In,O,Ln]),O,Ln])])])],Ct.get())),Ct.set(a.r([a.r([At,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([Qi,a.r([In,O,Ln]),O,Bt])],Ct.get())),Ct.set(a.r([a.r([Zi,a.r([Zl,In]),O,a.r([a.r([Zl,In]),O,a.r([Zl,In])])])],Ct.get())),Ct.set(a.r([a.r([Hi,In,O,a.r([Ln,O,Ln])])],Ct.get())),Ct.set(a.r([a.r([wl,a.r([Zl,In]),ur,a.r([Zl,Ln])])],Ct.get())),Ct.set(a.r([a.r([cl,a.r([Zl,In]),ur,a.r([Zl,In])])],Ct.get())),Ct.set(a.r([a.r([ae,In,O,a.r([a.r([Zl,In]),O,_t])])],Ct.get())),Ct.set(a.r([a.r([te,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([se,Bt,O,_t])],Ct.get())),Ct.set(a.r([a.r([re,Bt,O,a.r([Zl,Bt])])],Ct.get())),Ct.set(a.r([a.r([ne,er,O,gt])],Ct.get())),Ct.set(a.r([a.r([le,In,O,a.r([Zl,gt])])],Ct.get())),Ct.set(a.r([a.r([as,O,Bt])],Ct.get())),Ct.set(a.r([a.r([fe,a.r([Bt,O,_t]),O,a.r([Bt,O,Bt])])],Ct.get())),Ct.set(a.r([a.r([we,a.r([In,O,In]),O,a.r([In,O,In])])],Ct.get())),Ct.set(a.r([a.r([is,In,O,a.r([Hl,In])])],Ct.get())),Ct.set(a.r([a.r([Lt,a.r([In,A,Ln]),O,In])],Ct.get())),Ct.set(a.r([a.r([sr,a.r([In,O,Ln]),O,a.r([In,O,Ln])])],Ct.get())),Ct.set(a.r([a.r([he,Bt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([be,a.r([ta,In]),O,a.r([St,O,In])])],Ct.get())),Ct.set(a.r([a.r([Ho,a.r([ta,In]),O,a.r([St,O,a.r([In,O,a.r([ta,In])])])])],Ct.get())),Ct.set(a.r([a.r([ta,St,O,a.r([ta,In])])],Ct.get())),Ct.set(a.r([a.r([de,Bt,O,St])],Ct.get())),Ct.set(a.r([a.r([ge,In,O,a.r([St,O,St])])],Ct.get())),Ct.set(a.r([a.r([ve,a.r([Zl,In]),O,In])],Ct.get())),Ct.set(a.r([a.r([Mt,a.r([ta,In]),O,In])],Ct.get())),Ct.set(a.r([a.r([Se,gt,O,gt])],Ct.get())),Ct.set(a.r([a.r([Ht,_t,O,a.r([In,O,a.r([In,O,In])])])],Ct.get())),Ct.set(a.r([a.r([Oe,O,gt])],Ct.get())),Ct.set(a.r([a.r([Je,O,gt])],Ct.get())),Ct.set(a.r([a.r([hl,a.r([Zl,Bt]),O,a.r([Zl,Bt])])],Ct.get())),Ct.set(a.r([a.r([yl,a.r([Zl,Bt]),O,a.r([Zl,Bt])])],Ct.get())),Ct.set(a.r([a.r([qe,O,St])],Ct.get())),Ct.set(a.r([a.r([br,In,O,a.r([gt,O,gt])])],Ct.get())),Ct.set(a.r([a.r([_e,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([ke,Bt,O,a.r([Zl,Bt])])],Ct.get())),Ct.set(a.r([a.r([Ne,a.r([Zl,In]),O,a.r([a.r([Zl,In]),O,a.r([Zl,In])])])],Ct.get())),Ct.set(a.r([a.r([Ae,O,In])],Ct.get())),Ct.set(a.r([a.r([Te,O,gt])],Ct.get())),Ct.set(a.r([a.r([Ee,a.r([Zl,In]),O,St])],Ct.get())),Ct.set(a.r([a.r([Pe,a.r([ta,In]),O,St])],Ct.get())),Ct.set(a.r([a.r([Le,gt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([Re,a.r([In,O,Ln]),O,a.r([a.r([Zl,In]),O,a.r([Zl,Ln])])])],Ct.get())),Ct.set(a.r([a.r([$e,a.r([In,O,a.r([Zl,Ln])]),O,a.r([a.r([Zl,In]),O,a.r([Zl,Ln])])])],Ct.get())),Ct.set(a.r([a.r([ze,St,O,St])],Ct.get())),Ct.set(a.r([a.r([Ke,St,O,gt])],Ct.get())),Ct.set(a.r([a.r([Ue,St,O,St])],Ct.get())),Ct.set(a.r([a.r([Ve,_t,O,_t])],Ct.get())),Ct.set(a.r([a.r([We,St,O,a.r([a.r([Zl,In]),O,In])])],Ct.get())),Ct.set(a.r([a.r([Ge,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([Xe,In,O,a.r([Ln,O,St])])],Ct.get())),Ct.set(a.r([a.r([Ye,Bt,O,_t])],Ct.get())),Ct.set(a.r([a.r([Qe,Bt,O,_t])],Ct.get())),Ct.set(a.r([a.r([Ze,_t,O,a.r([_t,O,_t])])],Ct.get())),Ct.set(a.r([a.r([He,O,gt])],Ct.get())),Ct.set(a.r([a.r([ao,Bt,O,_t])],Ct.get())),Ct.set(a.r([a.r([to,O,gt])],Ct.get())),Ct.set(a.r([a.r([so,O,gt])],Ct.get())),Ct.set(a.r([a.r([zt,gt,O,a.r([St,O,gt])])],Ct.get())),Ct.set(a.r([a.r([oo,gt,O,a.r([a.r([$l,Kl]),O,gt])])],Ct.get())),Ct.set(a.r([a.r([no,In,O,In])],Ct.get())),Ct.set(a.r([a.r([io,a.r([In,O,Ln]),O,a.r([In,O,Ln])])],Ct.get())),Ct.set(a.r([a.r([ro,a.r([Zl,Bt]),O,a.r([Zl,Bt])])],Ct.get())),Ct.set(a.r([a.r([pr,gt,O,gt])],Ct.get())),Ct.set(a.r([a.r([eo,a.r([In,O,Ln]),O,a.r([a.r([In,O,Ln]),A,St])])],Ct.get())),Ct.set(a.r([a.r([Ta,Bt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([fo,a.r([Zl,Bt]),O,a.r([Zl,Bt])])],Ct.get())),Ct.set(a.r([a.r([mr,gt,O,a.r([a.r([$l,Kl]),O,gt])])],Ct.get())),Ct.set(a.r([a.r([lo,Bt,O,a.r([Zl,Fl])])],Ct.get())),Ct.set(a.r([a.r([uo,a.r([$l,tr]),O,Fl])],Ct.get())),Ct.set(a.r([a.r([bo,a.r([$l,tr]),O,St])],Ct.get())),Ct.set(a.r([a.r([Co,gt,O,a.r([Zl,St])])],Ct.get())),Ct.set(a.r([a.r([ho,gt,O,gt])],Ct.get())),Ct.set(a.r([a.r([yo,gt,O,a.r([Zl,Fl])])],Ct.get())),Ct.set(a.r([a.r([po,gt,O,a.r([Zl,Fl])])],Ct.get())),Ct.set(a.r([a.r([mo,O,gt])],Ct.get())),Ct.set(a.r([a.r([go,In,O,a.r([a.r([Zl,In]),O,a.r([Zl,In])])])],Ct.get())),Ct.set(a.r([a.r([vo,a.r([Zl,In]),O,a.r([Zl,In])])],Ct.get())),Ct.set(a.r([a.r([_o,gt,O,In])],Ct.get())),Ct.set(a.r([a.r([Ft,a.r([In,A,Ln]),O,Ln])],Ct.get())),Ct.set(a.r([a.r([Bo,Bt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([xo,Bt,O,_t])],Ct.get())),Ct.set(a.r([a.r([qo,Bt,O,_t])],Ct.get())),Ct.set(a.r([a.r([jo,O,a.r([$l,tr])])],Ct.get())),Ct.set(a.r([a.r([No,O,a.r([$l,Kl])])],Ct.get())),Ct.set(a.r([a.r([Jo,O,a.r([$l,Kl])])],Ct.get())),Ct.set(a.r([a.r([Ao,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([To,In,O,gt])],Ct.get())),Ct.set(a.r([a.r([ko,gt,O,St])],Ct.get())),Ct.set(a.r([a.r([Oo,gt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([Po,a.r([Zl,St]),O,St])],Ct.get())),Ct.set(a.r([a.r([Io,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([Lo,Bt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([Fo,a.r([Zl,In]),O,a.r([Zl,In])])],Ct.get())),Ct.set(a.r([a.r([Ut,gt,O,gt])],Ct.get())),Ct.set(a.r([a.r([Rt,a.r([ta,In]),O,a.r([ta,In])])],Ct.get())),Ct.set(a.r([a.r([Do,Bt,O,_t])],Ct.get())),Ct.set(a.r([a.r([Mo,O,_t])],Ct.get())),Ct.set(a.r([a.r([es,a.r([Hl,In]),O,In])],Ct.get())),Ct.set(a.r([a.r([Ro,Bt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([$o,In,O,a.r([a.r([er,O,In]),O,In])])],Ct.get())),Ct.set(a.r([a.r([It,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([Uo,Bt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([Yo,a.r([Zl,In]),O,a.r([a.r([Zl,In]),O,a.r([Zl,In])])])],Ct.get())),Ct.set(a.r([a.r([Wo,a.r([In,O,Ln]),O,a.r([In,O,Ln])])],Ct.get())),Ct.set(a.r([a.r([Xo,Bt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([Qo,Bt,O,Bt])],Ct.get())),Ct.set(a.r([a.r([tl,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([Zo,In,O,_t])],Ct.get())),Ct.set(a.r([a.r([sl,O,gt])],Ct.get())),Ct.set(a.r([a.r([il,gt,O,a.r([In,O,In])])],Ct.get())),Ct.set(a.r([a.r([nl,St,O,a.r([a.r([$l,Kl]),O,St])])],Ct.get())),Ct.set(a.r([a.r([el,gt,O,_t])],Ct.get())),Ct.set(a.r([a.r([pe,St,O,a.r([St,O,_t])])],Ct.get())),Ct.set(a.r([a.r([Fe,St,O,a.r([St,O,_t])])],Ct.get())),Ct.set(a.r([a.r([me,St,O,a.r([St,O,_t])])],Ct.get())),Ct.set(a.r([a.r([De,St,O,a.r([St,O,_t])])],Ct.get())),Ct.set(a.r([a.r([$a,In,O,a.r([In,O,_t])])],Ct.get())),Ct.set(a.r([a.r([ol,St,O,a.r([St,O,St])])],Ct.get())),Ct.set(a.r([a.r([ll,St,O,a.r([St,O,St])])],Ct.get())),Ct.set(a.r([a.r([rl,St,O,a.r([St,O,St])])],Ct.get())),Ct.set(a.r([a.r([A,St,O,a.r([St,O,St])])],Ct.get())),Ct.set(a.r([a.r([fl,In,O,a.r([Ln,O,_t])])],Ct.get()))))),a.d("shen.initialise-signedfunc-lambda-forms",a.l(async()=>(await a.t(gr.f(a.r([vr],a.l(async(t,s,n)=>a.b(Sr.f,t,s,n))))),await a.t(gr.f(a.r([Br],a.l(async(t,s,n)=>a.b(_r.f,t,s,n))))),await a.t(gr.f(a.r([qr],a.l(async(t,s,n)=>a.b(xr.f,t,s,n))))),await a.t(gr.f(a.r([Jr],a.l(async(t,s,n)=>a.b(jr.f,t,s,n))))),await a.t(gr.f(a.r([kr],a.l(async(t,s,n)=>a.b(Nr.f,t,s,n))))),await a.t(gr.f(a.r([Ar],a.l(async(t,s,n)=>a.b(Or.f,t,s,n))))),await a.t(gr.f(a.r([Er],a.l(async(t,s,n)=>a.b(Tr.f,t,s,n))))),await a.t(gr.f(a.r([Ir],a.l(async(t,s,n)=>a.b(Pr.f,t,s,n))))),await a.t(gr.f(a.r([Fr],a.l(async(t,s,n)=>a.b(Lr.f,t,s,n))))),await a.t(gr.f(a.r([Mr],a.l(async(t,s,n)=>a.b(Dr.f,t,s,n))))),await a.t(gr.f(a.r([$r],a.l(async(t,s,n)=>a.b(Rr.f,t,s,n))))),await a.t(gr.f(a.r([Ur],a.l(async(t,s,n)=>a.b(zr.f,t,s,n))))),await a.t(gr.f(a.r([Wr],a.l(async(t,s,n)=>a.b(Vr.f,t,s,n))))),await a.t(gr.f(a.r([Gr],a.l(async(t,s,n)=>a.b(Kr.f,t,s,n))))),await a.t(gr.f(a.r([Xr],a.l(async(t,s,n)=>a.b(Yr.f,t,s,n))))),await a.t(gr.f(a.r([Zr],a.l(async(t,s,n)=>a.b(Qr.f,t,s,n))))),await a.t(gr.f(a.r([af],a.l(async(t,s,n)=>a.b(Hr.f,t,s,n))))),await a.t(gr.f(a.r([sf],a.l(async(t,s,n)=>a.b(tf.f,t,s,n))))),await a.t(gr.f(a.r([ef],a.l(async(t,s,n)=>a.b(nf.f,t,s,n))))),await a.t(gr.f(a.r([lf],a.l(async(t,s,n)=>a.b(of.f,t,s,n))))),await a.t(gr.f(a.r([ff],a.l(async(t,s,n)=>a.b(rf.f,t,s,n))))),await a.t(gr.f(a.r([cf],a.l(async(t,s,n)=>a.b(wf.f,t,s,n))))),await a.t(gr.f(a.r([yf],a.l(async(t,s,n)=>a.b(hf.f,t,s,n))))),await a.t(gr.f(a.r([Cf],a.l(async(t,s,n)=>a.b(df.f,t,s,n))))),await a.t(gr.f(a.r([bf],a.l(async(t,s,n)=>a.b(uf.f,t,s,n))))),await a.t(gr.f(a.r([mf],a.l(async(t,s,n)=>a.b(pf.f,t,s,n))))),await a.t(gr.f(a.r([Sf],a.l(async(t,s,n)=>a.b(gf.f,t,s,n))))),await a.t(gr.f(a.r([_f],a.l(async(t,s,n)=>a.b(vf.f,t,s,n))))),await a.t(gr.f(a.r([xf],a.l(async(t,s,n)=>a.b(Bf.f,t,s,n))))),await a.t(gr.f(a.r([jf],a.l(async(t,s,n)=>a.b(qf.f,t,s,n))))),await a.t(gr.f(a.r([Nf],a.l(async(t,s,n)=>a.b(Jf.f,t,s,n))))),await a.t(gr.f(a.r([Of],a.l(async(t,s,n)=>a.b(kf.f,t,s,n))))),await a.t(gr.f(a.r([Tf],a.l(async(t,s,n)=>a.b(Af.f,t,s,n))))),await a.t(gr.f(a.r([Pf],a.l(async(t,s,n)=>a.b(Ef.f,t,s,n))))),await a.t(gr.f(a.r([Lf],a.l(async(t,s,n)=>a.b(If.f,t,s,n))))),await a.t(gr.f(a.r([Df],a.l(async(t,s,n)=>a.b(Ff.f,t,s,n))))),await a.t(gr.f(a.r([Rf],a.l(async(t,s,n)=>a.b(Mf.f,t,s,n))))),await a.t(gr.f(a.r([zf],a.l(async(t,s,n)=>a.b($f.f,t,s,n))))),await a.t(gr.f(a.r([Vf],a.l(async(t,s,n)=>a.b(Uf.f,t,s,n))))),await a.t(gr.f(a.r([Kf],a.l(async(t,s,n)=>a.b(Wf.f,t,s,n))))),await a.t(gr.f(a.r([Yf],a.l(async(t,s,n)=>a.b(Gf.f,t,s,n))))),await a.t(gr.f(a.r([Qf],a.l(async(t,s,n)=>a.b(Xf.f,t,s,n))))),await a.t(gr.f(a.r([Hf],a.l(async(t,s,n)=>a.b(Zf.f,t,s,n))))),await a.t(gr.f(a.r([tw],a.l(async(t,s,n)=>a.b(aw.f,t,s,n))))),await a.t(gr.f(a.r([nw],a.l(async(t,s,n)=>a.b(sw.f,t,s,n))))),await a.t(gr.f(a.r([ew],a.l(async(t,s,n)=>a.b(iw.f,t,s,n))))),await a.t(gr.f(a.r([lw],a.l(async(t,s,n)=>a.b(ow.f,t,s,n))))),await a.t(gr.f(a.r([fw],a.l(async(t,s,n)=>a.b(rw.f,t,s,n))))),await a.t(gr.f(a.r([cw],a.l(async(t,s,n)=>a.b(ww.f,t,s,n))))),await a.t(gr.f(a.r([yw],a.l(async(t,s,n)=>a.b(hw.f,t,s,n))))),await a.t(gr.f(a.r([Cw],a.l(async(t,s,n)=>a.b(dw.f,t,s,n))))),await a.t(gr.f(a.r([bw],a.l(async(t,s,n)=>a.b(uw.f,t,s,n))))),await a.t(gr.f(a.r([mw],a.l(async(t,s,n)=>a.b(pw.f,t,s,n))))),await a.t(gr.f(a.r([Sw],a.l(async(t,s,n)=>a.b(gw.f,t,s,n))))),await a.t(gr.f(a.r([_w],a.l(async(t,s,n)=>a.b(vw.f,t,s,n))))),await a.t(gr.f(a.r([xw],a.l(async(t,s,n)=>a.b(Bw.f,t,s,n))))),await a.t(gr.f(a.r([jw],a.l(async(t,s,n)=>a.b(qw.f,t,s,n))))),await a.t(gr.f(a.r([Nw],a.l(async(t,s,n)=>a.b(Jw.f,t,s,n))))),await a.t(gr.f(a.r([Ow],a.l(async(t,s,n)=>a.b(kw.f,t,s,n))))),await a.t(gr.f(a.r([Tw],a.l(async(t,s,n)=>a.b(Aw.f,t,s,n))))),await a.t(gr.f(a.r([Pw],a.l(async(t,s,n)=>a.b(Ew.f,t,s,n))))),await a.t(gr.f(a.r([Lw],a.l(async(t,s,n)=>a.b(Iw.f,t,s,n))))),await a.t(gr.f(a.r([Dw],a.l(async(t,s,n)=>a.b(Fw.f,t,s,n))))),await a.t(gr.f(a.r([Rw],a.l(async(t,s,n)=>a.b(Mw.f,t,s,n))))),await a.t(gr.f(a.r([zw],a.l(async(t,s,n)=>a.b($w.f,t,s,n))))),await a.t(gr.f(a.r([Vw],a.l(async(t,s,n)=>a.b(Uw.f,t,s,n))))),await a.t(gr.f(a.r([Kw],a.l(async(t,s,n)=>a.b(Ww.f,t,s,n))))),await a.t(gr.f(a.r([Yw],a.l(async(t,s,n)=>a.b(Gw.f,t,s,n))))),await a.t(gr.f(a.r([Qw],a.l(async(t,s,n)=>a.b(Xw.f,t,s,n))))),await a.t(gr.f(a.r([Hw],a.l(async(t,s,n)=>a.b(Zw.f,t,s,n))))),await a.t(gr.f(a.r([tc],a.l(async(t,s,n)=>a.b(ac.f,t,s,n))))),await a.t(gr.f(a.r([nc],a.l(async(t,s,n)=>a.b(sc.f,t,s,n))))),await a.t(gr.f(a.r([ec],a.l(async(t,s,n)=>a.b(ic.f,t,s,n))))),await a.t(gr.f(a.r([lc],a.l(async(t,s,n)=>a.b(oc.f,t,s,n))))),await a.t(gr.f(a.r([fc],a.l(async(t,s,n)=>a.b(rc.f,t,s,n))))),await a.t(gr.f(a.r([cc],a.l(async(t,s,n)=>a.b(wc.f,t,s,n))))),await a.t(gr.f(a.r([yc],a.l(async(t,s,n)=>a.b(hc.f,t,s,n))))),await a.t(gr.f(a.r([Cc],a.l(async(t,s,n)=>a.b(dc.f,t,s,n))))),await a.t(gr.f(a.r([bc],a.l(async(t,s,n)=>a.b(uc.f,t,s,n))))),await a.t(gr.f(a.r([mc],a.l(async(t,s,n)=>a.b(pc.f,t,s,n))))),await a.t(gr.f(a.r([Sc],a.l(async(t,s,n)=>a.b(gc.f,t,s,n))))),await a.t(gr.f(a.r([_c],a.l(async(t,s,n)=>a.b(vc.f,t,s,n))))),await a.t(gr.f(a.r([xc],a.l(async(t,s,n)=>a.b(Bc.f,t,s,n))))),await a.t(gr.f(a.r([jc],a.l(async(t,s,n)=>a.b(qc.f,t,s,n))))),await a.t(gr.f(a.r([Nc],a.l(async(t,s,n)=>a.b(Jc.f,t,s,n))))),await a.t(gr.f(a.r([Oc],a.l(async(t,s,n)=>a.b(kc.f,t,s,n))))),await a.t(gr.f(a.r([Tc],a.l(async(t,s,n)=>a.b(Ac.f,t,s,n))))),await a.t(gr.f(a.r([Pc],a.l(async(t,s,n)=>a.b(Ec.f,t,s,n))))),await a.t(gr.f(a.r([Lc],a.l(async(t,s,n)=>a.b(Ic.f,t,s,n))))),await a.t(gr.f(a.r([Dc],a.l(async(t,s,n)=>a.b(Fc.f,t,s,n))))),await a.t(gr.f(a.r([Rc],a.l(async(t,s,n)=>a.b(Mc.f,t,s,n))))),await a.t(gr.f(a.r([zc],a.l(async(t,s,n)=>a.b($c.f,t,s,n))))),await a.t(gr.f(a.r([Vc],a.l(async(t,s,n)=>a.b(Uc.f,t,s,n))))),await a.t(gr.f(a.r([Kc],a.l(async(t,s,n)=>a.b(Wc.f,t,s,n))))),await a.t(gr.f(a.r([Yc],a.l(async(t,s,n)=>a.b(Gc.f,t,s,n))))),await a.t(gr.f(a.r([Qc],a.l(async(t,s,n)=>a.b(Xc.f,t,s,n))))),await a.t(gr.f(a.r([Hc],a.l(async(t,s,n)=>a.b(Zc.f,t,s,n))))),await a.t(gr.f(a.r([th],a.l(async(t,s,n)=>a.b(ah.f,t,s,n))))),await a.t(gr.f(a.r([nh],a.l(async(t,s,n)=>a.b(sh.f,t,s,n))))),await a.t(gr.f(a.r([eh],a.l(async(t,s,n)=>a.b(ih.f,t,s,n))))),await a.t(gr.f(a.r([lh],a.l(async(t,s,n)=>a.b(oh.f,t,s,n))))),await a.t(gr.f(a.r([fh],a.l(async(t,s,n)=>a.b(rh.f,t,s,n))))),await a.t(gr.f(a.r([ch],a.l(async(t,s,n)=>a.b(wh.f,t,s,n))))),await a.t(gr.f(a.r([yh],a.l(async(t,s,n)=>a.b(hh.f,t,s,n))))),await a.t(gr.f(a.r([Ch],a.l(async(t,s,n)=>a.b(dh.f,t,s,n))))),await a.t(gr.f(a.r([bh],a.l(async(t,s,n)=>a.b(uh.f,t,s,n))))),await a.t(gr.f(a.r([mh],a.l(async(t,s,n)=>a.b(ph.f,t,s,n))))),await a.t(gr.f(a.r([Sh],a.l(async(t,s,n)=>a.b(gh.f,t,s,n))))),await a.t(gr.f(a.r([_h],a.l(async(t,s,n)=>a.b(vh.f,t,s,n))))),await a.t(gr.f(a.r([xh],a.l(async(t,s,n)=>a.b(Bh.f,t,s,n))))),await a.t(gr.f(a.r([jh],a.l(async(t,s,n)=>a.b(qh.f,t,s,n))))),await a.t(gr.f(a.r([Nh],a.l(async(t,s,n)=>a.b(Jh.f,t,s,n))))),await a.t(gr.f(a.r([Oh],a.l(async(t,s,n)=>a.b(kh.f,t,s,n))))),await a.t(gr.f(a.r([Th],a.l(async(t,s,n)=>a.b(Ah.f,t,s,n))))),await a.t(gr.f(a.r([Ph],a.l(async(t,s,n)=>a.b(Eh.f,t,s,n))))),await a.t(gr.f(a.r([Lh],a.l(async(t,s,n)=>a.b(Ih.f,t,s,n))))),await a.t(gr.f(a.r([Dh],a.l(async(t,s,n)=>a.b(Fh.f,t,s,n))))),await a.t(gr.f(a.r([Rh],a.l(async(t,s,n)=>a.b(Mh.f,t,s,n))))),await a.t(gr.f(a.r([zh],a.l(async(t,s,n)=>a.b($h.f,t,s,n))))),await a.t(gr.f(a.r([Vh],a.l(async(t,s,n)=>a.b(Uh.f,t,s,n))))),await a.t(gr.f(a.r([Kh],a.l(async(t,s,n)=>a.b(Wh.f,t,s,n))))),await a.t(gr.f(a.r([Yh],a.l(async(t,s,n)=>a.b(Gh.f,t,s,n))))),await a.t(gr.f(a.r([Qh],a.l(async(t,s,n)=>a.b(Xh.f,t,s,n))))),await a.t(gr.f(a.r([Hh],a.l(async(t,s,n)=>a.b(Zh.f,t,s,n))))),await a.t(gr.f(a.r([ty],a.l(async(t,s,n)=>a.b(ay.f,t,s,n))))),await a.t(gr.f(a.r([ny],a.l(async(t,s,n)=>a.b(sy.f,t,s,n))))),await a.t(gr.f(a.r([ey],a.l(async(t,s,n)=>a.b(iy.f,t,s,n))))),await a.t(gr.f(a.r([ly],a.l(async(t,s,n)=>a.b(oy.f,t,s,n))))),await a.t(gr.f(a.r([fy],a.l(async(t,s,n)=>a.b(ry.f,t,s,n))))),await a.t(gr.f(a.r([cy],a.l(async(t,s,n)=>a.b(wy.f,t,s,n))))),await a.t(gr.f(a.r([yy],a.l(async(t,s,n)=>a.b(hy.f,t,s,n))))),await a.t(gr.f(a.r([Cy],a.l(async(t,s,n)=>a.b(dy.f,t,s,n))))),await a.t(gr.f(a.r([by],a.l(async(t,s,n)=>a.b(uy.f,t,s,n))))),await a.t(gr.f(a.r([my],a.l(async(t,s,n)=>a.b(py.f,t,s,n))))),await a.t(gr.f(a.r([Sy],a.l(async(t,s,n)=>a.b(gy.f,t,s,n))))),a.b(gr.f,a.r([_y],a.l(async(t,s,n)=>a.b(vy.f,t,s,n))))))),a.d("shen.initialise-lambda-forms",a.l(async()=>(await a.t(gr.f(a.r([xy],a.l(async t=>a.b(By.f,t))))),await a.t(gr.f(a.r([jy],a.l(async t=>a.b(qy.f,t))))),await a.t(gr.f(a.r([Ny],a.l(async t=>a.b(Jy.f,t))))),await a.t(gr.f(a.r([_s],a.l(async t=>a.b(ky.f,t))))),await a.t(gr.f(a.r([rl],a.l(async(t,s)=>a.asNumber(t)-a.asNumber(s))))),await a.t(gr.f(a.r([$a],a.l(async(t,s)=>a.asShenBool(a.equate(t,s)))))),await a.t(gr.f(a.r([H],a.l(async(t,s)=>a.b(Oy.f,t,s))))),await a.t(gr.f(a.r([Y],a.l(async(t,s)=>a.b(Ay.f,t,s))))),await a.t(gr.f(a.r([aa],a.l(async(t,s)=>a.b(Ty.f,t,s))))),await a.t(gr.f(a.r([wl],a.l(async t=>a.b(E.f,t))))),await a.t(gr.f(a.r([cl],a.l(async t=>a.b(Ey.f,t))))),await a.t(gr.f(a.r([fl],a.l(async(t,s)=>a.b(Py.f,t,s))))),await a.t(gr.f(a.r([$a],a.l(async(t,s)=>a.asShenBool(a.equate(t,s)))))),await a.t(gr.f(a.r([me],a.l(async(t,s)=>a.asShenBool(a.asNumber(t)>=a.asNumber(s)))))),await a.t(gr.f(a.r([pe],a.l(async(t,s)=>a.asShenBool(a.asNumber(t)>a.asNumber(s)))))),await a.t(gr.f(a.r([rl],a.l(async(t,s)=>a.asNumber(t)-a.asNumber(s))))),await a.t(gr.f(a.r([ll],a.l(async(t,s)=>a.asNumber(t)/a.asNzNumber(s))))),await a.t(gr.f(a.r([A],a.l(async(t,s)=>a.asNumber(t)*a.asNumber(s))))),await a.t(gr.f(a.r([ol],a.l(async(t,s)=>a.asNumber(t)+a.asNumber(s))))),await a.t(gr.f(a.r([De],a.l(async(t,s)=>a.asShenBool(a.asNumber(t)<=a.asNumber(s)))))),await a.t(gr.f(a.r([Fe],a.l(async(t,s)=>a.asShenBool(a.asNumber(t)<a.asNumber(s)))))),await a.t(gr.f(a.r([el],a.l(async t=>a.b(Iy.f,t))))),await a.t(gr.f(a.r([il],a.l(async(t,s)=>a.b(Ly.f,t,s))))),await a.t(gr.f(a.r([nl],a.l(async(a,t)=>Fy.f(a,t))))),await a.t(gr.f(a.r([tl],a.l(async t=>a.b(Oa.f,t))))),await a.t(gr.f(a.r([al],a.l(async t=>a.valueOf(a.nameOf(a.asSymbol(t))))))),await a.t(gr.f(a.r([Ho],a.l(async(t,s,n)=>a.b(Dy.f,t,s,n))))),await a.t(gr.f(a.r([be],a.l(async(t,s)=>a.b(My.f,t,s))))),await a.t(gr.f(a.r([ta],a.l(async t=>a.b(Us.f,t))))),await a.t(gr.f(a.r([Zo],a.l(async t=>a.b(Ry.f,t))))),await a.t(gr.f(a.r([Qo],a.l(async t=>a.b($y.f,t))))),await a.t(gr.f(a.r([Xo],a.l(async t=>a.b(zy.f,t))))),await a.t(gr.f(a.r([Yo],a.l(async(t,s)=>a.b(Aa.f,t,s))))),await a.t(gr.f(a.r([Ko],a.l(async(t,s,n,i)=>a.b(Uy.f,t,s,n,i))))),await a.t(gr.f(a.r([Go],a.l(async(t,s,n,i)=>a.b(Vy.f,t,s,n,i))))),await a.t(gr.f(a.r([Vo],a.l(async(t,s,n)=>a.b(Wy.f,t,s,n))))),await a.t(gr.f(a.r([Wo],a.l(async t=>a.b(Ky.f,t))))),await a.t(gr.f(a.r([Uo],a.l(async t=>a.b(Gy.f,t))))),await a.t(gr.f(a.r([zo],a.l(async(t,s,n)=>a.b(Yy.f,t,s,n))))),await a.t(gr.f(a.r([pt],a.l(async(t,s)=>a.b(Xy.f,t,s))))),await a.t(gr.f(a.r([It],a.l(async t=>a.b(Qy.f,t))))),await a.t(gr.f(a.r([$o],a.l(async(a,t)=>await(async()=>{try{return a}catch(a){return t(a)}})())))),await a.t(gr.f(a.r([Ro],a.l(async t=>a.b(Zy.f,t))))),await a.t(gr.f(a.r([es],a.l(async t=>a.b(Ks.f,t))))),await a.t(gr.f(a.r([Do],a.l(async t=>a.b(Hy.f,t))))),await a.t(gr.f(a.r([Pt],a.l(async t=>a.asCons(t).tail)))),await a.t(gr.f(a.r([Ut],a.l(async t=>a.asNeString(t).substring(1))))),await a.t(gr.f(a.r([Fo],a.l(async t=>a.b(ad.f,t))))),await a.t(gr.f(a.r([Lo],a.l(async t=>a.b(td.f,t))))),await a.t(gr.f(a.r([Io],a.l(async t=>a.b(b.f,t))))),await a.t(gr.f(a.r([Oo],a.l(async t=>a.b(sd.f,t))))),await a.t(gr.f(a.r([Po],a.l(async t=>a.b(nd.f,t))))),await a.t(gr.f(a.r([Eo],a.l(async(t,s,n)=>a.b(id.f,t,s,n))))),await a.t(gr.f(a.r([Ao],a.l(async t=>a.asShenBool(a.isString(t)))))),await a.t(gr.f(a.r([ko],a.l(async t=>a.asNeString(t).charCodeAt(0))))),await a.t(gr.f(a.r([qo],a.l(async t=>a.b(ed.f,t))))),await a.t(gr.f(a.r([xo],a.l(async t=>a.b(od.f,t))))),await a.t(gr.f(a.r([Bo],a.l(async t=>a.b(ld.f,t))))),await a.t(gr.f(a.r([Ft],a.l(async t=>a.b(rd.f,t))))),await a.t(gr.f(a.r([_o],a.l(async t=>a.raise(a.asString(t)))))),await a.t(gr.f(a.r([li],a.l(async(t,s)=>a.c(a.nameOf(a.asSymbol(t))).set(s))))),await a.t(gr.f(a.r([To],a.l(async t=>a.show(t))))),await a.t(gr.f(a.r([vo],a.l(async t=>a.b(Jt.f,t))))),await a.t(gr.f(a.r([go],a.l(async(t,s)=>a.b(ms.f,t,s))))),await a.t(gr.f(a.r([uo],a.l(async t=>a.b(fd.f,t))))),await a.t(gr.f(a.r([yo],a.l(async t=>a.b(wd.f,t))))),await a.t(gr.f(a.r([Co],a.l(async t=>a.b(cd.f,t))))),await a.t(gr.f(a.r([ho],a.l(async t=>a.b(hd.f,t))))),await a.t(gr.f(a.r([bo],a.l(async t=>a.asInStream(t).read())))),await a.t(gr.f(a.r([po],a.l(async t=>a.b(yd.f,t))))),await a.t(gr.f(a.r([ao],a.l(async t=>a.b(dd.f,t))))),await a.t(gr.f(a.r([wo],a.l(async(t,s,n,i)=>a.b(ya.f,t,s,n,i))))),await a.t(gr.f(a.r([ro],a.l(async t=>a.b(Cd.f,t))))),await a.t(gr.f(a.r([fo],a.l(async t=>a.b(ud.f,t))))),await a.t(gr.f(a.r([lo],a.l(async t=>a.b(bd.f,t))))),await a.t(gr.f(a.r([Ta],a.l(async t=>a.b(pd.f,t))))),await a.t(gr.f(a.r([eo],a.l(async t=>a.b(md.f,t))))),await a.t(gr.f(a.r([io],a.l(async t=>a.b(gd.f,t))))),await a.t(gr.f(a.r([no],a.l(async t=>a.b(Sd.f,t))))),await a.t(gr.f(a.r([oo],a.l(async(t,s)=>a.b(vd.f,t,s))))),await a.t(gr.f(a.r([zt],a.l(async(a,t)=>_d.f(a,t))))),await a.t(gr.f(a.r([Ze],a.l(async(t,s)=>a.asShenBool(a.asJsBool(t)||a.asJsBool(s)))))),await a.t(gr.f(a.r([Qe],a.l(async t=>a.b(Bd.f,t))))),await a.t(gr.f(a.r([ri],a.l(async(t,s)=>a.b(xd.f,t,s))))),await a.t(gr.f(a.r([Xe],a.l(async(t,s)=>a.b(qd.f,t,s))))),await a.t(gr.f(a.r([Ye],a.l(async t=>a.b(jd.f,t))))),await a.t(gr.f(a.r([Ke],a.l(async t=>String.fromCharCode(a.asNumber(t)))))),await a.t(gr.f(a.r([Ge],a.l(async t=>a.asShenBool(a.isNumber(t)))))),await a.t(gr.f(a.r([We],a.l(async(t,s)=>a.b(Jd.f,t,s))))),await a.t(gr.f(a.r([Ve],a.l(async t=>a.asShenBool(!a.asJsBool(t)))))),await a.t(gr.f(a.r([Ue],a.l(async t=>a.b(Nd.f,t))))),await a.t(gr.f(a.r([Me],a.l(async t=>a.b(kd.f,t))))),await a.t(gr.f(a.r([ze],a.l(async t=>a.b(Od.f,t))))),await a.t(gr.f(a.r([$e],a.l(async(t,s)=>a.b(Ad.f,t,s))))),await a.t(gr.f(a.r([Re],a.l(async(t,s)=>a.b(T.f,t,s))))),await a.t(gr.f(a.r([Le],a.l(async t=>a.b(Td.f,t))))),await a.t(gr.f(a.r([Ie],a.l(async t=>a.b(Ed.f,t))))),await a.t(gr.f(a.r([Pe],a.l(async t=>a.b(Pd.f,t))))),await a.t(gr.f(a.r([Ee],a.l(async t=>a.b(Ga.f,t))))),await a.t(gr.f(a.r([Ne],a.l(async(t,s)=>a.b(Id.f,t,s))))),await a.t(gr.f(a.r([Be],a.l(async t=>a.symbolOf(a.asString(t)))))),await a.t(gr.f(a.r([_e],a.l(async t=>a.b(Ld.f,t))))),await a.t(gr.f(a.r([je],a.l(async t=>a.b(Fd.f,t))))),await a.t(gr.f(a.r([hi],a.l(async(t,s)=>a.b(Dd.f,t,s))))),await a.t(gr.f(a.r([hl],a.l(async t=>a.b(Md.f,t))))),await a.t(gr.f(a.r([yl],a.l(async t=>a.b(Rd.f,t))))),await a.t(gr.f(a.r([ke],a.l(async t=>a.b($d.f,t))))),await a.t(gr.f(a.r([Ht],a.l(async(t,s,n)=>a.asJsBool(t)?s:n)))),await a.t(gr.f(a.r([xe],a.l(async(t,s,n,i)=>a.b(zd.f,t,s,n,i))))),await a.t(gr.f(a.r([ve],a.l(async t=>a.b(Ud.f,t))))),await a.t(gr.f(a.r([Et],a.l(async t=>a.asCons(t).head)))),await a.t(gr.f(a.r([Mt],a.l(async t=>a.b(Vd.f,t))))),await a.t(gr.f(a.r([Se],a.l(async t=>a.b(Wd.f,t))))),await a.t(gr.f(a.r([ge],a.l(async(t,s)=>a.b(Js.f,t,s))))),await a.t(gr.f(a.r([ye],a.l(async(t,s,n)=>a.b(g.f,t,s,n))))),await a.t(gr.f(a.r([de],a.l(async a=>Kd.f(a))))),await a.t(gr.f(a.r([he],a.l(async t=>a.b(oa.f,t))))),await a.t(gr.f(a.r([Lt],a.l(async t=>a.b(Gd.f,t))))),await a.t(gr.f(a.r([is],a.l(async t=>a.l(async()=>t))))),await a.t(gr.f(a.r([we],a.l(async(t,s)=>a.b(Yd.f,t,s))))),await a.t(gr.f(a.r([fe],a.l(async(t,s)=>a.b(Xd.f,t,s))))),await a.t(gr.f(a.r([ce],a.l(async(t,s,n,i,e)=>a.b(Qd.f,t,s,n,i,e))))),await a.t(gr.f(a.r([se],a.l(async t=>a.b(Zd.f,t))))),await a.t(gr.f(a.r([le],a.l(async t=>a.b(Hd.f,t))))),await a.t(gr.f(a.r([re],a.l(async t=>a.b(aC.f,t))))),await a.t(gr.f(a.r([oe],a.l(async t=>a.b(Ba.f,t))))),await a.t(gr.f(a.r([ee],a.l(async t=>a.b(tC.f,t))))),await a.t(gr.f(a.r([ne],a.l(async t=>a.asError(t).message)))),await a.t(gr.f(a.r([te],a.l(async t=>a.b(ut.f,t))))),await a.t(gr.f(a.r([ae],a.l(async(t,s)=>a.b(m.f,t,s))))),await a.t(gr.f(a.r([Hi],a.l(async(a,t)=>t)))),await a.t(gr.f(a.r([Zi],a.l(async(t,s)=>a.b(sC.f,t,s))))),await a.t(gr.f(a.r([Qi],a.l(async t=>a.b(nC.f,t))))),await a.t(gr.f(a.r([Xi],a.l(async(t,s)=>a.b(iC.f,t,s))))),await a.t(gr.f(a.r([Yi],a.l(async(t,s)=>a.asString(t)+a.asString(s))))),await a.t(gr.f(a.r([At],a.l(async t=>a.asShenBool(a.isCons(t)))))),await a.t(gr.f(a.r([Z],a.l(async(t,s)=>a.r([t],s))))),await a.t(gr.f(a.r([Gi],a.l(async(t,s)=>a.b(eC.f,t,s))))),await a.t(gr.f(a.r([Ki],a.l(async(s,n,i)=>a.b(t.f,s,n,i))))),await a.t(gr.f(a.r([Vi],a.l(async t=>a.b(oC.f,t))))),await a.t(gr.f(a.r([Wi],a.l(async t=>a.b(lC.f,t))))),await a.t(gr.f(a.r([Ui],a.l(async t=>a.b(Oi.f,t))))),await a.t(gr.f(a.r([zi],a.l(async t=>a.b(vt.f,t))))),await a.t(gr.f(a.r([$i],a.l(async(t,s)=>a.b(dt.f,t,s))))),await a.t(gr.f(a.r([xt],a.l(async t=>a.b(Ka.f,t))))),await a.t(gr.f(a.r([Ri],a.l(async(t,s)=>a.b(Ra.f,t,s))))),await a.t(gr.f(a.r([fs],a.l(async(t,s)=>a.asShenBool(a.asJsBool(t)&&a.asJsBool(s)))))),await a.t(gr.f(a.r([Mi],a.l(async(t,s)=>a.b(ys.f,t,s))))),await a.t(gr.f(a.r([ue],a.l(async(t,s)=>a.b(Wt.f,t,s))))),await a.t(gr.f(a.r([Ce],a.l(async(a,t,s)=>vs.f(a,t,s))))),await a.t(gr.f(a.r([Fi],a.l(async t=>a.asShenBool(a.isArray(t)))))),a.b(gr.f,a.r([Di],a.l(async a=>Ss.f(a))))))),a.d("shen.initialise",a.l(async()=>(await a.t(rC.f()),await a.t(fC.f()),await a.t(wC.f()),a.b(cC.f)))),a.d("load",a.l(async t=>await(async t=>await(async a=>Ql)(a.asJsBool(Ms.get())&&await a.t(Xa.f("\ntypechecked in "+a.asString(await a.t(e.f(await a.t(yC.f())," inferences\n",l))),await a.t(Qa.f())))))(await(async s=>await(async t=>await(async n=>await(async s=>await(async a=>t)(await a.t(Xa.f("\nrun time: "+a.show(s)+" secs\n",await a.t(Qa.f())))))(a.asNumber(n)-a.asNumber(s)))(Kd.f(Ul)))(await a.t(hC.f(Ms.get(),await a.t(wd.f(t))))))(Kd.f(Ul))))),a.d("shen.load-help",a.l(async(t,s)=>U===t?a.b(ba.f,a.l(async t=>a.b(Xa.f,await a.t(e.f(await a.t(dC.f(t)),"\n",gs)),await a.t(Qa.f()))),s):await(async t=>await(async s=>await(async n=>await(async()=>{try{return await a.t(ba.f(a.l(async t=>a.b(pC.f,t)),t))}catch(t){return a.b(mC.f,t,s)}})())(await a.t(ba.f(a.l(async t=>a.b(bC.f,t)),s))))(await a.t(Ad.f(a.l(async t=>a.b(uC.f,t)),t))))(await a.t(Ad.f(a.l(async t=>a.b(CC.f,t)),s))))),a.d("shen.remove-synonyms",a.l(async t=>a.isCons(t)&&gC===t.head?(await a.t(tC.f(t)),null):a.r([t]))),a.d("shen.typecheck-and-load",a.l(async t=>(await a.t(Nd.f(1)),a.b(SC.f,t,await a.t(oa.f(In)))))),a.d("shen.typetable",a.l(async s=>a.isCons(s)&&wi===s.head&&a.isCons(s.tail)?await(async t=>a.r([a.r([a.asCons(a.asCons(s).tail).head],t)]))(await a.t(t.f(a.l(async t=>a.b(vC.f,t)),a.asCons(a.asCons(s).tail).tail,a.l(async t=>a.raise(a.asString(await a.t(e.f(a.asCons(a.asCons(s).tail).head," lacks a proper signature.\n",l)))))))):null)),a.d("shen.assumetype",a.l(async t=>a.isCons(t)?a.b(iC.f,t.head,t.tail):a.b(Na.f,_C))),a.d("shen.unwind-types",a.l(async(t,s)=>null===s?a.raise(a.asError(t).message):a.isCons(s)&&a.isCons(s.head)?(await a.t(BC.f(a.asCons(a.asCons(s).head).head)),a.b(mC.f,t,a.asCons(s).tail)):a.b(Na.f,xC))),a.d("shen.remtype",a.l(async t=>Ct.set(await a.t(qC.f(t,Ct.get()))))),a.d("shen.removetype",a.l(async(t,s)=>null===s?null:a.isCons(s)&&a.isCons(s.head)&&a.equate(a.asCons(s.head).head,t)?a.b(qC.f,a.asCons(a.asCons(s).head).head,a.asCons(s).tail):a.isCons(s)?a.r([s.head],await a.t(qC.f(t,s.tail))):a.b(Na.f,jC))),a.d("shen.<sig+rest>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):a.b(h.f,a.asCons(s).head,await a.t(d.f(t))))(await a.t(Ey.f(t))))(await a.t(w.f(t))))),a.d("write-to-file",a.l(async(t,s)=>await(async t=>await(async n=>await(async n=>await(async a=>s)(await a.t(lC.f(t))))(await a.t(vd.f(n,t))))(a.isString(s)?await a.t(e.f(s,"\n\n",l)):await a.t(e.f(s,"\n\n",gs))))(await a.t(xd.f(t,Kl))))),a.d("macroexpand",a.l(async t=>await(async s=>a.equate(t,s)?t:a.b(NC.f,a.l(async t=>a.b(kd.f,t)),s))(await a.t(JC.f(dn.get(),t))))),a.d("shen.error-macro",a.l(async t=>a.isCons(t)&&or===t.head&&a.isCons(t.tail)?a.r([_o,await a.t(kC.f(a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(t).tail).tail))]):t)),a.d("shen.output-macro",a.l(async t=>a.isCons(t)&&Wl===t.head&&a.isCons(t.tail)?a.r([mr,await a.t(kC.f(a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(t).tail).tail)),a.r([Jo])]):a.isCons(t)&&oo===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.r([oo,a.asCons(a.asCons(t).tail).head,a.r([Jo])]):t)),a.d("shen.make-string-macro",a.l(async t=>a.isCons(t)&&Xl===t.head&&a.isCons(t.tail)?a.b(kC.f,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(t).tail).tail):t)),a.d("shen.input-macro",a.l(t=>a.isCons(t)&&Ie===t.head&&null===t.tail?a.r([Ie,a.r([jo])]):a.isCons(t)&&je===t.head&&null===t.tail?a.r([je,a.r([jo])]):a.isCons(t)&&uo===t.head&&null===t.tail?a.r([uo,a.r([jo])]):a.isCons(t)&&hi===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.r([hi,a.asCons(a.asCons(t).tail).head,a.r([jo])]):a.isCons(t)&&bo===t.head&&null===t.tail?a.r([bo,a.r([jo])]):t)),a.d("shen.compose",a.l(async(t,s)=>null===t?s:a.isCons(t)?a.b(JC.f,t.tail,await a.t(t.head(s))):a.b(Na.f,OC))),a.d("shen.compile-macro",a.l(t=>a.isCons(t)&&Ki===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([Ki,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.r([Ea,Mn,a.r([Ht,a.r([At,Mn]),a.r([or,"parse error here: ~S~%",Mn]),a.r([or,"parse error~%"])])])]):t)),a.d("shen.prolog-macro",a.l(async t=>a.isCons(t)&&Vl===t.head?a.r([Pa,AC,a.r([TC]),await(async s=>await(async n=>await(async t=>await(async t=>await a.t(IC.f(AC,t,s)))(await a.t(sC.f(n,t))))(await a.t(PC.f(a.asCons(t).tail))))(await a.t(qa.f(a.asCons(t).tail))))(await a.t(EC.f(AC,a.asCons(t).tail)))]):t)),a.d("shen.externally-bound",a.l(async t=>a.isCons(t)&&Cs===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.asCons(t).tail:a.isCons(t)?a.b(Aa.f,await a.t(PC.f(t.head)),await a.t(PC.f(t.tail))):null)),a.d("shen.locally-bind-prolog-vs",a.l((t,s,n)=>null===s?n:a.isCons(s)?a.r([Pa,s.head,a.r([LC,t]),a.t(IC.f(t,s.tail,n))]):a.raise("implementation error inp locally-bind-prolog-vs"))),a.d("shen.bld-prolog-call",a.l(async(t,s)=>null===s?V:a.isCons(s)&&dl===s.head?a.r([fr,U,t,a.r([is,await a.t(EC.f(t,a.asCons(s).tail))])]):a.isCons(s)&&a.isCons(s.head)&&Pl===a.asCons(s.head).head&&a.isCons(a.asCons(s.head).tail)&&null===a.asCons(a.asCons(s.head).tail).tail?a.r([ir,await a.t(FC.f(a.asCons(a.asCons(a.asCons(s).head).tail).head,t)),t,a.r([is,await a.t(EC.f(t,a.asCons(s).tail))])]):a.isCons(s)&&a.isCons(s.head)&&ar===a.asCons(s.head).head&&a.isCons(a.asCons(s.head).tail)&&a.isCons(a.asCons(a.asCons(s.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(s.head).tail).tail).tail?a.r([hr,a.asCons(a.asCons(a.asCons(s).head).tail).head,await a.t(FC.f(a.asCons(a.asCons(a.asCons(a.asCons(s).head).tail).tail).head,t)),t,a.r([is,await a.t(EC.f(t,a.asCons(s).tail))])]):a.isCons(s)&&a.isCons(s.head)&&Cs===a.asCons(s.head).head&&a.isCons(a.asCons(s.head).tail)&&null===a.asCons(a.asCons(s.head).tail).tail?a.b(EC.f,t,a.asCons(s).tail):a.isCons(s)&&a.isCons(s.head)&&hr===a.asCons(s.head).head&&a.isCons(a.asCons(s.head).tail)&&a.isCons(a.asCons(a.asCons(s.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(s.head).tail).tail).tail?a.r([hr,a.asCons(a.asCons(a.asCons(s).head).tail).head,await a.t(DC.f(a.asCons(a.asCons(a.asCons(a.asCons(s).head).tail).tail).head,t)),t,a.r([is,await a.t(EC.f(t,a.asCons(s).tail))])]):a.isCons(s)&&a.isCons(s.head)&&ir===a.asCons(s.head).head&&a.isCons(a.asCons(s.head).tail)&&null===a.asCons(a.asCons(s.head).tail).tail?a.r([ir,await a.t(DC.f(a.asCons(a.asCons(a.asCons(s).head).tail).head,t)),t,a.r([is,await a.t(EC.f(t,a.asCons(s).tail))])]):a.isCons(s)?a.b(Ra.f,s.head,a.r([t,a.r([is,await a.t(EC.f(t,s.tail))])])):a.raise("implementation error in bld-prolog-call"))),a.d("shen.defprolog-macro",a.l(async s=>a.isCons(s)&&lr===s.head&&a.isCons(s.tail)?a.b(t.f,a.l(async t=>a.b(MC.f,t)),a.asCons(s).tail,a.l(async t=>a.b(RC.f,a.asCons(a.asCons(s).tail).head,t))):s)),a.d("shen.datatype-macro",a.l(async t=>a.isCons(t)&&rr===t.head&&a.isCons(t.tail)?a.r([ci,await a.t($C.f(a.asCons(a.asCons(t).tail).head)),a.r([Ki,a.r([Ea,ii,a.r([zC,ii])]),await a.t(UC.f(a.asCons(a.asCons(t).tail).tail)),a.r([sr,xy])])]):t)),a.d("shen.intern-type",a.l(async t=>a.symbolOf(a.show(t)+"#type"))),a.d("shen.@s-macro",a.l(async t=>a.isCons(t)&&aa===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)?a.r([aa,a.asCons(a.asCons(t).tail).head,await a.t(kn.f(a.r([aa],a.asCons(a.asCons(t).tail).tail)))]):a.isCons(t)&&aa===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&a.isString(a.asCons(t.tail).head)?await(async s=>a.asNumber(await a.t(Ga.f(s)))>1?a.b(kn.f,a.r([aa],await a.t(Ra.f(s,a.asCons(a.asCons(t).tail).tail)))):t)(await a.t(Hd.f(a.asCons(a.asCons(t).tail).head))):t)),a.d("shen.synonyms-macro",a.l(async t=>a.isCons(t)&&Rl===t.head?a.r([gC,await a.t(UC.f(await a.t(VC.f(a.asCons(t).tail))))]):t)),a.d("shen.curry-synonyms",a.l(async t=>a.b(T.f,a.l(async t=>a.b(j.f,t)),t))),a.d("shen.nl-macro",a.l(t=>a.isCons(t)&&Ue===t.head&&null===t.tail?a.r([Ue,1]):t)),a.d("shen.assoc-macro",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&a.asJsBool(await a.t(m.f(t.head,a.r([Y,H,Ri,fs,Ze,ol,A,Hi]))))?a.r([a.asCons(t).head,a.asCons(a.asCons(t).tail).head,await a.t(vn.f(a.r([a.asCons(t).head],a.asCons(a.asCons(t).tail).tail)))]):t)),a.d("shen.let-macro",a.l(t=>a.isCons(t)&&Pa===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail)?a.r([Pa,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.t(Sn.f(a.r([Pa],a.asCons(a.asCons(a.asCons(t).tail).tail).tail)))]):t)),a.d("shen.abs-macro",a.l(t=>a.isCons(t)&&tt===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)?a.r([Ea,a.asCons(a.asCons(t).tail).head,a.t(bn.f(a.r([tt],a.asCons(a.asCons(t).tail).tail)))]):a.isCons(t)&&tt===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([Ea],a.asCons(t).tail):t)),a.d("shen.cases-macro",a.l(t=>a.isCons(t)&&wr===t.head&&a.isCons(t.tail)&&V===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)?a.asCons(a.asCons(a.asCons(t).tail).tail).head:a.isCons(t)&&wr===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([Ht,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.r([_o,"error: cases exhausted"])]):a.isCons(t)&&wr===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)?a.r([Ht,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.t(un.f(a.r([wr],a.asCons(a.asCons(a.asCons(t).tail).tail).tail)))]):a.isCons(t)&&wr===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.raise("error: odd number of case elements\n"):t)),a.d("shen.timer-macro",a.l(async t=>a.isCons(t)&&Ml===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(Sn.f,a.r([Pa,WC,a.r([de,Ul]),Zt,a.asCons(a.asCons(t).tail).head,KC,a.r([de,Ul]),GC,a.r([rl,KC,WC]),YC,a.r([mr,a.r([Yi,"\nrun time: ",a.r([Yi,a.r([To,GC])," secs\n"])]),a.r([Jo])]),Zt])):t)),a.d("shen.tuple-up",a.l(t=>a.isCons(t)?a.r([Y,t.head,a.t(XC.f(t.tail))]):t)),a.d("shen.put/get-macro",a.l(t=>a.isCons(t)&&wo===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?a.r([wo,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).head,a.r([al,Jl])]):a.isCons(t)&&ye===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([ye,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.r([al,Jl])]):a.isCons(t)&&Vo===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([Vo,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.r([al,Jl])]):t)),a.d("shen.function-macro",a.l(async t=>a.isCons(t)&&sr===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(QC.f,a.asCons(a.asCons(t).tail).head,await a.t(Ka.f(a.asCons(a.asCons(t).tail).head))):t)),a.d("shen.function-abstraction",a.l(async(t,s)=>0===s?a.raise(a.asString(await a.t(e.f(t," has no lambda form\n",l)))):-1===s?a.r([sr,t]):a.b(ZC.f,t,s,null))),a.d("shen.function-abstraction-help",a.l(async(t,s,n)=>0===s?a.r([t],n):await(async i=>a.r([tt,i,await a.t(ZC.f(t,a.asNumber(s)-1,await a.t(Ra.f(n,a.r([i])))))]))(await a.t(oa.f(nt))))),a.d("undefmacro",a.l(async t=>await(async s=>await(async n=>await(async s=>await(async a=>t)(dn.set(await a.t(au.f(n,dn.get())))))(Gs.set(await a.t(ms.f(t,s)))))(await a.t(HC.f(t,s))))(Gs.get()))),a.d("shen.findpos",a.l(async(t,s)=>null===s?a.raise(a.asString(await a.t(e.f(t," is not a macro\n",l)))):a.isCons(s)&&a.equate(s.head,t)?1:a.isCons(s)?1+a.asNumber(await a.t(HC.f(t,s.tail))):a.b(Na.f,tu))),a.d("shen.remove-nth",a.l(async(t,s)=>1===t&&a.isCons(s)?a.asCons(s).tail:a.isCons(s)?a.r([s.head],await a.t(au.f(a.asNumber(t)-1,s.tail))):a.b(Na.f,su))),a.d("shen.<defprolog>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):a.b(h.f,a.asCons(s).head,a.asCons(await a.t(eu.f(await a.t(T.f(a.l(async s=>a.b(ou.f,await a.t(d.f(t)),s)),await a.t(d.f(s))))))).head))(await a.t(iu.f(t))))(await a.t(nu.f(t))))),a.d("shen.prolog-error",a.l(async(t,s)=>a.isCons(s)&&a.isCons(s.tail)&&null===a.asCons(s.tail).tail?a.raise("prolog syntax error in "+a.asString(await a.t(e.f(t," here:\n\n "+a.asString(await a.t(e.f(await a.t(o.f(50,a.asCons(s).head)),"\n",l))),l)))):a.raise("prolog syntax error in "+a.asString(await a.t(e.f(t,"\n",l)))))),a.d("shen.next-50",a.l(async(t,s)=>null===s?"":0===t?"":a.isCons(s)?a.asString(await a.t(lu.f(s.head)))+a.asString(await a.t(o.f(a.asNumber(t)-1,s.tail))):a.b(Na.f,ru))),a.d("shen.decons-string",a.l(async t=>a.isCons(t)&&Z===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.b(e.f,await a.t(fu.f(t))," ",gs):a.b(e.f,t," ",wu))),a.d("shen.insert-predicate",a.l(async(t,s)=>a.isCons(s)&&a.isCons(s.tail)&&null===a.asCons(s.tail).tail?a.r([a.r([t],a.asCons(s).head),rl],a.asCons(s).tail):a.b(Na.f,cu))),a.d("shen.<predicate*>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<clauses*>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(iu.f(t))))(await a.t(hu.f(t)))))),a.d("shen.<clause*>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.isCons(a.asCons(t).head)&&Cl===await a.t(C.f(t))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):await(async n=>a.equate(await a.t(f.f()),n)?a.b(f.f):a.b(h.f,a.asCons(n).head,a.r([await a.t(d.f(t)),await a.t(d.f(s))])))(await a.t(Cu.f(s))))(await a.t(du.f(s))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))(await a.t(yu.f(t))))),a.d("shen.<head*>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(yu.f(t))))(await a.t(uu.f(t)))))),a.d("shen.<term*>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>Cl!==s&&a.asJsBool(await a.t(bu.f(s)))?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,await a.t(fu.f(s))):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.legitimate-term?",a.l(t=>a.isCons(t)&&Z===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.asShenBool(a.asJsBool(a.t(bu.f(a.asCons(a.asCons(t).tail).head)))&&a.asJsBool(a.t(bu.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head)))):a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&ol===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?a.b(bu.f,a.asCons(a.asCons(t).tail).head):a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&rl===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?a.b(bu.f,a.asCons(a.asCons(t).tail).head):a.isCons(t)?U:V)),a.d("shen.eval-cons",a.l(t=>a.isCons(t)&&Z===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([a.t(fu.f(a.asCons(a.asCons(t).tail).head))],a.t(fu.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head))):a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([Yl,a.t(fu.f(a.asCons(a.asCons(t).tail).head))],a.asCons(a.asCons(t).tail).tail):t)),a.d("shen.<body*>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(du.f(t))))(await a.t(pu.f(t)))))),a.d("shen.<literal*>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?a.isCons(a.asCons(t).head)?await(async s=>a.isCons(s)?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s):a.b(f.f))(await a.t(C.f(t))):a.b(f.f):s)(a.isCons(a.asCons(t).head)&&dl===await a.t(C.f(t))?await(async t=>await a.t(h.f(a.asCons(t).head,a.r([fr,a.symbolOf("Throwcontrol")]))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):await a.t(f.f())))),a.d("shen.<end*>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>s===bl?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("cut",a.l(async(t,s,n)=>await(async a=>a===U?t:a)(await a.t(Ks.f(n))))),a.d("shen.insert_modes",a.l(t=>a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?t:null===t?null:a.isCons(t)?a.r([a.r([Yl,t.head,ol]),Yl,a.t(mu.f(t.tail)),rl]):t)),a.d("shen.s-prolog",a.l(async t=>a.b(T.f,a.l(async t=>a.b(tC.f,t)),await a.t(eu.f(t))))),a.d("shen.prolog->shen",a.l(async t=>a.b(T.f,a.l(async t=>a.b(gu.f,t)),await a.t(Su.f(await a.t(T.f(a.l(async t=>a.b(vu.f,t)),await a.t(Ad.f(a.l(async t=>a.b(_u.f,t)),t))))))))),a.d("shen.s-prolog_clause",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&rl===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([a.asCons(t).head,rl,await a.t(T.f(a.l(async t=>a.b(Bu.f,t)),a.asCons(a.asCons(a.asCons(t).tail).tail).head))]):a.b(Na.f,xu))),a.d("shen.head_abstraction",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&rl===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&a.asJsBool(await(async()=>{try{return a.asShenBool(a.asNumber(await a.t(qu.f(t.head)))<a.asNumber(vi.get()))}catch(a){return U}})())?a.r([t]):a.isCons(t)&&a.isCons(t.head)&&a.isCons(t.tail)&&rl===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?await(async s=>await(async n=>await(async n=>await(async t=>a.r([t]))(a.r([a.r([a.asCons(a.asCons(t).head).head],s),rl,a.r([n],a.asCons(a.asCons(a.asCons(t).tail).tail).head)])))(a.r([Ko,await a.t(Ju.f(s)),n])))(await a.t(UC.f(await a.t(ju.f(a.asCons(a.asCons(t).head).tail))))))(await a.t(T.f(a.l(async t=>a.b(oa.f,nt)),a.asCons(a.asCons(t).head).tail))):a.b(Na.f,Nu))),a.d("shen.complexity_head",a.l(async t=>a.isCons(t)?a.b(ku.f,await a.t(T.f(a.l(async t=>a.b(Ou.f,t)),t.tail))):a.b(Na.f,Au))),a.d("shen.safe-multiply",a.l((t,s)=>a.asNumber(t)*a.asNumber(s))),a.d("shen.complexity",a.l(async t=>a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&Yl===a.asCons(a.asCons(t.tail).head).head&&a.isCons(a.asCons(a.asCons(t.tail).head).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).head).tail).tail).tail&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.b(Ou.f,a.asCons(a.asCons(t).tail).head):a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&a.isCons(a.asCons(t.tail).tail)&&ol===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?a.b(Tu.f,2,await a.t(Tu.f(await a.t(Ou.f(a.r([Yl,a.asCons(a.asCons(a.asCons(t).tail).head).head],a.asCons(a.asCons(t).tail).tail))),await a.t(Ou.f(a.r([Yl,a.asCons(a.asCons(a.asCons(t).tail).head).tail],a.asCons(a.asCons(t).tail).tail)))))):a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&a.isCons(a.asCons(t.tail).tail)&&rl===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?a.b(Tu.f,await a.t(Ou.f(a.r([Yl,a.asCons(a.asCons(a.asCons(t).tail).head).head],a.asCons(a.asCons(t).tail).tail))),await a.t(Ou.f(a.r([Yl,a.asCons(a.asCons(a.asCons(t).tail).head).tail],a.asCons(a.asCons(t).tail).tail)))):a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&a.asJsBool(await a.t(Oa.f(a.asCons(t.tail).head)))?1:a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&ol===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?2:a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&rl===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?1:a.b(Ou.f,a.r([Yl,t,ol])))),a.d("shen.safe-product",a.l(async t=>null===t?1:a.isCons(t)?a.b(Tu.f,t.head,await a.t(ku.f(t.tail))):a.b(Na.f,Eu))),a.d("shen.s-prolog_literal",a.l(async t=>a.isCons(t)&&ar===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([hr,a.asCons(a.asCons(t).tail).head,await a.t(FC.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head,Pu))]):a.isCons(t)&&Pl===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.r([ir,await a.t(FC.f(a.asCons(a.asCons(t).tail).head,Pu))]):a.isCons(t)&&hr===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([hr,a.asCons(a.asCons(t).tail).head,await a.t(DC.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head,Pu))]):a.isCons(t)&&ir===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.r([ir,await a.t(DC.f(a.asCons(a.asCons(t).tail).head,Pu))]):a.isCons(t)?t:a.b(Na.f,Iu))),a.d("shen.insert-deref",a.l((t,s)=>a.asJsBool(a.t(Oa.f(t)))?a.r([Lu,t,s]):a.isCons(t)&&Ea===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([Ea,a.asCons(a.asCons(t).tail).head,a.t(FC.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head,s))]):a.isCons(t)&&Pa===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?a.r([Pa,a.asCons(a.asCons(t).tail).head,a.t(FC.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head,s)),a.t(FC.f(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).head,s))]):a.isCons(t)?a.r([a.t(FC.f(t.head,s))],a.t(FC.f(t.tail,s))):t)),a.d("shen.insert-lazyderef",a.l((t,s)=>a.asJsBool(a.t(Oa.f(t)))?a.r([Fu,t,s]):a.isCons(t)&&Ea===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([Ea,a.asCons(a.asCons(t).tail).head,a.t(DC.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head,s))]):a.isCons(t)&&Pa===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?a.r([Pa,a.asCons(a.asCons(t).tail).head,a.t(DC.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head,s)),a.t(DC.f(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).head,s))]):a.isCons(t)?a.r([a.t(DC.f(t.head,s))],a.t(DC.f(t.tail,s))):t)),a.d("shen.group_clauses",a.l(async t=>null===t?null:a.isCons(t)?await(async s=>await(async t=>a.r([s],await a.t(Su.f(t))))(await a.t(sC.f(t,s))))(await a.t(Du.f(a.l(async s=>a.b(Mu.f,t.head,s)),t))):a.b(Na.f,Ru))),a.d("shen.collect",a.l(async(t,s)=>null===s?null:a.isCons(s)?a.asJsBool(await a.t(t(s.head)))?a.r([s.head],await a.t(Du.f(t,s.tail))):a.b(Du.f,t,s.tail):a.b(Na.f,$u))),a.d("shen.same_predicate?",a.l(async(t,s)=>a.isCons(t)&&a.isCons(t.head)&&a.isCons(s)&&a.isCons(s.head)?a.asShenBool(a.equate(a.asCons(a.asCons(t).head).head,a.asCons(a.asCons(s).head).head)):a.b(Na.f,zu))),a.d("shen.compile_prolog_procedure",a.l(async t=>await(async s=>await(async a=>a)(await a.t(Vu.f(s,t))))(await a.t(Uu.f(t))))),a.d("shen.procedure_name",a.l(async t=>a.isCons(t)&&a.isCons(t.head)&&a.isCons(a.asCons(t.head).head)?a.asCons(a.asCons(a.asCons(t).head).head).head:a.b(Na.f,Wu))),a.d("shen.clauses-to-shen",a.l(async(t,s)=>await(async n=>await(async s=>await(async s=>await(async n=>await(async n=>await(async a=>a)(a.r([wi,t],await a.t(Ra.f(s,await a.t(Ra.f(a.r([Pu,Hu]),a.r([F,n]))))))))(await a.t(Xu.f(await a.t(Qu.f(await a.t(T.f(a.l(async t=>a.b(Zu.f,t)),n))))))))(await a.t(T.f(a.l(async t=>a.b(Yu.f,t,s)),n))))(await a.t(ma.f(s))))(await a.t(Gu.f(t,await a.t(T.f(a.l(async t=>a.b(Ud.f,t)),s))))))(await a.t(T.f(a.l(async t=>a.b(Ku.f,t)),s))))),a.d("shen.catch-cut",a.l(async t=>a.asJsBool(await a.t(ab.f(fr,t)))?a.r([Pa,tb,a.r([sb]),a.r([nb,tb,t])]):t)),a.d("shen.catchpoint",a.l(()=>a.r([ib],qi.set(1+a.asNumber(qi.get()))))),a.d("shen.cutpoint",a.l((t,s)=>a.equate(s,t)?U:s)),a.d("shen.nest-disjunct",a.l(async t=>a.isCons(t)&&null===t.tail?a.asCons(t).head:a.isCons(t)?a.b(eb.f,t.head,await a.t(Qu.f(t.tail))):a.b(Na.f,ob))),a.d("shen.lisp-or",a.l((t,s)=>a.r([Pa,lb,t,a.r([Ht,a.r([$a,lb,U]),s,lb])]))),a.d("shen.prolog-aritycheck",a.l(async(t,s)=>a.isCons(s)&&null===s.tail?a.asNumber(await a.t(Ga.f(a.asCons(s).head)))-1:a.isCons(s)&&a.isCons(s.tail)?a.equate(await a.t(Ga.f(a.asCons(s).head)),await a.t(Ga.f(a.asCons(a.asCons(s).tail).head)))?a.b(Gu.f,t,a.asCons(s).tail):a.raise("arity error in prolog procedure "+a.asString(await a.t(e.f(a.r([t]),"\n",l)))):a.b(Na.f,rb))),a.d("shen.linearise-clause",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&rl===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?await(async t=>a.b(fb.f,t))(await a.t(I.f(a.r([a.asCons(t).head],a.asCons(a.asCons(t).tail).tail)))):a.b(Na.f,wb))),a.d("shen.clause_form",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.r([await a.t(cb.f(a.asCons(t).head)),rl,await a.t(hb.f(a.asCons(a.asCons(t).tail).head))]):a.b(Na.f,yb))),a.d("shen.explicit_modes",a.l(async t=>a.isCons(t)?a.r([t.head],await a.t(T.f(a.l(async t=>a.b(db.f,t)),t.tail))):a.b(Na.f,Cb))),a.d("shen.em_help",a.l(t=>a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?t:a.r([Yl,t,ol]))),a.d("shen.cf_help",a.l(t=>a.isCons(t)&&M===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&$a===a.asCons(a.asCons(t.tail).head).head&&a.isCons(a.asCons(a.asCons(t.tail).head).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).head).tail).tail).tail&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([a.r([a.asJsBool(_i.get())?Go:Ko],a.asCons(a.asCons(a.asCons(t).tail).head).tail)],a.t(hb.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head))):t)),a.d("occurs-check",a.l(t=>ol===t?_i.set(V):rl===t?_i.set(U):a.raise("occurs-check expects + or -\n"))),a.d("shen.aum",a.l(async(t,s)=>a.isCons(t)&&a.isCons(t.head)&&a.isCons(t.tail)&&rl===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?await(async t=>a.b(mb.f,t,ol))(await a.t(ub.f(a.r([bb,a.asCons(a.asCons(t).head).tail,await a.t(pb.f(a.asCons(a.asCons(t).head).tail,a.asCons(a.asCons(a.asCons(t).tail).tail).head))]),s))):a.b(Na.f,gb))),a.d("shen.continuation_call",a.l(async(t,s)=>await(async t=>await(async n=>await(async t=>a.b(Sb.f,t,s))(await a.t(ms.f(tb,await a.t(sC.f(n,t))))))(await a.t(qa.f(s))))(a.r([Pu],await a.t(qa.f(t)))))),a.d("remove",a.l(async(t,s)=>a.b(vb.f,t,s,null))),a.d("shen.remove-h",a.l(async(t,s,n)=>null===s?a.b(Jt.f,n):a.isCons(s)&&a.equate(s.head,t)?a.b(vb.f,a.asCons(s).head,a.asCons(s).tail,n):a.isCons(s)?a.b(vb.f,t,s.tail,a.r([s.head],n)):a.b(Na.f,_b))),a.d("shen.cc_help",a.l((t,s)=>null===t&&null===s?a.r([Bb,xb,qb]):null===s?a.r([jb,xb,Jb,tr,t,fs,Nb,a.r([Bb,xb,qb])]):null===t?a.r([cr,xb,kb,s]):a.r([jb,xb,Jb,tr,t,fs,Nb,a.r([cr,xb,kb,s])]))),a.d("shen.make_mu_application",a.l(async(t,s)=>a.isCons(t)&&bb===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&null===s?a.asCons(a.asCons(a.asCons(t).tail).tail).head:a.isCons(t)&&bb===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&a.isCons(s)?a.r([a.r([bb,a.asCons(a.asCons(a.asCons(t).tail).head).head,await a.t(ub.f(a.r([bb,a.asCons(a.asCons(a.asCons(t).tail).head).tail],a.asCons(a.asCons(t).tail).tail),a.asCons(s).tail))]),a.asCons(s).head]):a.b(Na.f,Ob))),a.d("shen.mu_reduction",a.l(async(t,s)=>a.isCons(t)&&a.isCons(t.head)&&bb===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&Yl===a.asCons(a.asCons(a.asCons(t.head).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.head).tail).head).tail).tail).tail&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(mb.f,a.r([a.r([bb,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).head],a.asCons(a.asCons(a.asCons(t).head).tail).tail)],a.asCons(t).tail),a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail).tail).head):a.isCons(t)&&a.isCons(t.head)&&bb===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&ea===a.asCons(a.asCons(t.head).tail).head?a.b(mb.f,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head,s):a.isCons(t)&&a.isCons(t.head)&&bb===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&a.asJsBool(await a.t(Ab.f(a.asCons(a.asCons(t.head).tail).head,a.asCons(t.tail).head)))?a.b(id.f,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).head).tail).head,await a.t(mb.f(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head,s))):a.isCons(t)&&a.isCons(t.head)&&bb===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&a.asJsBool(await a.t(Oa.f(a.asCons(a.asCons(t.head).tail).head)))?a.r([Pa,a.asCons(a.asCons(a.asCons(t).head).tail).head,Tb,a.asCons(a.asCons(t).tail).head,tr,await a.t(mb.f(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head,s))]):a.isCons(t)&&a.isCons(t.head)&&bb===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&rl===s&&a.asJsBool(await a.t(Eb.f(a.asCons(a.asCons(t.head).tail).head)))?await(async s=>a.r([Pa,s,Tb,a.r([xb,Pb,Ib,Lb],a.asCons(t).tail),tr,a.r([Ht,a.r([s,ar,xe,Fb,a.asCons(a.asCons(a.asCons(t).head).tail).head]),Nb,await a.t(mb.f(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head,rl)),Db,Mb])]))(await a.t(oa.f(nt))):a.isCons(t)&&a.isCons(t.head)&&bb===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&ol===s&&a.asJsBool(await a.t(Eb.f(a.asCons(a.asCons(t.head).tail).head)))?await(async s=>a.r([Pa,s,Tb,a.r([xb,Pb,Ib,Lb],a.asCons(t).tail),tr,a.r([Ht,a.r([s,ar,xe,Fb,a.asCons(a.asCons(a.asCons(t).head).tail).head]),Nb,await a.t(mb.f(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head,ol)),Db,a.r([Ht,a.r([s,ar,l,Rb]),Nb,a.r([hr,s,Fb,a.asCons(a.asCons(a.asCons(t).head).tail).head,tr,await a.t(mb.f(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head,ol))]),Db,Mb])])]))(await a.t(oa.f(nt))):a.isCons(t)&&a.isCons(t.head)&&bb===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&rl===s?await(async s=>a.r([Pa,s,Tb,a.r([xb,Pb,Ib,Lb],a.asCons(t).tail),tr,a.r([Ht,a.r([s,ar,l,$b,Zl]),Nb,await a.t(mb.f(a.r([a.r([bb,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).head,a.r([a.r([bb,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail],a.asCons(a.asCons(a.asCons(t).head).tail).tail),a.r([xb,Fo,Ib,s])])]),a.r([xb,ve,Ib,s])]),rl)),Db,Mb])]))(await a.t(oa.f(nt))):a.isCons(t)&&a.isCons(t.head)&&bb===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).head)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&ol===s?await(async s=>a.r([Pa,s,Tb,a.r([xb,Pb,Ib,Lb],a.asCons(t).tail),tr,a.r([Ht,a.r([s,ar,l,$b,Zl]),Nb,await a.t(mb.f(a.r([a.r([bb,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).head,a.r([a.r([bb,a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).head).tail],a.asCons(a.asCons(a.asCons(t).head).tail).tail),a.r([xb,Fo,Ib,s])])]),a.r([xb,ve,Ib,s])]),ol)),Db,a.r([Ht,a.r([s,ar,l,Rb]),Nb,a.r([jb,xb,Jb,tr,await a.t(qa.f(a.asCons(a.asCons(a.asCons(t).head).tail).head)),fs,Nb,a.r([hr,s,Fb,await a.t(UC.f(await a.t(ju.f(a.asCons(a.asCons(a.asCons(t).head).tail).head)))),tr,await a.t(mb.f(a.asCons(a.asCons(a.asCons(a.asCons(t).head).tail).tail).head,ol))])]),Db,Mb])])]))(await a.t(oa.f(nt))):t)),a.d("shen.rcons_form",a.l(t=>a.isCons(t)?a.r([Z,a.t(UC.f(t.head)),a.t(UC.f(t.tail))]):t)),a.d("shen.remove_modes",a.l(t=>a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&ol===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?a.b(ju.f,a.asCons(a.asCons(t).tail).head):a.isCons(t)&&Yl===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&rl===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?a.b(ju.f,a.asCons(a.asCons(t).tail).head):a.isCons(t)?a.r([a.t(ju.f(t.head))],a.t(ju.f(t.tail))):t)),a.d("shen.ephemeral_variable?",a.l((t,s)=>a.asShenBool(a.asJsBool(a.t(Oa.f(t)))&&a.asJsBool(a.t(Oa.f(s)))))),a.d("shen.prolog_constant?",a.l(t=>a.isCons(t)?U:V)),a.d("shen.aum_to_shen",a.l(async t=>a.isCons(t)&&Pa===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&Tb===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail)&&tr===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail?a.r([Pa,a.asCons(a.asCons(t).tail).head,await a.t(Zu.f(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).head)),await a.t(Zu.f(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).tail).tail).head))]):a.isCons(t)&&xb===t.head&&a.isCons(t.tail)&&Pb===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&Ib===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&Lb===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail?a.r([Fu,await a.t(Zu.f(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).tail).head)),Pu]):a.isCons(t)&&Ht===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&Nb===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail)&&Db===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail?a.r([Ht,await a.t(Zu.f(a.asCons(a.asCons(t).tail).head)),await a.t(Zu.f(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).head)),await a.t(Zu.f(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).tail).tail).head))]):a.isCons(t)&&a.isCons(t.tail)&&ar===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&l===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&Rb===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).head&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?a.r([zb,a.asCons(t).head]):a.isCons(t)&&a.isCons(t.tail)&&ar===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&l===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&$b===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail)&&Zl===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).head&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail?a.r([At,a.asCons(t).head]):a.isCons(t)&&jb===t.head&&a.isCons(t.tail)&&xb===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&Jb===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&tr===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail)&&fs===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail)&&Nb===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail).tail).tail?a.b(Zu.f,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).tail).tail).tail).tail).head):a.isCons(t)&&jb===t.head&&a.isCons(t.tail)&&xb===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&Jb===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&tr===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).head)&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail)&&fs===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail)&&Nb===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail).tail).tail?a.r([Pa,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).tail).head).head,a.r([LC,Pu]),await a.t(Zu.f(a.r([jb,xb,Jb,tr,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).tail).head).tail],a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).tail).tail)))]):a.isCons(t)&&hr===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&Fb===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail)&&tr===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail).tail?a.r([Hi,a.r([Ub,a.asCons(a.asCons(t).tail).head,await a.t(Vb.f(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).head)),Pu]),a.r([Pa,Zt,await a.t(Zu.f(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).tail).tail).head)),a.r([Hi,a.r([Wb,a.asCons(a.asCons(t).tail).head,Pu]),Zt])])]):a.isCons(t)&&a.isCons(t.tail)&&ar===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&xe===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&Fb===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail).tail?a.r([$a,a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).tail).head,a.asCons(t).head]):Mb===t?U:a.isCons(t)&&xb===t.head&&a.isCons(t.tail)&&ve===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&Ib===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?a.r([Et],a.asCons(a.asCons(a.asCons(t).tail).tail).tail):a.isCons(t)&&xb===t.head&&a.isCons(t.tail)&&Fo===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&Ib===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?a.r([Pt],a.asCons(a.asCons(a.asCons(t).tail).tail).tail):a.isCons(t)&&Bb===t.head&&a.isCons(t.tail)&&xb===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&qb===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([Hi,a.r([Kb]),a.r([es,Hu])]):a.isCons(t)&&cr===t.head&&a.isCons(t.tail)&&xb===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&kb===a.asCons(a.asCons(t.tail).tail).head&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?a.r([Hi,a.r([Kb]),await a.t(Gb.f(await a.t(Vb.f(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).head)),Pu,Hu))]):t)),a.d("shen.chwild",a.l(async t=>t===ea?a.r([LC,Pu]):a.isCons(t)?a.b(T.f,a.l(async t=>a.b(Vb.f,t)),t):t)),a.d("shen.newpv",a.l(async t=>await(async s=>await(async n=>await(async n=>await(async t=>a.b(Xb.f,s))(a.equate(s,await a.t(Pd.f(n)))&&await a.t(Yb.f(t,s))))(await a.t(Wt.f(Vs.get(),t))))(vs.f(zs.get(),t,s)))(a.asNumber(await a.t(Wt.f(zs.get(),t)))+1))),a.d("shen.resizeprocessvector",a.l(async(t,s)=>await(async n=>await(async a=>vs.f(Vs.get(),t,a))(await a.t(Qb.f(n,a.asNumber(s)+a.asNumber(s),Zb))))(await a.t(Wt.f(Vs.get(),t))))),a.d("shen.resize-vector",a.l(async(t,s,n)=>await(async i=>a.b(Hb.f,t,i,await a.t(Pd.f(t)),s,n))(vs.f(Ss.f(1+a.asNumber(s)),0,s)))),a.d("shen.copy-vector",a.l(async(t,s,n,i,e)=>a.b(ap.f,1+a.asNumber(n),a.asNumber(i)+1,e,await a.t(tp.f(1,t,s,1+a.asNumber(n)))))),a.d("shen.copy-vector-stage-1",a.l((t,s,n,i)=>a.equate(i,t)?n:a.b(tp.f,1+a.asNumber(t),s,vs.f(n,t,a.t(Wt.f(s,t))),i))),a.d("shen.copy-vector-stage-2",a.l((t,s,n,i)=>a.equate(s,t)?i:a.b(ap.f,a.asNumber(t)+1,s,n,vs.f(i,t,n)))),a.d("shen.mk-pvar",a.l(async a=>vs.f(vs.f(Ss.f(2),0,Ny),1,a))),a.d("shen.pvar?",a.l(async t=>a.asShenBool(a.isArray(t)&&await(async()=>{try{return await a.t(Wt.f(t,0))}catch(a){return sp}})()===Ny))),a.d("shen.bindv",a.l((t,s,n)=>(n=>vs.f(n,a.t(Wt.f(t,1)),s))(a.t(Wt.f(Vs.get(),n))))),a.d("shen.unbindv",a.l((t,s)=>(s=>vs.f(s,a.t(Wt.f(t,1)),Zb))(a.t(Wt.f(Vs.get(),s))))),a.d("shen.incinfs",a.l(()=>Ji.set(1+a.asNumber(Ji.get())))),a.d("shen.call_the_continuation",a.l(async(t,s,n)=>a.isCons(t)&&a.isCons(t.head)&&null===t.tail?a.r([a.asCons(a.asCons(t).head).head],await a.t(Ra.f(a.asCons(a.asCons(t).head).tail,a.r([s,n])))):a.isCons(t)&&a.isCons(t.head)?await(async n=>a.r([a.asCons(a.asCons(t).head).head],await a.t(Ra.f(a.asCons(a.asCons(t).head).tail,a.r([s,n])))))(await a.t(np.f(a.asCons(t).tail,s,n))):a.b(Na.f,ip))),a.d("shen.newcontinuation",a.l(async(t,s,n)=>null===t?n:a.isCons(t)&&a.isCons(t.head)?a.r([is,a.r([a.asCons(a.asCons(t).head).head],await a.t(Ra.f(a.asCons(a.asCons(t).head).tail,a.r([s,await a.t(np.f(a.asCons(t).tail,s,n))]))))]):a.b(Na.f,ep))),a.d("return",a.l(async(t,s,n)=>a.b(op.f,t,s))),a.d("shen.measure&return",a.l(async(t,s,n)=>(await a.t(Xa.f(await a.t(e.f(Ji.get()," inferences\n",l)),await a.t(Qa.f()))),a.b(op.f,t,s)))),a.d("unify",a.l(async(t,s,n,i)=>a.b(lp.f,await a.t(rp.f(t,n)),await a.t(rp.f(s,n)),n,i))),a.d("shen.lzy=",a.l(async(t,s,n,i)=>a.equate(s,t)?a.b(Ks.f,i):a.asJsBool(await a.t(fp.f(t)))?a.b(wp.f,t,s,n,i):a.asJsBool(await a.t(fp.f(s)))?a.b(wp.f,s,t,n,i):a.isCons(t)&&a.isCons(s)?a.b(lp.f,await a.t(rp.f(a.asCons(t).head,n)),await a.t(rp.f(a.asCons(s).head,n)),n,a.l(async()=>a.b(lp.f,await a.t(rp.f(a.asCons(t).tail,n)),await a.t(rp.f(a.asCons(s).tail,n)),n,i))):U)),a.d("shen.deref",a.l(async(t,s)=>a.isCons(t)?a.r([await a.t(op.f(t.head,s))],await a.t(op.f(t.tail,s))):a.asJsBool(await a.t(fp.f(t)))?await(async n=>n===Zb?t:a.b(op.f,n,s))(await a.t(cp.f(t,s))):t)),a.d("shen.lazyderef",a.l(async(t,s)=>a.asJsBool(await a.t(fp.f(t)))?await(async n=>n===Zb?t:a.b(rp.f,n,s))(await a.t(cp.f(t,s))):t)),a.d("shen.valvector",a.l((t,s)=>a.b(Wt.f,a.t(Wt.f(Vs.get(),s)),a.t(Wt.f(t,1))))),a.d("unify!",a.l(async(t,s,n,i)=>a.b(hp.f,await a.t(rp.f(t,n)),await a.t(rp.f(s,n)),n,i))),a.d("shen.lzy=!",a.l(async(t,s,n,i)=>a.equate(s,t)?a.b(Ks.f,i):a.asJsBool(await a.t(fp.f(t)))&&!a.asJsBool(await a.t(ab.f(t,await a.t(op.f(s,n)))))?a.b(wp.f,t,s,n,i):a.asJsBool(await a.t(fp.f(s)))&&!a.asJsBool(await a.t(ab.f(s,await a.t(op.f(t,n)))))?a.b(wp.f,s,t,n,i):a.isCons(t)&&a.isCons(s)?a.b(hp.f,await a.t(rp.f(a.asCons(t).head,n)),await a.t(rp.f(a.asCons(s).head,n)),n,a.l(async()=>a.b(hp.f,await a.t(rp.f(a.asCons(t).tail,n)),await a.t(rp.f(a.asCons(s).tail,n)),n,i))):U)),a.d("shen.occurs?",a.l((t,s)=>a.equate(s,t)?V:a.isCons(s)?a.asShenBool(a.asJsBool(a.t(ab.f(t,s.head)))||a.asJsBool(a.t(ab.f(t,s.tail)))):U)),a.d("identical",a.l(async(t,s,n,i)=>a.b(yp.f,await a.t(rp.f(t,n)),await a.t(rp.f(s,n)),n,i))),a.d("shen.lzy==",a.l(async(t,s,n,i)=>a.equate(s,t)?a.b(Ks.f,i):a.isCons(t)&&a.isCons(s)?a.b(yp.f,await a.t(rp.f(a.asCons(t).head,n)),await a.t(rp.f(a.asCons(s).head,n)),n,a.l(async()=>a.b(yp.f,a.asCons(t).tail,a.asCons(s).tail,n,i))):U)),a.d("shen.pvar",a.l(async t=>"Var"+a.asString(await a.t(e.f(await a.t(Wt.f(t,1)),"",l))))),a.d("bind",a.l(async(t,s,n,i)=>(await a.t(dp.f(t,s,n)),await(async s=>(await a.t(Cp.f(t,n)),s))(await a.t(Ks.f(i)))))),a.d("fwhen",a.l(async(t,s,n)=>V===t?a.b(Ks.f,n):U===t?U:a.raise("fwhen expects a boolean: not "+a.asString(await a.t(e.f(t,"%",gs)))))),a.d("call",a.l(async(t,s,n)=>a.isCons(t)?a.b(up.f,await a.t(bp.f(await a.t(rp.f(t.head,s)))),t.tail,s,n):a.asJsBool(await a.t(fp.f(t)))?a.b(pp.f,await a.t(rp.f(t,s)),s,n):U)),a.d("shen.call-help",a.l(async(t,s,n,i)=>null===s?a.b(t,n,i):a.isCons(s)?a.b(up.f,await a.t(t(s.head)),s.tail,n,i):a.b(Na.f,mp))),a.d("shen.intprolog",a.l(async t=>a.isCons(t)&&a.isCons(t.head)?await(async s=>a.b(Sp.f,a.asCons(a.asCons(t).head).head,await a.t(vp.f(a.r([a.asCons(a.asCons(t).head).tail,a.asCons(t).tail]),s)),s))(await a.t(gp.f())):a.b(Na.f,_p))),a.d("shen.intprolog-help",a.l(async(t,s,n)=>a.isCons(s)&&a.isCons(s.tail)&&null===a.asCons(s.tail).tail?a.b(Bp.f,t,a.asCons(s).head,a.asCons(a.asCons(s).tail).head,n):a.b(Na.f,xp))),a.d("shen.intprolog-help-help",a.l(async(t,s,n,i)=>null===s?a.b(t,i,a.l(async()=>a.b(qp.f,n,i))):a.isCons(s)?a.b(Bp.f,await a.t(t(s.head)),s.tail,n,i):a.b(Na.f,jp))),a.d("shen.call-rest",a.l(async(t,s)=>null===t?V:a.isCons(t)&&a.isCons(t.head)&&a.isCons(a.asCons(t.head).tail)?a.b(qp.f,a.r([a.r([await a.t(a.asCons(a.asCons(t).head).head(a.asCons(a.asCons(a.asCons(t).head).tail).head))],a.asCons(a.asCons(a.asCons(t).head).tail).tail)],a.asCons(t).tail),s):a.isCons(t)&&a.isCons(t.head)&&null===a.asCons(t.head).tail?a.b(a.asCons(a.asCons(t).head).head,s,a.l(async()=>a.b(qp.f,a.asCons(t).tail,s))):a.b(Na.f,Jp))),a.d("shen.start-new-prolog-process",a.l(async()=>await(async t=>a.b(Np.f,t))($s.set(1+a.asNumber($s.get()))))),a.d("shen.insert-prolog-variables",a.l(async(t,s)=>a.b(kp.f,t,await a.t(Da.f(t)),s))),a.d("shen.insert-prolog-variables-help",a.l(async(t,s,n)=>null===s?t:a.isCons(s)&&a.asJsBool(await a.t(Oa.f(s.head)))?await(async i=>await(async t=>await(async s=>a.b(kp.f,t,s,n))(await a.t(ms.f(a.asCons(s).head,a.asCons(s).tail))))(await a.t(id.f(i,a.asCons(s).head,t))))(await a.t(Op.f(n))):a.isCons(s)?a.b(kp.f,t,s.tail,n):a.b(Na.f,Ap))),a.d("shen.initialise-prolog",a.l(async t=>await(async a=>await(async a=>t)(vs.f(zs.get(),t,1)))(vs.f(Vs.get(),t,await a.t(Bs.f(await a.t(Us.f(10)),1,10,Zb)))))),a.d("shen.read-char-code",a.l(async t=>a.asInStream(t).read())),a.d("read-file-as-bytelist",a.l(async t=>a.b(Tp.f,t,a.l(async t=>a.asInStream(t).read())))),a.d("shen.read-file-as-charlist",a.l(async t=>a.b(Tp.f,t,a.l(async t=>a.b(Ep.f,t))))),a.d("shen.read-file-as-Xlist",a.l(async(t,s)=>await(async t=>await(async n=>await(async s=>await(async t=>a.b(Jt.f,s))(await a.t(lC.f(t))))(await a.t(Pp.f(t,s,n,null))))(await a.t(s(t))))(await a.t(xd.f(t,tr))))),a.d("shen.read-file-as-Xlist-help",a.l(async(t,s,n,i)=>-1===n?i:a.b(Pp.f,t,s,await a.t(s(t)),a.r([n],i)))),a.d("read-file-as-string",a.l(async t=>await(async t=>a.b(Ip.f,t,await a.t(Ep.f(t)),""))(await a.t(xd.f(t,tr))))),a.d("shen.rfas-h",a.l(async(t,s,n)=>-1===s?(await a.t(lC.f(t)),n):a.b(Ip.f,t,await a.t(Ep.f(t)),a.asString(n)+String.fromCharCode(a.asNumber(s))))),a.d("input",a.l(async t=>a.b(Ba.f,await a.t(fd.f(t))))),a.d("input+",a.l(async(t,s)=>await(async n=>await(async s=>U===await a.t(Fp.f(s,await a.t(q.f(t))))?a.raise("type error: "+a.asString(await a.t(e.f(s," is not of type "+a.asString(await a.t(e.f(t,"\n",wu))),wu)))):a.b(Ba.f,s))(await a.t(fd.f(s))))(await a.t(Lp.f(t))))),a.d("shen.monotype",a.l(async t=>a.isCons(t)?a.b(T.f,a.l(async t=>a.b(Lp.f,t)),t):a.asJsBool(await a.t(Oa.f(t)))?a.raise("input+ expects a monotype: not "+a.asString(await a.t(e.f(t,"\n",l)))):t)),a.d("read",a.l(async t=>a.asCons(await a.t(Dp.f(t,await a.t(Ep.f(t)),null))).head)),a.d("it",a.l(()=>Mp.get())),a.d("shen.read-loop",a.l(async(s,n,i)=>94===n?a.raise("read aborted"):-1===n?a.asJsBool(await a.t(ut.f(i)))?a.raise("error: empty stream"):a.b(t.f,a.l(async t=>a.b(Rp.f,t)),i,a.l(async a=>a)):a.asJsBool(await a.t($p.f(n)))?await(async n=>await(async i=>await(async t=>t===Up||a.asJsBool(await a.t(ut.f(t)))?a.b(Dp.f,s,await a.t(Ep.f(s)),n):t)(await a.t(t.f(a.l(async t=>a.b(Rp.f,t)),n,a.l(async a=>Up)))))(await a.t(zp.f(n))))(await a.t(Ra.f(i,a.r([n])))):a.b(Dp.f,s,await a.t(Ep.f(s)),await a.t(Ra.f(i,a.r([n])))))),a.d("shen.terminator?",a.l(async t=>a.b(m.f,t,a.r([9,10,13,32,34,41,93])))),a.d("lineread",a.l(async t=>a.b(Vp.f,await a.t(Ep.f(t)),null,t))),a.d("shen.lineread-loop",a.l(async(s,n,i)=>-1===s?a.asJsBool(await a.t(ut.f(n)))?a.raise("empty stream"):a.b(t.f,a.l(async t=>a.b(Rp.f,t)),n,a.l(async a=>a)):a.equate(s,await a.t(Wp.f()))?a.raise("line read aborted"):a.asJsBool(await a.t(m.f(s,a.r([await a.t(Kp.f()),await a.t(Gp.f())]))))?await(async t=>await(async e=>t===Yp||a.asJsBool(await a.t(ut.f(t)))?a.b(Vp.f,await a.t(Ep.f(i)),await a.t(Ra.f(n,a.r([s]))),i):t)(await a.t(zp.f(n))))(await a.t(t.f(a.l(async t=>a.b(Rp.f,t)),n,a.l(async a=>Yp)))):a.b(Vp.f,await a.t(Ep.f(i)),await a.t(Ra.f(n,a.r([s]))),i))),a.d("shen.record-it",a.l(async t=>await(async t=>await(async t=>await(async t=>a.b(Qp.f,t))(await a.t(Jt.f(t))))(await a.t(Xp.f(await a.t(Jt.f(t))))))(await a.t(Xp.f(t))))),a.d("shen.trim-whitespace",a.l(async t=>a.isCons(t)&&a.asJsBool(await a.t(m.f(t.head,a.r([9,10,13,32]))))?a.b(Xp.f,a.asCons(t).tail):t)),a.d("shen.record-it-h",a.l(async t=>(Mp.set(await a.t(Zp.f(await a.t(T.f(a.l(async t=>String.fromCharCode(a.asNumber(t))),t))))),t))),a.d("shen.cn-all",a.l(async t=>null===t?"":a.isCons(t)?a.asString(t.head)+a.asString(await a.t(Zp.f(t.tail))):a.b(Na.f,Hp))),a.d("read-file",a.l(async s=>await(async s=>a.b(t.f,a.l(async t=>a.b(Rp.f,t)),s,a.l(async t=>a.b(tm.f,t))))(await a.t(am.f(s))))),a.d("read-from-string",a.l(async s=>await(async s=>a.b(t.f,a.l(async t=>a.b(Rp.f,t)),s,a.l(async t=>a.b(tm.f,t))))(await a.t(T.f(a.l(async t=>a.asNeString(t).charCodeAt(0)),await a.t(Hd.f(s))))))),a.d("shen.read-error",a.l(async t=>a.isCons(t)&&a.isCons(t.head)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.raise("read error here:\n\n "+a.asString(await a.t(e.f(await a.t(sm.f(50,a.asCons(t).head)),"\n",l)))):a.raise("read error\n"))),a.d("shen.compress-50",a.l(async(t,s)=>null===s?"":0===t?"":a.isCons(s)?String.fromCharCode(a.asNumber(s.head))+a.asString(await a.t(sm.f(a.asNumber(t)-1,s.tail))):a.b(Na.f,nm))),a.d("shen.<st_input>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,await a.t(d.f(t)))))(await a.t(Rp.f(t))))(await a.t(Sm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(kd.f(await a.t(d.f(t))))],await a.t(d.f(s))))))(await a.t(Rp.f(t))))(await a.t(gm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,await a.t(d.f(t)))))(await a.t(Rp.f(t))))(await a.t(mm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([a.symbolOf(",")],await a.t(d.f(t))))))(await a.t(Rp.f(t))))(await a.t(pm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([Nt],await a.t(d.f(t))))))(await a.t(Rp.f(t))))(await a.t(Cm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([rl],await a.t(d.f(t))))))(await a.t(Rp.f(t))))(await a.t(bm.f(t))))(await a.t(Cm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([$a],await a.t(d.f(t))))))(await a.t(Rp.f(t))))(await a.t(um.f(t))))(await a.t(Cm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([bl],await a.t(d.f(t))))))(await a.t(Rp.f(t))))(await a.t(dm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([k],await a.t(d.f(t))))))(await a.t(Rp.f(t))))(await a.t(ym.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([x],await a.t(d.f(t))))))(await a.t(Rp.f(t))))(await a.t(hm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([_],await a.t(d.f(t))))))(await a.t(Rp.f(t))))(await a.t(cm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,await a.t(wm.f(await a.t(kd.f(await a.t(d.f(t)))),await a.t(d.f(s)))))))(await a.t(lm.f(s))))(await a.t(fm.f(t))))(await a.t(em.f(t))))(await a.t(rm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(kd.f(await a.t(Ju.f(await a.t(d.f(t))))))],await a.t(d.f(s))))))(await a.t(lm.f(s))))(await a.t(om.f(t))))(await a.t(em.f(t))))(await a.t(im.f(t)))))),a.d("shen.<lsb>",a.l(async t=>a.isCons(a.asCons(t).head)&&91===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<rsb>",a.l(async t=>a.isCons(a.asCons(t).head)&&93===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<lcurly>",a.l(async t=>a.isCons(a.asCons(t).head)&&123===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<rcurly>",a.l(async t=>a.isCons(a.asCons(t).head)&&125===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<bar>",a.l(async t=>a.isCons(a.asCons(t).head)&&124===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<semicolon>",a.l(async t=>a.isCons(a.asCons(t).head)&&59===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<colon>",a.l(async t=>a.isCons(a.asCons(t).head)&&58===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<comma>",a.l(async t=>a.isCons(a.asCons(t).head)&&44===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<equal>",a.l(async t=>a.isCons(a.asCons(t).head)&&61===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<minus>",a.l(async t=>a.isCons(a.asCons(t).head)&&45===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<lrb>",a.l(async t=>a.isCons(a.asCons(t).head)&&40===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<rrb>",a.l(async t=>a.isCons(a.asCons(t).head)&&41===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<atom>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,"<>"===await a.t(d.f(t))?a.r([ta,0]):a.symbolOf(a.asString(await a.t(d.f(t))))))(await a.t(xm.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,await a.t(d.f(t)))))(await a.t(Bm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,await a.t(_m.f(await a.t(d.f(t)))))))(await a.t(vm.f(t)))))),a.d("shen.control-chars",a.l(async t=>null===t?"":a.isCons(t)&&"c"===t.head&&a.isCons(t.tail)&&"#"===a.asCons(t.tail).head?await(async s=>await(async t=>a.b(Ty.f,String.fromCharCode(a.asNumber(await a.t(Jm.f(s)))),await a.t(_m.f(t))))(await a.t(jm.f(a.asCons(a.asCons(t).tail).tail))))(await a.t(qm.f(a.asCons(a.asCons(t).tail).tail))):a.isCons(t)?a.b(Ty.f,t.head,await a.t(_m.f(t.tail))):a.b(Na.f,Nm))),a.d("shen.code-point",a.l(async t=>a.isCons(t)&&";"===t.head?"":a.isCons(t)&&a.asJsBool(await a.t(m.f(t.head,a.r(["0","1","2","3","4","5","6","7","8","9","0"]))))?a.r([a.asCons(t).head],await a.t(qm.f(a.asCons(t).tail))):a.raise("code point parse error "+a.asString(await a.t(e.f(t,"\n",l)))))),a.d("shen.after-codepoint",a.l(async t=>null===t?null:a.isCons(t)&&";"===t.head?a.asCons(t).tail:a.isCons(t)?a.b(jm.f,t.tail):a.b(Na.f,km))),a.d("shen.decimalise",a.l(async t=>a.b(Om.f,await a.t(Jt.f(await a.t(Am.f(t)))),0))),a.d("shen.digits->integers",a.l(t=>a.isCons(t)&&"0"===t.head?a.r([0],a.t(Am.f(a.asCons(t).tail))):a.isCons(t)&&"1"===t.head?a.r([1],a.t(Am.f(a.asCons(t).tail))):a.isCons(t)&&"2"===t.head?a.r([2],a.t(Am.f(a.asCons(t).tail))):a.isCons(t)&&"3"===t.head?a.r([3],a.t(Am.f(a.asCons(t).tail))):a.isCons(t)&&"4"===t.head?a.r([4],a.t(Am.f(a.asCons(t).tail))):a.isCons(t)&&"5"===t.head?a.r([5],a.t(Am.f(a.asCons(t).tail))):a.isCons(t)&&"6"===t.head?a.r([6],a.t(Am.f(a.asCons(t).tail))):a.isCons(t)&&"7"===t.head?a.r([7],a.t(Am.f(a.asCons(t).tail))):a.isCons(t)&&"8"===t.head?a.r([8],a.t(Am.f(a.asCons(t).tail))):a.isCons(t)&&"9"===t.head?a.r([9],a.t(Am.f(a.asCons(t).tail))):null)),a.d("shen.<sym>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):a.b(h.f,a.asCons(s).head,await a.t(Ty.f(await a.t(d.f(t)),await a.t(d.f(s))))))(await a.t(Em.f(t))))(await a.t(Tm.f(t))))),a.d("shen.<alphanums>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,""))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,await a.t(Ty.f(await a.t(d.f(t)),await a.t(d.f(s)))))))(await a.t(Em.f(t))))(await a.t(Pm.f(t)))))),a.d("shen.<alphanum>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(d.f(t))))(await a.t(Im.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,await a.t(d.f(t)))))(await a.t(Tm.f(t)))))),a.d("shen.<num>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(Lm.f(s)))?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,String.fromCharCode(a.asNumber(s))):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.numbyte?",a.l(a=>48===a?V:49===a?V:50===a?V:51===a?V:52===a?V:53===a?V:54===a?V:55===a?V:56===a?V:57===a?V:U)),a.d("shen.<alpha>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(Fm.f(s)))?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,String.fromCharCode(a.asNumber(s))):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.symbol-code?",a.l(async t=>a.asShenBool(126===t||a.asNumber(t)>94&&a.asNumber(t)<123||a.asNumber(t)>59&&a.asNumber(t)<91||a.asNumber(t)>41&&a.asNumber(t)<58&&!(44===t)||a.asNumber(t)>34&&a.asNumber(t)<40||33===t))),a.d("shen.<str>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):a.b(h.f,a.asCons(s).head,await a.t(d.f(t))))(await a.t(Dm.f(t))))(await a.t(Mm.f(t))))(await a.t(Dm.f(t))))),a.d("shen.<dbq>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>34===s?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<strcontents>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(Mm.f(t))))(await a.t(Rm.f(t)))))),a.d("shen.<byte>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,String.fromCharCode(a.asNumber(s))))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<strc>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>34!==s?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,String.fromCharCode(a.asNumber(s))):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<number>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(Om.f(await a.t(Jt.f(await a.t(d.f(t)))),0))))(await a.t(Xm.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.asNumber(await a.t(Om.f(await a.t(Jt.f(await a.t(d.f(t)))),0)))+a.asNumber(await a.t(Ym.f(await a.t(d.f(s)),1))))))(await a.t(Vm.f(s))))(await a.t(Um.f(t))))(await a.t(zm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.asNumber(await a.t(Gm.f(10,await a.t(d.f(s)))))*a.asNumber(await a.t(Om.f(await a.t(Jt.f(await a.t(d.f(t)))),0))))))(await a.t(Km.f(s))))(await a.t(Wm.f(t))))(await a.t(Xm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await a.t(h.f(a.asCons(n).head,a.asNumber(await a.t(Gm.f(10,await a.t(d.f(n)))))*(a.asNumber(await a.t(Om.f(await a.t(Jt.f(await a.t(d.f(t)))),0)))+a.asNumber(await a.t(Ym.f(await a.t(d.f(s)),1)))))))(await a.t(Km.f(n))))(await a.t(Wm.f(s))))(await a.t(Vm.f(s))))(await a.t(Um.f(t))))(await a.t(zm.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,await a.t(d.f(t)))))(await a.t(Bm.f(t))))(await a.t($m.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,0-a.asNumber(await a.t(d.f(t))))))(await a.t(Bm.f(t))))(await a.t(bm.f(t)))))),a.d("shen.<E>",a.l(async t=>a.isCons(a.asCons(t).head)&&101===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<log10>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(Om.f(await a.t(Jt.f(await a.t(d.f(t)))),0))))(await a.t(Xm.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,0-a.asNumber(await a.t(Om.f(await a.t(Jt.f(await a.t(d.f(t)))),0))))))(await a.t(Xm.f(t))))(await a.t(bm.f(t)))))),a.d("shen.<plus>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>43===s?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<stop>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>46===s?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<predigits>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,await a.t(d.f(t)))))(await a.t(Xm.f(t)))))),a.d("shen.<postdigits>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(d.f(t))))(await a.t(Xm.f(t))))),a.d("shen.<digits>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,a.r([await a.t(d.f(t))])))(await a.t(Qm.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(Xm.f(t))))(await a.t(Qm.f(t)))))),a.d("shen.<digit>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(Lm.f(s)))?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,await a.t(Zm.f(s))):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.byte->digit",a.l(async t=>48===t?0:49===t?1:50===t?2:51===t?3:52===t?4:53===t?5:54===t?6:55===t?7:56===t?8:57===t?9:a.b(Na.f,Hm))),a.d("shen.pre",a.l(async(t,s)=>null===t?0:a.isCons(t)?a.asNumber(await a.t(Gm.f(10,s)))*a.asNumber(t.head)+a.asNumber(await a.t(Om.f(t.tail,a.asNumber(s)+1))):a.b(Na.f,ag))),a.d("shen.post",a.l(async(t,s)=>null===t?0:a.isCons(t)?a.asNumber(await a.t(Gm.f(10,0-a.asNumber(s))))*a.asNumber(t.head)+a.asNumber(await a.t(Ym.f(t.tail,a.asNumber(s)+1))):a.b(Na.f,tg))),a.d("shen.expt",a.l((t,s)=>0===s?1:a.asNumber(s)>0?a.asNumber(t)*a.asNumber(a.t(Gm.f(t,a.asNumber(s)-1))):a.asNumber(a.t(Gm.f(t,a.asNumber(s)+1)))/a.asNzNumber(t)*1)),a.d("shen.<st_input1>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(d.f(t))))(await a.t(Rp.f(t))))),a.d("shen.<st_input2>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(d.f(t))))(await a.t(Rp.f(t))))),a.d("shen.<comment>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,ha))(await a.t(ng.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,ha)))(await a.t(sg.f(t)))))),a.d("shen.<singleline>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,ha))(await a.t(og.f(t))))(await a.t(eg.f(t))))(await a.t(ig.f(t))))(await a.t(ig.f(t))))),a.d("shen.<backslash>",a.l(async t=>a.isCons(a.asCons(t).head)&&92===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<anysingle>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,ha))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,ha)))(await a.t(eg.f(t))))(await a.t(lg.f(t)))))),a.d("shen.<non-return>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(m.f(s,a.r([10,13]))))?a.b(f.f):a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,ha))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<return>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(m.f(s,a.r([10,13]))))?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,ha):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<multiline>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,ha))(await a.t(fg.f(t))))(await a.t(rg.f(t))))(await a.t(ig.f(t))))),a.d("shen.<times>",a.l(async t=>a.isCons(a.asCons(t).head)&&42===await a.t(C.f(t))?await(async t=>a.b(h.f,a.asCons(t).head,ha))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f))),a.d("shen.<anymulti>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?a.isCons(a.asCons(t).head)?await(async s=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,ha))(await a.t(fg.f(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))))))(await a.t(C.f(t))):a.b(f.f):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,ha)))(await a.t(ig.f(t))))(await a.t(rg.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,ha)))(await a.t(fg.f(t))))(await a.t(mm.f(t)))))),a.d("shen.<whitespaces>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,ha))(await a.t(wg.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,ha)))(await a.t(Sm.f(t))))(await a.t(wg.f(t)))))),a.d("shen.<whitespace>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await(async t=>a.asShenBool(32===t||13===t||10===t||9===t))(s))?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,ha):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.cons_form",a.l(async t=>null===t?null:a.isCons(t)&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&a.asCons(t.tail).head===k?a.r([Z,a.asCons(t).head],a.asCons(a.asCons(t).tail).tail):a.isCons(t)?a.r([Z,t.head,await a.t(Ju.f(t.tail))]):a.b(Na.f,cg))),a.d("shen.package-macro",a.l(async(t,s)=>a.isCons(t)&&Tl===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(Ra.f,await a.t(Hd.f(a.asCons(a.asCons(t).tail).head)),s):a.isCons(t)&&ds===t.head&&a.isCons(t.tail)&&Gl===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)?a.b(Ra.f,a.asCons(a.asCons(a.asCons(t).tail).tail).tail,s):a.isCons(t)&&ds===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)?await(async n=>await(async i=>await(async i=>await(async e=>await(async n=>await(async t=>a.b(Ra.f,n,s))(await a.t(dg.f(a.asCons(a.asCons(t).tail).head,await a.t(Cg.f(e,n))))))(await a.t(yg.f(i,n,a.asCons(a.asCons(a.asCons(t).tail).tail).tail,e))))(await a.t(Hd.f(i))))(a.symbolOf(a.show(a.asCons(a.asCons(t).tail).head)+".")))(await a.t(hg.f(n,a.asCons(a.asCons(t).tail).head))))(await a.t(dC.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head))):a.r([t],s))),a.d("shen.record-exceptions",a.l(async(t,s)=>await(async n=>await(async t=>a.b(ya.f,s,S,t,v.get()))(await a.t(Aa.f(t,n))))(await(async()=>{try{return await a.t(g.f(s,S,v.get()))}catch(a){return null}})()))),a.d("shen.record-internal",a.l(async(t,s)=>a.b(ya.f,t,ug,await a.t(Aa.f(s,await(async()=>{try{return await a.t(g.f(t,ug,v.get()))}catch(a){return null}})())),v.get()))),a.d("shen.internal-symbols",a.l(async(t,s)=>a.asJsBool(await a.t(b.f(s)))&&a.asJsBool(await a.t(bg.f(t,await a.t(Hd.f(s)))))?a.r([s]):a.isCons(s)?a.b(Aa.f,await a.t(Cg.f(t,s.head)),await a.t(Cg.f(t,s.tail))):null)),a.d("shen.packageh",a.l(async(t,s,n,i)=>a.isCons(n)?a.r([await a.t(yg.f(t,s,n.head,i))],await a.t(yg.f(t,s,n.tail,i))):a.asJsBool(await a.t(p.f(n)))||a.asJsBool(await a.t(Oa.f(n)))||a.asJsBool(await a.t(m.f(n,s)))||a.asJsBool(await a.t(pg.f(n)))||a.asJsBool(await a.t(mg.f(n)))?n:a.asJsBool(await a.t(b.f(n)))&&a.asJsBool(await(async t=>a.asShenBool(!a.asJsBool(await a.t(bg.f(a.r(["s","h","e","n","."]),t)))&&!a.asJsBool(await a.t(bg.f(i,t)))))(await a.t(Hd.f(n))))?a.b(eC.f,t,n):n)),a.d("shen.datatype-error",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.raise("datatype syntax error here:\n\n "+a.asString(await a.t(e.f(await a.t(o.f(50,a.asCons(t).head)),"\n",l)))):a.b(Na.f,xy))),a.d("shen.<datatype-rules>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(Sg.f(t))))(await a.t(gg.f(t)))))),a.d("shen.<datatype-rule>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):await(async n=>a.equate(await a.t(f.f()),n)?a.b(f.f):await(async n=>a.equate(await a.t(f.f()),n)?a.b(f.f):a.b(h.f,a.asCons(n).head,await a.t(qg.f(Ng,a.r([await a.t(d.f(t)),await a.t(d.f(s)),await a.t(d.f(n))])))))(await a.t(xg.f(n))))(await a.t(Jg.f(s))))(await a.t(_g.f(t))))(await a.t(vg.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await a.t(h.f(a.asCons(n).head,await a.t(qg.f(jg,a.r([await a.t(d.f(t)),await a.t(d.f(s)),await a.t(d.f(n))]))))))(await a.t(xg.f(n))))(await a.t(Bg.f(s))))(await a.t(_g.f(t))))(await a.t(vg.f(t)))))),a.d("shen.<side-conditions>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(vg.f(t))))(await a.t(kg.f(t)))))),a.d("shen.<side-condition>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?a.isCons(a.asCons(t).head)&&Pa===await a.t(C.f(t))?await(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):a.b(h.f,a.asCons(s).head,a.r([Pa,await a.t(d.f(t)),await a.t(d.f(s))])))(await a.t(Og.f(t))))(await a.t(Ag.f(t))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):a.b(f.f):s)(a.isCons(a.asCons(t).head)&&Ht===await a.t(C.f(t))?await(async t=>await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([Ht,await a.t(d.f(t))]))))(await a.t(Og.f(t))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):await a.t(f.f())))),a.d("shen.<variable?>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(Oa.f(s)))?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<expr>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(m.f(s,a.r([El,bl]))))||a.asJsBool(await a.t(mg.f(s)))||a.asJsBool(await a.t(pg.f(s)))?a.b(f.f):a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,await a.t(Tg.f(s))))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.remove-bar",a.l(t=>a.isCons(t)&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&a.asCons(t.tail).head===k?a.r([a.asCons(t).head],a.asCons(a.asCons(a.asCons(t).tail).tail).head):a.isCons(t)?a.r([a.t(Tg.f(t.head))],a.t(Tg.f(t.tail))):t)),a.d("shen.<premises>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(_g.f(s))))(await a.t(Pg.f(t))))(await a.t(Eg.f(t)))))),a.d("shen.<semicolon-symbol>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>s===bl?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,ha):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<premise>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(qg.f(null,await a.t(d.f(t))))))(await a.t(Lg.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):a.isCons(a.asCons(t).head)&&El===await a.t(C.f(t))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,await a.t(qg.f(await a.t(d.f(t)),await a.t(d.f(s)))))))(await a.t(Lg.f(s))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):await a.t(f.f()))(await a.t(Ig.f(t)))):s)(a.isCons(a.asCons(t).head)&&dl===await a.t(C.f(t))?await(async t=>await a.t(h.f(a.asCons(t).head,dl)))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):await a.t(f.f())))),a.d("shen.<conclusion>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):a.b(h.f,a.asCons(s).head,await a.t(qg.f(null,await a.t(d.f(t))))))(await a.t(Pg.f(t))))(await a.t(Lg.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):a.isCons(a.asCons(t).head)&&El===await a.t(C.f(t))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async n=>a.equate(await a.t(f.f()),n)?await a.t(f.f()):await a.t(h.f(a.asCons(n).head,await a.t(qg.f(await a.t(d.f(t)),await a.t(d.f(s)))))))(await a.t(Pg.f(s))))(await a.t(Lg.f(s))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):await a.t(f.f()))(await a.t(Ig.f(t)))))),a.d("shen.sequent",a.l((t,s)=>a.b(Ay.f,t,s))),a.d("shen.<formulae>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,null))(await a.t(E.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await a.t(h.f(a.asCons(t).head,a.r([await a.t(d.f(t))]))))(await a.t(Lg.f(t)))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(Ig.f(s))))(await a.t(Fg.f(t))))(await a.t(Lg.f(t)))))),a.d("shen.<comma-symbol>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>s===a.symbolOf(",")?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,ha):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<formula>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(d.f(t))))(await a.t(Og.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):a.isCons(a.asCons(t).head)&&Nt===await a.t(C.f(t))?await(async s=>await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(Mg.f(await a.t(d.f(t)))),Nt,await a.t(q.f(await a.t(d.f(s))))]))))(await a.t(Dg.f(s))))(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))):await a.t(f.f()))(await a.t(Og.f(t)))))),a.d("shen.<type>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,await a.t(j.f(await a.t(d.f(t))))))(await a.t(Og.f(t))))),a.d("shen.<doubleunderline>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(pg.f(s)))?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.<singleunderline>",a.l(async t=>a.isCons(a.asCons(t).head)?await(async s=>a.asJsBool(await a.t(mg.f(s)))?a.b(h.f,a.asCons(await a.t(h.f(await a.t(u.f(t)),await a.t(d.f(t))))).head,s):a.b(f.f))(await a.t(C.f(t))):a.b(f.f))),a.d("shen.singleunderline?",a.l(async t=>a.asShenBool(a.asJsBool(await a.t(b.f(t)))&&a.asJsBool(await a.t(Rg.f(a.show(t))))))),a.d("shen.sh?",a.l(t=>"_"===t?V:a.asShenBool("_"===_d.f(t,0)&&a.asJsBool(a.t(Rg.f(a.asNeString(t).substring(1))))))),a.d("shen.doubleunderline?",a.l(async t=>a.asShenBool(a.asJsBool(await a.t(b.f(t)))&&a.asJsBool(await a.t($g.f(a.show(t))))))),a.d("shen.dh?",a.l(t=>"="===t?V:a.asShenBool("="===_d.f(t,0)&&a.asJsBool(a.t($g.f(a.asNeString(t).substring(1))))))),a.d("shen.process-datatype",a.l(async(t,s)=>a.b(zg.f,await a.t(Ug.f(await a.t(Vg.f(t,s))))))),a.d("shen.remember-datatype",a.l(async t=>a.isCons(t)?(bi.set(await a.t(ys.f(t.head,bi.get()))),pi.set(await a.t(ys.f(t.head,pi.get()))),t.head):a.b(Na.f,Wg))),a.d("shen.rules->horn-clauses",a.l(async(t,s)=>null===s?null:a.isCons(s)&&a.asJsBool(await a.t(Qy.f(s.head)))&&jg===await a.t(Gd.f(s.head))?a.r([await a.t(Kg.f(t,await a.t(rd.f(a.asCons(s).head))))],await a.t(Vg.f(t,a.asCons(s).tail))):a.isCons(s)&&a.asJsBool(await a.t(Qy.f(s.head)))&&Ng===await a.t(Gd.f(s.head))?a.b(Vg.f,t,await a.t(Ra.f(await a.t(Gg.f(await a.t(rd.f(a.asCons(s).head)))),a.asCons(s).tail))):a.b(Na.f,Yg))),a.d("shen.double->singles",a.l(async t=>a.r([await a.t(Xg.f(t)),await a.t(Qg.f(t))]))),a.d("shen.right-rule",a.l(t=>a.b(Ay.f,jg,t))),a.d("shen.left-rule",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.asJsBool(await a.t(Qy.f(a.asCons(a.asCons(t.tail).tail).head)))&&null===await a.t(Gd.f(a.asCons(a.asCons(t.tail).tail).head))&&null===a.asCons(a.asCons(t.tail).tail).tail?await(async s=>await(async n=>await(async s=>a.b(Ay.f,jg,a.r([a.asCons(t).head,s,n])))(a.r([await a.t(Ay.f(await a.t(T.f(a.l(async t=>a.b(Hg.f,t)),a.asCons(a.asCons(t).tail).head)),s))])))(await a.t(Ay.f(a.r([await a.t(rd.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head))]),s))))(await a.t(oa.f(Zg))):a.b(Na.f,aS))),a.d("shen.right->left",a.l(async t=>a.asJsBool(await a.t(Qy.f(t)))&&null===await a.t(Gd.f(t))?a.b(rd.f,t):a.raise("syntax error with ==========\n"))),a.d("shen.rule->horn-clause",a.l(async(t,s)=>a.isCons(s)&&a.isCons(s.tail)&&a.isCons(a.asCons(s.tail).tail)&&a.asJsBool(await a.t(Qy.f(a.asCons(a.asCons(s.tail).tail).head)))&&null===a.asCons(a.asCons(s.tail).tail).tail?a.r([await a.t(tS.f(t,await a.t(rd.f(a.asCons(a.asCons(a.asCons(s).tail).tail).head)))),rl,await a.t(sS.f(a.asCons(s).head,a.asCons(a.asCons(s).tail).head,await a.t(Gd.f(a.asCons(a.asCons(a.asCons(s).tail).tail).head))))]):a.b(Na.f,nS))),a.d("shen.rule->horn-clause-head",a.l(async(t,s)=>a.r([t,await a.t(iS.f(s)),eS]))),a.d("shen.mode-ify",a.l(t=>a.isCons(t)&&a.isCons(t.tail)&&Nt===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([Yl,a.r([a.asCons(t).head,Nt,a.r([Yl,a.asCons(a.asCons(a.asCons(t).tail).tail).head,ol])]),rl]):t)),a.d("shen.rule->horn-clause-body",a.l(async(t,s,n)=>await(async i=>await(async e=>await(async o=>await(async i=>await(async t=>await(async s=>a.b(Ra.f,o,await a.t(Ra.f(t,s))))(await a.t(T.f(a.l(async t=>a.b(cS.f,t,await a.t(ut.f(n)))),s))))(await a.t(wS.f(t))))(await a.t(fS.f(e,n,i))))(await a.t(lS.f(e,i,eS,rS))))(await a.t(T.f(a.l(async t=>a.b(oa.f,oS)),n))))(await a.t(T.f(a.l(async t=>a.b(qa.f,t)),n))))),a.d("shen.construct-search-literals",a.l(async(t,s,n,i)=>null===t&&null===s?null:a.b(hS.f,t,s,n,i))),a.d("shen.csl-help",a.l(async(t,s,n,i)=>null===t&&null===s?a.r([a.r([hr,yS,n])]):a.isCons(t)&&a.isCons(s)?a.r([a.r([a.asCons(t).head,n,i],a.asCons(s).head)],await a.t(hS.f(a.asCons(t).tail,a.asCons(s).tail,i,await a.t(oa.f(dS))))):a.b(Na.f,CS))),a.d("shen.construct-search-clauses",a.l(async(t,s,n)=>null===t&&null===s&&null===n?ha:a.isCons(t)&&a.isCons(s)&&a.isCons(n)?(await a.t(uS.f(a.asCons(t).head,a.asCons(s).head,a.asCons(n).head)),a.b(fS.f,a.asCons(t).tail,a.asCons(s).tail,a.asCons(n).tail)):a.b(Na.f,bS))),a.d("shen.construct-search-clause",a.l(async(t,s,n)=>a.b(Ug.f,a.r([await a.t(pS.f(t,s,n)),await a.t(mS.f(t,s,n))])))),a.d("shen.construct-base-search-clause",a.l(async(t,s,n)=>a.r([a.r([t,a.r([await a.t(iS.f(s))],gS),gS],n),rl,null]))),a.d("shen.construct-recursive-search-clause",a.l((t,s,n)=>a.r([a.r([t,a.r([vS],SS),a.r([vS],_S)],n),rl,a.r([a.r([t,SS,_S],n)])]))),a.d("shen.construct-side-literals",a.l(async t=>null===t?null:a.isCons(t)&&a.isCons(t.head)&&Ht===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&null===a.asCons(a.asCons(t.head).tail).tail?a.r([a.r([Pl],a.asCons(a.asCons(t).head).tail)],await a.t(wS.f(a.asCons(t).tail))):a.isCons(t)&&a.isCons(t.head)&&Pa===a.asCons(t.head).head&&a.isCons(a.asCons(t.head).tail)&&a.isCons(a.asCons(a.asCons(t.head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.head).tail).tail).tail?a.r([a.r([ar],a.asCons(a.asCons(t).head).tail)],await a.t(wS.f(a.asCons(t).tail))):a.isCons(t)?a.b(wS.f,t.tail):a.b(Na.f,BS))),a.d("shen.construct-premiss-literal",a.l(async(t,s)=>a.asJsBool(await a.t(Qy.f(t)))?a.r([xS,await a.t(qS.f(await a.t(rd.f(t)))),await a.t(jS.f(s,await a.t(Gd.f(t))))]):dl===t?a.r([fr,tb]):a.b(Na.f,JS))),a.d("shen.construct-context",a.l(async(t,s)=>V===t&&null===s?eS:U===t&&null===s?yS:a.isCons(s)?a.r([Z,await a.t(qS.f(s.head)),await a.t(jS.f(t,s.tail))]):a.b(Na.f,NS))),a.d("shen.recursive_cons_form",a.l(t=>a.isCons(t)?a.r([Z,a.t(qS.f(t.head)),a.t(qS.f(t.tail))]):t)),a.d("preclude",a.l(async t=>a.b(kS.f,await a.t(T.f(a.l(async t=>a.b($C.f,t)),t))))),a.d("shen.preclude-h",a.l(async t=>await(async a=>bi.get())(bi.set(await a.t(sC.f(bi.get(),t)))))),a.d("include",a.l(async t=>a.b(OS.f,await a.t(T.f(a.l(async t=>a.b($C.f,t)),t))))),a.d("shen.include-h",a.l(async t=>await(async t=>await(async a=>bi.get())(bi.set(await a.t(Aa.f(t,bi.get())))))(await a.t(Id.f(t,pi.get()))))),a.d("preclude-all-but",a.l(async t=>a.b(kS.f,await a.t(sC.f(pi.get(),await a.t(T.f(a.l(async t=>a.b($C.f,t)),t))))))),a.d("include-all-but",a.l(async t=>a.b(OS.f,await a.t(sC.f(pi.get(),await a.t(T.f(a.l(async t=>a.b($C.f,t)),t))))))),a.d("shen.synonyms-help",a.l(async t=>null===t?a.b(AS.f,Ms.get(),await a.t(Ad.f(a.l(async t=>a.b(TS.f,t)),gi.get()))):a.isCons(t)&&a.isCons(t.tail)?await(async s=>a.asJsBool(await a.t(ut.f(s)))?(await a.t(ES.f(a.r([a.asCons(t).head,a.asCons(a.asCons(t).tail).head]),PS)),a.b(IS.f,a.asCons(a.asCons(t).tail).tail)):a.b(Ja.f,a.asCons(a.asCons(t).tail).head,s))(await a.t(sC.f(await a.t(qa.f(a.asCons(a.asCons(t).tail).head)),await a.t(qa.f(a.asCons(t).head))))):a.raise("odd number of synonyms\n"))),a.d("shen.pushnew",a.l(async(t,s)=>a.asJsBool(await a.t(m.f(t,a.valueOf(a.nameOf(a.asSymbol(s))))))?a.valueOf(a.nameOf(a.asSymbol(s))):a.c(a.nameOf(a.asSymbol(s))).set(a.r([t],a.valueOf(a.nameOf(a.asSymbol(s))))))),a.d("shen.demod-rule",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.r([await a.t(UC.f(a.asCons(t).head)),F,await a.t(UC.f(a.asCons(a.asCons(t).tail).head))]):a.b(Na.f,LS))),a.d("shen.lambda-of-defun",a.l(async t=>a.isCons(t)&&ht===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).head)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).head).tail&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?a.b(tC.f,a.r([tt,a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).head).head],a.asCons(a.asCons(a.asCons(t).tail).tail).tail)):a.b(Na.f,FS))),a.d("shen.update-demodulation-function",a.l(async(t,s)=>(await a.t(Hy.f(rl)),Ws.set(await a.t(DS.f(await a.t(MS.f(a.r([wi,$S],await a.t(Ra.f(s,await a.t(RS.f()))))))))),a.asJsBool(t)&&await a.t(Hy.f(ol)),Rl))),a.d("shen.default-rule",a.l(()=>a.r([ii,F,ii]))),a.d("thaw",a.l(async t=>a.b(t))),a.d("eval",a.l(async t=>await(async t=>a.asJsBool(await a.t(zS.f(t)))?a.b(T.f,a.l(async t=>a.b(dC.f,t)),await a.t(US.f(t))):a.b(dC.f,t))(await a.t(NC.f(a.l(async t=>a.b(kd.f,t)),t))))),a.d("shen.eval-without-macros",a.l(async t=>a.b(Ba.f,await a.t(MS.f(await a.t(VS.f(t))))))),a.d("shen.proc-input+",a.l(async t=>a.isCons(t)&&hi===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([hi,await a.t(UC.f(a.asCons(a.asCons(t).tail).head))],a.asCons(a.asCons(t).tail).tail):a.isCons(t)&&di===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([di,await a.t(UC.f(a.asCons(a.asCons(t).tail).head))],a.asCons(a.asCons(t).tail).tail):a.isCons(t)?a.b(T.f,a.l(async t=>a.b(VS.f,t)),t):t)),a.d("shen.elim-def",a.l(async t=>a.isCons(t)&&wi===t.head&&a.isCons(t.tail)?a.b(WS.f,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(t).tail).tail):a.isCons(t)&&Ci===t.head&&a.isCons(t.tail)?await(async s=>await(async s=>await(async a=>s)(await a.t(KS.f(a.asCons(a.asCons(t).tail).head))))(await a.t(MS.f(a.r([wi,a.asCons(a.asCons(t).tail).head],await a.t(Ra.f(a.asCons(a.asCons(t).tail).tail,s)))))))(a.r([ii,F,ii])):a.isCons(t)&&yi===t.head&&a.isCons(t.tail)?a.b(MS.f,await a.t(GS.f(t))):a.isCons(t)?a.b(T.f,a.l(async t=>a.b(MS.f,t)),t):t)),a.d("shen.add-macro",a.l(async t=>await(async s=>await(async n=>a.equate(s,n)?ha:dn.set(a.r([await a.t(bp.f(t))],dn.get())))(Gs.set(await a.t(ys.f(t,Gs.get())))))(Gs.get()))),a.d("shen.packaged?",a.l(t=>a.isCons(t)&&ds===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)?V:U)),a.d("external",a.l(async t=>await(async()=>{try{return await a.t(g.f(t,S,v.get()))}catch(s){return a.raise("package "+a.asString(await a.t(e.f(t," has not been used.\n",l))))}})())),a.d("internal",a.l(async t=>await(async()=>{try{return await a.t(g.f(t,ug,v.get()))}catch(s){return a.raise("package "+a.asString(await a.t(e.f(t," has not been used.\n",l))))}})())),a.d("shen.package-contents",a.l(async t=>a.isCons(t)&&ds===t.head&&a.isCons(t.tail)&&Gl===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)?a.asCons(a.asCons(a.asCons(t).tail).tail).tail:a.isCons(t)&&ds===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)?await(async s=>await(async s=>a.b(yg.f,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).tail,s))(await a.t(Hd.f(s))))(a.symbolOf(a.show(a.asCons(a.asCons(t).tail).head)+".")):a.b(Na.f,YS))),a.d("shen.walk",a.l(async(t,s)=>a.isCons(s)?a.b(t,await a.t(T.f(a.l(async s=>a.b(NC.f,t,s)),s))):a.b(t,s))),a.d("compile",a.l(async(t,s,n)=>await(async t=>a.equate(await a.t(f.f()),t)||!a.asJsBool(await a.t(ut.f(a.asCons(t).head)))?a.b(n,t):a.b(d.f,t))(await a.t(t(a.r([s,null])))))),a.d("fail-if",a.l(async(t,s)=>a.asJsBool(await a.t(t(s)))?a.b(f.f):s)),a.d("@s",a.l((t,s)=>a.asString(t)+a.asString(s))),a.d("tc?",a.l(()=>Ms.get())),a.d("ps",a.l(async t=>await(async()=>{try{return await a.t(g.f(t,da,v.get()))}catch(s){return a.raise(a.asString(await a.t(e.f(t," not found.\n",l))))}})())),a.d("stinput",a.l(()=>XS.get())),a.d("vector",a.l(async t=>await(async s=>await(async s=>await(async a=>a)(0===t?s:await a.t(Bs.f(s,1,t,await a.t(f.f())))))(vs.f(s,0,t)))(Ss.f(a.asNumber(t)+1)))),a.d("shen.fillvector",a.l((t,s,n,i)=>a.equate(n,s)?vs.f(t,n,i):a.b(Bs.f,vs.f(t,s,i),1+a.asNumber(s),n,i))),a.d("vector?",a.l(async t=>a.asShenBool(a.isArray(t)&&a.asJsBool(await(async t=>a.asShenBool(a.isNumber(t)&&t>=0))(await(async()=>{try{return await a.t(Wt.f(t,0))}catch(a){return-1}})()))))),a.d("vector->",a.l((t,s,n)=>0===s?a.raise("cannot access 0th element of a vector\n"):vs.f(t,s,n))),a.d("<-vector",a.l(async(t,s)=>0===s?a.raise("cannot access 0th element of a vector\n"):await(async t=>a.equate(t,await a.t(f.f()))?a.raise("vector element not found\n"):t)(await a.t(Wt.f(t,s))))),a.d("shen.posint?",a.l(t=>a.asShenBool(a.asJsBool(a.t(Ld.f(t)))&&a.asNumber(t)>=0))),a.d("limit",a.l(t=>a.b(Wt.f,t,0))),a.d("symbol?",a.l(async t=>a.asJsBool(await a.t(vt.f(t)))||a.isNumber(t)||a.isString(t)?U:await(async()=>{try{return await(async t=>await a.t(QS.f(t)))(a.show(t))}catch(a){return U}})())),a.d("shen.analyse-symbol?",a.l(async t=>""===t?U:a.asJsBool(await a.t(ZS.f(t)))?a.asShenBool(a.asJsBool(await a.t(HS.f(_d.f(t,0))))&&a.asJsBool(await a.t(av.f(a.asNeString(t).substring(1))))):a.b(Na.f,tv))),a.d("shen.alpha?",a.l(async t=>a.b(m.f,t,a.r(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","=","*","/","+","-","_","?","$","!","@","~",">","<","&","%","{","}",":",";","`","#","'","."])))),a.d("shen.alphanums?",a.l(async t=>""===t?V:a.asJsBool(await a.t(ZS.f(t)))?a.asShenBool(a.asJsBool(await a.t(sv.f(_d.f(t,0))))&&a.asJsBool(await a.t(av.f(a.asNeString(t).substring(1))))):a.b(Na.f,nv))),a.d("shen.alphanum?",a.l(async t=>a.asShenBool(a.asJsBool(await a.t(HS.f(t)))||a.asJsBool(await a.t(iv.f(t)))))),a.d("shen.digit?",a.l(async t=>a.b(m.f,t,a.r(["1","2","3","4","5","6","7","8","9","0"])))),a.d("variable?",a.l(async t=>a.asJsBool(await a.t(vt.f(t)))||a.isNumber(t)||a.isString(t)?U:await(async()=>{try{return await(async t=>await a.t(ev.f(t)))(a.show(t))}catch(a){return U}})())),a.d("shen.analyse-variable?",a.l(async t=>a.asJsBool(await a.t(ZS.f(t)))?a.asShenBool(a.asJsBool(await a.t(ov.f(_d.f(t,0))))&&a.asJsBool(await a.t(av.f(a.asNeString(t).substring(1))))):a.b(Na.f,lv))),a.d("shen.uppercase?",a.l(async t=>a.b(m.f,t,a.r(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"])))),a.d("gensym",a.l(async t=>a.b(eC.f,t,Tn.set(1+a.asNumber(Tn.get()))))),a.d("concat",a.l(async(t,s)=>a.symbolOf(a.show(t)+a.show(s)))),a.d("@p",a.l(async(a,t)=>await(async s=>await(async n=>await(async a=>await(async a=>s)(vs.f(s,2,t)))(vs.f(s,1,a)))(vs.f(s,0,jy)))(Ss.f(3)))),a.d("fst",a.l(t=>a.b(Wt.f,t,1))),a.d("snd",a.l(t=>a.b(Wt.f,t,2))),a.d("tuple?",a.l(async t=>a.asShenBool(a.isArray(t)&&jy===await(async()=>{try{return await a.t(Wt.f(t,0))}catch(a){return rv}})()))),a.d("append",a.l(async(t,s)=>null===t?s:a.isCons(t)?a.r([t.head],await a.t(Ra.f(t.tail,s))):a.b(Na.f,Ri))),a.d("@v",a.l(async(t,s)=>await(async n=>await(async i=>await(async t=>0===n?t:a.b(fv.f,s,1,n,t))(await a.t(Dy.f(i,1,t))))(await a.t(Us.f(a.asNumber(n)+1))))(await a.t(Pd.f(s))))),a.d("shen.@v-help",a.l(async(t,s,n,i)=>a.equate(n,s)?a.b(wv.f,t,i,n,a.asNumber(n)+1):a.b(fv.f,t,a.asNumber(s)+1,n,await a.t(wv.f(t,i,s,a.asNumber(s)+1))))),a.d("shen.copyfromvector",a.l(async(t,s,n,i)=>await(async()=>{try{return await a.t(Dy.f(s,i,await a.t(My.f(t,n))))}catch(a){return s}})())),a.d("hdv",a.l(async t=>await(async()=>{try{return await a.t(My.f(t,1))}catch(s){return a.raise("hdv needs a non-empty vector as an argument; not "+a.asString(await a.t(e.f(t,"\n",gs))))}})())),a.d("tlv",a.l(async t=>await(async s=>0===s?a.raise("cannot take the tail of the empty vector\n"):1===s?a.b(Us.f,0):await(async n=>a.b(cv.f,t,2,s,await a.t(Us.f(a.asNumber(s)-1))))(await a.t(Us.f(a.asNumber(s)-1))))(await a.t(Pd.f(t))))),a.d("shen.tlv-help",a.l(async(t,s,n,i)=>a.equate(n,s)?a.b(wv.f,t,i,n,a.asNumber(n)-1):a.b(cv.f,t,a.asNumber(s)+1,n,await a.t(wv.f(t,i,s,a.asNumber(s)-1))))),a.d("assoc",a.l(async(t,s)=>null===s?null:a.isCons(s)&&a.isCons(s.head)&&a.equate(a.asCons(s.head).head,t)?a.asCons(s).head:a.isCons(s)?a.b(dt.f,t,s.tail):a.b(Na.f,$i))),a.d("shen.assoc-set",a.l(async(t,s,n)=>null===n?a.r([a.r([t],s)]):a.isCons(n)&&a.isCons(n.head)&&a.equate(a.asCons(n.head).head,t)?a.r([a.r([a.asCons(a.asCons(n).head).head],s)],a.asCons(n).tail):a.isCons(n)?a.r([n.head],await a.t(Os.f(t,s,n.tail))):a.b(Na.f,hv))),a.d("shen.assoc-rm",a.l(async(t,s)=>null===s?null:a.isCons(s)&&a.isCons(s.head)&&a.equate(a.asCons(s.head).head,t)?a.asCons(s).tail:a.isCons(s)?a.r([s.head],await a.t(Es.f(t,s.tail))):a.b(Na.f,yv))),a.d("boolean?",a.l(a=>V===a?V:U===a?V:U)),a.d("nl",a.l(async t=>0===t?0:(await a.t(Xa.f("\n",await a.t(Qa.f()))),a.b(Nd.f,a.asNumber(t)-1)))),a.d("difference",a.l(async(t,s)=>null===t?null:a.isCons(t)?a.asJsBool(await a.t(m.f(t.head,s)))?a.b(sC.f,t.tail,s):a.r([t.head],await a.t(sC.f(t.tail,s))):a.b(Na.f,Zi))),a.d("do",a.l((a,t)=>t)),a.d("element?",a.l(async(t,s)=>null===s?U:a.isCons(s)&&a.equate(s.head,t)?V:a.isCons(s)?a.b(m.f,t,s.tail):a.b(Na.f,ae))),a.d("empty?",a.l(a=>null===a?V:U)),a.d("fix",a.l(async(t,s)=>a.b(dv.f,t,s,await a.t(t(s))))),a.d("shen.fix-help",a.l(async(t,s,n)=>a.equate(n,s)?n:a.b(dv.f,t,n,await a.t(t(n))))),a.d("put",a.l(async(t,s,n,i)=>await(async e=>await(async s=>await(async a=>n)(await a.t(uv.f(i,t,s))))(await a.t(Os.f(s,n,e))))(await(async()=>{try{return await a.t(Cv.f(i,t))}catch(a){return null}})()))),a.d("unput",a.l(async(t,s,n)=>await(async i=>await(async s=>await(async a=>t)(await a.t(uv.f(n,t,s))))(await a.t(Es.f(s,i))))(await(async()=>{try{return await a.t(Cv.f(n,t))}catch(a){return null}})()))),a.d("get",a.l(async(t,s,n)=>await(async t=>await(async t=>a.asJsBool(await a.t(ut.f(t)))?a.raise("value not found\n"):a.asCons(t).tail)(await a.t(dt.f(s,t))))(await(async()=>{try{return await a.t(Cv.f(n,t))}catch(a){return null}})()))),a.d("hash",a.l(async(t,s)=>a.b(bv.f,await a.t(nd.f(await a.t(T.f(a.l(async t=>a.asNeString(t).charCodeAt(0)),await a.t(Hd.f(t)))))),s))),a.d("shen.mod",a.l(async(t,s)=>a.b(pv.f,t,await a.t(mv.f(t,a.r([s])))))),a.d("shen.multiples",a.l(async(t,s)=>a.isCons(s)&&a.asNumber(s.head)>a.asNumber(t)?a.asCons(s).tail:a.isCons(s)?a.b(mv.f,t,a.r([2*a.asNumber(s.head)],s)):a.b(Na.f,gv))),a.d("shen.modh",a.l(async(t,s)=>0===t?0:null===s?t:a.isCons(s)&&a.asNumber(s.head)>a.asNumber(t)?a.asJsBool(await a.t(ut.f(a.asCons(s).tail)))?t:a.b(pv.f,t,a.asCons(s).tail):a.isCons(s)?a.b(pv.f,a.asNumber(t)-a.asNumber(s.head),s):a.b(Na.f,Sv))),a.d("sum",a.l(async t=>null===t?0:a.isCons(t)?a.asNumber(t.head)+a.asNumber(await a.t(nd.f(t.tail))):a.b(Na.f,Po))),a.d("head",a.l(t=>a.isCons(t)?t.head:a.raise("head expects a non-empty list"))),a.d("tail",a.l(t=>a.isCons(t)?t.tail:a.raise("tail expects a non-empty list"))),a.d("hdstr",a.l(a=>_d.f(a,0))),a.d("intersection",a.l(async(t,s)=>null===t?null:a.isCons(t)?a.asJsBool(await a.t(m.f(t.head,s)))?a.r([t.head],await a.t(Id.f(t.tail,s))):a.b(Id.f,t.tail,s):a.b(Na.f,Ne))),a.d("reverse",a.l(async t=>a.b(vv.f,t,null))),a.d("shen.reverse_help",a.l(async(t,s)=>null===t?s:a.isCons(t)?a.b(vv.f,t.tail,a.r([t.head],s)):a.b(Na.f,_v))),a.d("union",a.l(async(t,s)=>null===t?s:a.isCons(t)?a.asJsBool(await a.t(m.f(t.head,s)))?a.b(Aa.f,t.tail,s):a.r([t.head],await a.t(Aa.f(t.tail,s))):a.b(Na.f,Yo))),a.d("y-or-n?",a.l(async t=>await(async s=>await(async s=>await(async s=>"y"===s?V:"n"===s?U:(await a.t(Xa.f("please answer y or n\n",await a.t(Qa.f()))),a.b(Iy.f,t)))(await a.t(e.f(await a.t(fd.f(await a.t(xv.f()))),"",gs))))(await a.t(Xa.f(" (y/n) ",await a.t(Qa.f())))))(await a.t(Xa.f(await a.t(Bv.f(t)),await a.t(Qa.f())))))),a.d("not",a.l(t=>a.asJsBool(t)?U:V)),a.d("subst",a.l(async(t,s,n)=>a.equate(n,s)?t:a.isCons(n)?a.b(T.f,a.l(async n=>a.b(id.f,t,s,n)),n):n)),a.d("explode",a.l(async t=>a.b(qv.f,await a.t(e.f(t,"",l))))),a.d("shen.explode-h",a.l(async t=>""===t?null:a.asJsBool(await a.t(ZS.f(t)))?a.r([_d.f(t,0)],await a.t(qv.f(a.asNeString(t).substring(1)))):a.b(Na.f,jv))),a.d("cd",a.l(async t=>Ti.set(""===t?"":await a.t(e.f(t,"/",l))))),a.d("shen.for-each",a.l(async(t,s)=>null===s?V:a.isCons(s)?await(async n=>a.b(ba.f,t,s.tail))(await a.t(t(s.head))):a.b(Na.f,Jv))),a.d("map",a.l(async(t,s)=>null===s?null:a.isCons(s)?a.r([await a.t(t(s.head))],await a.t(T.f(t,s.tail))):a.b(t,s))),a.d("length",a.l(async t=>a.b(Nv.f,t,0))),a.d("shen.length-h",a.l((t,s)=>null===t?s:a.b(Nv.f,a.asCons(t).tail,a.asNumber(s)+1))),a.d("occurrences",a.l((t,s)=>a.equate(s,t)?1:a.isCons(s)?a.asNumber(a.t(qd.f(t,s.head)))+a.asNumber(a.t(qd.f(t,s.tail))):0)),a.d("nth",a.l(async(t,s)=>1===t&&a.isCons(s)?a.asCons(s).head:a.isCons(s)?a.b(Jd.f,a.asNumber(t)-1,s.tail):a.raise("nth applied to "+a.asString(await a.t(e.f(t,", "+a.asString(await a.t(e.f(s,"\n",l))),l)))))),a.d("integer?",a.l(async t=>a.asShenBool(a.isNumber(t)&&a.asJsBool(await(async t=>await a.t(Ov.f(t,await a.t(Av.f(t,1)))))(await a.t(kv.f(t))))))),a.d("shen.abs",a.l(t=>a.asNumber(t)>0?t:0-a.asNumber(t))),a.d("shen.magless",a.l((t,s)=>(n=>a.asNumber(n)>a.asNumber(t)?s:a.b(Av.f,t,n))(2*a.asNumber(s)))),a.d("shen.integer-test?",a.l((t,s)=>0===t?V:1>a.asNumber(t)?U:(n=>0>a.asNumber(n)?a.b(Ld.f,t):a.b(Ov.f,n,s))(a.asNumber(t)-a.asNumber(s)))),a.d("mapcan",a.l(async(t,s)=>null===s?null:a.isCons(s)?a.b(Ra.f,await a.t(t(s.head)),await a.t(Ad.f(t,s.tail))):a.b(Na.f,$e))),a.d("==",a.l((t,s)=>a.equate(s,t)?V:U)),a.d("abort",a.l(()=>a.raise(""))),a.d("bound?",a.l(async t=>a.asShenBool(a.asJsBool(await a.t(b.f(t)))&&a.asJsBool(await(async a=>a===Tv?U:V)(await(async()=>{try{return a.valueOf(a.nameOf(t))}catch(a){return Tv}})()))))),a.d("shen.string->bytes",a.l(t=>""===t?null:a.r([a.asNeString(_d.f(t,0)).charCodeAt(0)],a.t(Ev.f(a.asNeString(t).substring(1)))))),a.d("maxinferences",a.l(a=>Bi.set(a))),a.d("inferences",a.l(()=>Ji.get())),a.d("protect",a.l(a=>a)),a.d("stoutput",a.l(()=>Ii.get())),a.d("sterror",a.l(()=>Pi.get())),a.d("string->symbol",a.l(async t=>await(async s=>a.asJsBool(await a.t(b.f(s)))?s:a.raise("cannot intern "+a.asString(await a.t(e.f(t," to a symbol",gs)))))(a.symbolOf(a.asString(t))))),a.d("optimise",a.l(t=>ol===t?rt.set(V):rl===t?rt.set(U):a.raise("optimise expects a + or a -.\n"))),a.d("os",a.l(()=>Pv.get())),a.d("language",a.l(()=>Iv.get())),a.d("version",a.l(()=>ki.get())),a.d("port",a.l(()=>Lv.get())),a.d("porters",a.l(()=>Fv.get())),a.d("implementation",a.l(()=>Dv.get())),a.d("release",a.l(()=>Mv.get())),a.d("package?",a.l(async t=>await(async()=>{try{return await a.t(aC.f(t)),V}catch(a){return U}})())),a.d("function",a.l(async t=>a.b(Rv.f,t))),a.d("shen.lookup-func",a.l(async t=>await(async()=>{try{return await a.t(g.f(t,_a,v.get()))}catch(s){return a.raise(a.asString(await a.t(e.f(t," has no lambda expansion\n",l))))}})())),a.d("shen.typecheck",a.l(async(t,s)=>await(async t=>await(async n=>await(async s=>await(async i=>a.b(zv.f,a.r([t,Nt,s]),null,n,i))(a.l(async()=>a.b(Yy.f,s,n,$v))))(await a.t(vp.f(await a.t(q.f(await a.t(j.f(s)))),n))))(await a.t(gp.f())))(await a.t(Mg.f(t))))),a.d("shen.curry",a.l(async t=>a.isCons(t)&&a.asJsBool(await a.t(Uv.f(t.head)))?a.r([a.asCons(t).head],await a.t(T.f(a.l(async t=>a.b(Mg.f,t)),a.asCons(t).tail))):a.isCons(t)&&a.isCons(t.tail)&&a.asJsBool(await a.t(Vv.f(t.head)))?t:a.isCons(t)&&pt===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([pt,await a.t(Mg.f(a.asCons(a.asCons(t).tail).head))],a.asCons(a.asCons(t).tail).tail):a.isCons(t)&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)?a.b(Mg.f,a.r([a.r([a.asCons(t).head,a.asCons(a.asCons(t).tail).head])],a.asCons(a.asCons(t).tail).tail)):a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.r([await a.t(Mg.f(a.asCons(t).head)),await a.t(Mg.f(a.asCons(a.asCons(t).tail).head))]):t)),a.d("shen.special?",a.l(async t=>a.b(m.f,t,ps.get()))),a.d("shen.extraspecial?",a.l(async t=>a.b(m.f,t,fi.get()))),a.d("shen.t*",a.l(async(t,s,n,i)=>await(async e=>a.b(Kv.f,e,await(async o=>o===U?await(async o=>o===U?await(async e=>e===U?await(async e=>(await a.t(Gv.f()),await a.t(s_.f(t,s,n,a.l(async()=>a.b(wp.f,e,bi.get(),n,a.l(async()=>a.b(n_.f,t,s,e,n,i))))))))(await a.t(Op.f(n))):e)(await(async t=>a.isCons(t)?await(async o=>await(async t=>a.isCons(t)?await(async l=>Nt===l?await(async t=>a.isCons(t)?await(async l=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(Yv.f(await a.t(a_.f()),n,a.l(async()=>a.b(Zv.f,e,n,a.l(async()=>a.b(t_.f,o,l,s,n,i))))))):U)(await a.t(rp.f(t.tail,n))))(t.head):U)(await a.t(rp.f(t.tail,n))):U)(await a.t(rp.f(t.head,n))):U)(await a.t(rp.f(t.tail,n))))(t.head):U)(await a.t(rp.f(t,n)))):o)(await(async t=>as===t?(await a.t(Gv.f()),await a.t(Zv.f(e,n,a.l(async()=>a.b(Hv.f,n,i))))):U)(await a.t(rp.f(t,n)))):o)(await(async t=>(await a.t(Gv.f()),await a.t(Yv.f(await a.t(Xv.f()),n,a.l(async()=>a.b(wp.f,t,await a.t(Qv.f()),n,i))))))(await a.t(Op.f(n))))))(await a.t(Wv.f())))),a.d("shen.type-theory-enabled?",a.l(()=>mi.get())),a.d("enable-type-theory",a.l(t=>ol===t?mi.set(V):rl===t?mi.set(U):a.raise("enable-type-theory expects a + or a -\n"))),a.d("shen.prolog-failure",a.l((a,t)=>U)),a.d("shen.maxinfexceeded?",a.l(async()=>a.asShenBool(a.asNumber(await a.t(yC.f()))>a.asNumber(Bi.get())))),a.d("shen.errormaxinfs",a.l(()=>a.raise("maximum inferences exceeded~%"))),a.d("shen.udefs*",a.l(async(t,s,n,i,e)=>await(async o=>o===U?await(async n=>a.isCons(n)?await(async n=>(await a.t(Gv.f()),a.b(n_.f,t,s,n,i,e)))(n.tail):U)(await a.t(rp.f(n,i))):o)(await(async n=>a.isCons(n)?await(async n=>(await a.t(Gv.f()),await a.t(pp.f(a.r([n,t,s]),i,e))))(n.head):U)(await a.t(rp.f(n,i)))))),a.d("shen.th*",a.l(async(t,s,n,i,e)=>await(async o=>a.b(Kv.f,o,await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async l=>l===U?await(async o=>o===U?await(async o=>o===U?await(async o=>o===U?await(async o=>(await a.t(Gv.f()),await a.t(wp.f(o,bi.get(),i,a.l(async()=>a.b(n_.f,a.r([t,Nt,s]),n,o,i,e))))))(await a.t(Op.f(i))):o)(await(async t=>a.isCons(t)?await(async t=>gC===t?await(async t=>Bt===t?(await a.t(Gv.f()),await a.t(Ks.f(e))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,Bt,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(Ks.f(e))))):U)(await a.t(rp.f(s,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):o)(await(async t=>a.isCons(t)?await(async t=>ci===t?await(async t=>Bt===t?(await a.t(Gv.f()),await a.t(Ks.f(e))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,Bt,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(Ks.f(e))))):U)(await a.t(rp.f(s,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):o)(await(async t=>a.isCons(t)?await(async t=>Ci===t?await(async t=>Fl===t?(await a.t(Gv.f()),await a.t(Zv.f(o,i,e))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,Fl,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(Zv.f(o,i,e))))):U)(await a.t(rp.f(s,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async l=>wi===l?await(async t=>a.isCons(t)?await(async l=>await(async t=>(await a.t(Gv.f()),await a.t(Zv.f(o,i,a.l(async()=>a.b(w_.f,a.r([wi,l],t),s,n,i,e))))))(t.tail))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async o=>(await a.t(Gv.f()),await a.t(f_.f(n,o,i,a.l(async()=>a.b(t_.f,t,s,o,i,e))))))(await a.t(Op.f(i)))):l)(await(async t=>a.isCons(t)?await(async l=>li===l?await(async t=>a.isCons(t)?await(async l=>await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(Zv.f(o,i,a.l(async()=>a.b(t_.f,l,Bt,n,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(t_.f,a.r([al,l]),s,n,i,a.l(async()=>a.b(t_.f,r,s,n,i,e))))))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async o=>hi===o?await(async t=>a.isCons(t)?await(async o=>await(async t=>a.isCons(t)?await(async l=>await(async t=>null===t?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(t,await a.t(q.f(await a.t(rp.f(o,i)))),i,a.l(async()=>a.b(Uy.f,s,t,i,a.l(async()=>a.b(t_.f,l,a.r([$l,tr]),n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async l=>pt===l?await(async t=>a.isCons(t)?await(async l=>await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(Zv.f(o,i,a.l(async()=>a.b(Uy.f,r,s,i,a.l(async()=>a.b(t_.f,l,r,n,i,e))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async l=>ri===l?await(async t=>a.isCons(t)?await(async l=>await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?await(async t=>a.isCons(t)?await(async s=>$l===s?await(async t=>a.isCons(t)?await(async s=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(Vy.f(s,r,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(Yv.f,await a.t(m.f(await a.t(rp.f(s,i)),a.r([tr,Kl]))),i,a.l(async()=>a.b(t_.f,l,gt,n,i,e))))))))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(Vy.f(s,r,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(Yv.f,await a.t(m.f(await a.t(rp.f(s,i)),a.r([tr,Kl]))),i,a.l(async()=>a.b(t_.f,l,gt,n,i,e))))))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([s]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(Vy.f(s,r,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(Yv.f,await a.t(m.f(await a.t(rp.f(s,i)),a.r([tr,Kl]))),i,a.l(async()=>a.b(t_.f,l,gt,n,i,e))))))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))):a.asJsBool(await a.t(fp.f(s)))?(await a.t(dp.f(s,$l,i)),await(async t=>(await a.t(Cp.f(s,i)),t))(await(async t=>a.isCons(t)?await(async s=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(Vy.f(s,r,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(Yv.f,await a.t(m.f(await a.t(rp.f(s,i)),a.r([tr,Kl]))),i,a.l(async()=>a.b(t_.f,l,gt,n,i,e))))))))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(Vy.f(s,r,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(Yv.f,await a.t(m.f(await a.t(rp.f(s,i)),a.r([tr,Kl]))),i,a.l(async()=>a.b(t_.f,l,gt,n,i,e))))))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([s]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(Vy.f(s,r,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(Yv.f,await a.t(m.f(await a.t(rp.f(s,i)),a.r([tr,Kl]))),i,a.l(async()=>a.b(t_.f,l,gt,n,i,e))))))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))):U)(await a.t(rp.f(t.head,i))):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([$l,s]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(Vy.f(s,r,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(Yv.f,await a.t(m.f(await a.t(rp.f(s,i)),a.r([tr,Kl]))),i,a.l(async()=>a.b(t_.f,l,gt,n,i,e))))))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(s,i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async o=>Pa===o?await(async t=>a.isCons(t)?await(async o=>await(async t=>a.isCons(t)?await(async l=>await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?await(async t=>await(async f=>await(async w=>(await a.t(Gv.f()),await a.t(t_.f(l,w,n,i,a.l(async()=>a.b(wp.f,f,await a.t(r_.f()),i,a.l(async()=>a.b(wp.f,t,await a.t(Tt.f(await a.t(rp.f(f,i)),await a.t(rp.f(o,i)),await a.t(rp.f(r,i)))),i,a.l(async()=>a.b(t_.f,t,s,a.r([a.r([f,Nt,w])],n),i,e))))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async o=>Ea===o?await(async t=>a.isCons(t)?await(async o=>await(async t=>a.isCons(t)?await(async l=>await(async t=>null===t?await(async t=>a.isCons(t)?await(async s=>await(async t=>a.isCons(t)?await(async r=>O===r?await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?await(async t=>await(async f=>(await a.t(Gv.f()),await a.t(wp.f(f,await a.t(r_.f()),i,a.l(async()=>a.b(wp.f,t,await a.t(Tt.f(await a.t(rp.f(f,i)),await a.t(rp.f(o,i)),await a.t(rp.f(l,i)))),i,a.l(async()=>a.b(t_.f,t,r,a.r([a.r([f,Nt,s])],n),i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))(await(async t=>await(async f=>(await a.t(Gv.f()),await a.t(wp.f(f,await a.t(r_.f()),i,a.l(async()=>a.b(wp.f,t,await a.t(Tt.f(await a.t(rp.f(f,i)),await a.t(rp.f(o,i)),await a.t(rp.f(l,i)))),i,a.l(async()=>a.b(t_.f,t,r,a.r([a.r([f,Nt,s])],n),i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async r=>(await a.t(dp.f(t,a.r([r]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))(await(async t=>await(async f=>(await a.t(Gv.f()),await a.t(wp.f(f,await a.t(r_.f()),i,a.l(async()=>a.b(wp.f,t,await a.t(Tt.f(await a.t(rp.f(f,i)),await a.t(rp.f(o,i)),await a.t(rp.f(l,i)))),i,a.l(async()=>a.b(t_.f,t,r,a.r([a.r([f,Nt,s])],n),i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))):a.asJsBool(await a.t(fp.f(r)))?(await a.t(dp.f(r,O,i)),await(async t=>(await a.t(Cp.f(r,i)),t))(await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?await(async t=>await(async f=>(await a.t(Gv.f()),await a.t(wp.f(f,await a.t(r_.f()),i,a.l(async()=>a.b(wp.f,t,await a.t(Tt.f(await a.t(rp.f(f,i)),await a.t(rp.f(o,i)),await a.t(rp.f(l,i)))),i,a.l(async()=>a.b(t_.f,t,r,a.r([a.r([f,Nt,s])],n),i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))(await(async t=>await(async f=>(await a.t(Gv.f()),await a.t(wp.f(f,await a.t(r_.f()),i,a.l(async()=>a.b(wp.f,t,await a.t(Tt.f(await a.t(rp.f(f,i)),await a.t(rp.f(o,i)),await a.t(rp.f(l,i)))),i,a.l(async()=>a.b(t_.f,t,r,a.r([a.r([f,Nt,s])],n),i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async r=>(await a.t(dp.f(t,a.r([r]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))(await(async t=>await(async f=>(await a.t(Gv.f()),await a.t(wp.f(f,await a.t(r_.f()),i,a.l(async()=>a.b(wp.f,t,await a.t(Tt.f(await a.t(rp.f(f,i)),await a.t(rp.f(o,i)),await a.t(rp.f(l,i)))),i,a.l(async()=>a.b(t_.f,t,r,a.r([a.r([f,Nt,s])],n),i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))):U)(await a.t(rp.f(t.head,i))):a.asJsBool(await a.t(fp.f(t)))?await(async r=>(await a.t(dp.f(t,a.r([O,r]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))(await(async t=>await(async f=>(await a.t(Gv.f()),await a.t(wp.f(f,await a.t(r_.f()),i,a.l(async()=>a.b(wp.f,t,await a.t(Tt.f(await a.t(rp.f(f,i)),await a.t(rp.f(o,i)),await a.t(rp.f(l,i)))),i,a.l(async()=>a.b(t_.f,t,r,a.r([a.r([f,Nt,s])],n),i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>await(async r=>(await a.t(dp.f(t,a.r([s,O,r]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))(await(async t=>await(async f=>(await a.t(Gv.f()),await a.t(wp.f(f,await a.t(r_.f()),i,a.l(async()=>a.b(wp.f,t,await a.t(Tt.f(await a.t(rp.f(f,i)),await a.t(rp.f(o,i)),await a.t(rp.f(l,i)))),i,a.l(async()=>a.b(t_.f,t,r,a.r([a.r([f,Nt,s])],n),i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))):U)(await a.t(rp.f(s,i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async o=>aa===o?await(async t=>a.isCons(t)?await(async o=>await(async t=>a.isCons(t)?await(async l=>await(async t=>null===t?await(async t=>gt===t?(await a.t(Gv.f()),await a.t(t_.f(o,gt,n,i,a.l(async()=>a.b(t_.f,l,gt,n,i,e))))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,gt,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,gt,n,i,a.l(async()=>a.b(t_.f,l,gt,n,i,e))))))):U)(await a.t(rp.f(s,i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async o=>H===o?await(async t=>a.isCons(t)?await(async o=>await(async t=>a.isCons(t)?await(async l=>await(async t=>null===t?await(async t=>a.isCons(t)?await(async s=>ta===s?await(async t=>a.isCons(t)?await(async s=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([ta,s]),n,i,e))))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([ta,s]),n,i,e))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([s]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([ta,s]),n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))):a.asJsBool(await a.t(fp.f(s)))?(await a.t(dp.f(s,ta,i)),await(async t=>(await a.t(Cp.f(s,i)),t))(await(async t=>a.isCons(t)?await(async s=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([ta,s]),n,i,e))))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([ta,s]),n,i,e))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([s]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([ta,s]),n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))):U)(await a.t(rp.f(t.head,i))):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([ta,s]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([ta,s]),n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(s,i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async o=>Y===o?await(async t=>a.isCons(t)?await(async o=>await(async t=>a.isCons(t)?await(async l=>await(async t=>null===t?await(async t=>a.isCons(t)?await(async s=>await(async t=>a.isCons(t)?await(async r=>A===r?await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,r,n,i,e))))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,r,n,i,e))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async r=>(await a.t(dp.f(t,a.r([r]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,r,n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))):a.asJsBool(await a.t(fp.f(r)))?(await a.t(dp.f(r,A,i)),await(async t=>(await a.t(Cp.f(r,i)),t))(await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,r,n,i,e))))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,r,n,i,e))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async r=>(await a.t(dp.f(t,a.r([r]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,r,n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))):U)(await a.t(rp.f(t.head,i))):a.asJsBool(await a.t(fp.f(t)))?await(async r=>(await a.t(dp.f(t,a.r([A,r]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,r,n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>await(async r=>(await a.t(dp.f(t,a.r([s,A,r]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,r,n,i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))):U)(await a.t(rp.f(s,i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async o=>Z===o?await(async t=>a.isCons(t)?await(async o=>await(async t=>a.isCons(t)?await(async l=>await(async t=>null===t?await(async t=>a.isCons(t)?await(async s=>Zl===s?await(async t=>a.isCons(t)?await(async s=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([Zl,s]),n,i,e))))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([Zl,s]),n,i,e))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([s]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([Zl,s]),n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))):a.asJsBool(await a.t(fp.f(s)))?(await a.t(dp.f(s,Zl,i)),await(async t=>(await a.t(Cp.f(s,i)),t))(await(async t=>a.isCons(t)?await(async s=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([Zl,s]),n,i,e))))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([Zl,s]),n,i,e))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([s]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([Zl,s]),n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))):U)(await a.t(rp.f(t.head,i))):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([Zl,s]),i)),await(async s=>(await a.t(Cp.f(t,i)),s))((await a.t(Gv.f()),await a.t(t_.f(o,s,n,i,a.l(async()=>a.b(t_.f,l,a.r([Zl,s]),n,i,e))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(s,i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async o=>await(async t=>a.isCons(t)?await(async l=>await(async t=>null===t?await(async t=>(await a.t(Gv.f()),await a.t(t_.f(o,a.r([t,O,s]),n,i,a.l(async()=>a.b(t_.f,l,t,n,i,e))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async o=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(t_.f(o,a.r([O,s]),n,i,e))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t,i)))):l)((await a.t(Gv.f()),await a.t(l_.f(t,s,n,i,e)))):l)((await a.t(Gv.f()),await a.t(o_.f(t,s,i,e)))):l)(await(async n=>(await a.t(Gv.f()),await a.t(Yv.f(await a.t(i_.f(await a.t(rp.f(t,i)))),i,a.l(async()=>a.b(wp.f,n,await a.t(e_.f(await a.t(rp.f(t,i)))),i,a.l(async()=>a.b(pp.f,a.r([n,s]),i,e))))))))(await a.t(Op.f(i)))):l)((await a.t(Gv.f()),await a.t(s_.f(a.r([t,Nt,s]),n,i,a.l(async()=>a.b(Yv.f,U,i,e))))))))(await a.t(Wv.f())))),a.d("shen.t*-hyps",a.l(async(t,s,n,i)=>await(async e=>e===U?await(async e=>e===U?await(async e=>e===U?await(async e=>e===U?await(async t=>a.isCons(t)?await(async e=>await(async t=>await(async o=>(await a.t(Gv.f()),a.b(wp.f,s,a.r([await a.t(rp.f(e,n))],await a.t(rp.f(o,n))),n,a.l(async()=>a.b(f_.f,t,o,n,i)))))(await a.t(Op.f(n))))(t.tail))(t.head):U)(await a.t(rp.f(t,n))):e)(await(async t=>a.isCons(t)?await(async e=>a.isCons(e)?await(async o=>a.isCons(o)?await(async l=>aa===l?await(async o=>a.isCons(o)?await(async l=>await(async o=>a.isCons(o)?await(async r=>await(async o=>null===o?await(async e=>a.isCons(e)?await(async o=>Nt===o?await(async e=>a.isCons(e)?await(async o=>gt===o?await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,gt]),a.r([await a.t(rp.f(r,n)),Nt,gt])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,gt]),a.r([await a.t(rp.f(r,n)),Nt,gt])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))):a.asJsBool(await a.t(fp.f(o)))?(await a.t(dp.f(o,gt,n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,gt]),a.r([await a.t(rp.f(r,n)),Nt,gt])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,gt]),a.r([await a.t(rp.f(r,n)),Nt,gt])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(e.tail,n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(e.tail,n))):U)(await a.t(rp.f(o.tail,n))))(o.head):U)(await a.t(rp.f(o.tail,n))))(o.head):U)(await a.t(rp.f(o.tail,n))):U)(await a.t(rp.f(o.head,n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(t.head,n))):U)(await a.t(rp.f(t,n)))):e)(await(async t=>a.isCons(t)?await(async e=>a.isCons(e)?await(async o=>a.isCons(o)?await(async l=>H===l?await(async o=>a.isCons(o)?await(async l=>await(async o=>a.isCons(o)?await(async r=>await(async o=>null===o?await(async e=>a.isCons(e)?await(async o=>Nt===o?await(async e=>a.isCons(e)?await(async o=>a.isCons(o)?await(async f=>ta===f?await(async o=>a.isCons(o)?await(async f=>await(async o=>null===o?await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))):a.asJsBool(await a.t(fp.f(o)))?(await a.t(dp.f(o,null,n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))):U)(await a.t(rp.f(o.tail,n))))(o.head):a.asJsBool(await a.t(fp.f(o)))?await(async f=>(await a.t(dp.f(o,a.r([f]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(o.tail,n))):a.asJsBool(await a.t(fp.f(f)))?(await a.t(dp.f(f,ta,n)),await(async t=>(await a.t(Cp.f(f,n)),t))(await(async o=>a.isCons(o)?await(async f=>await(async o=>null===o?await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))):a.asJsBool(await a.t(fp.f(o)))?(await a.t(dp.f(o,null,n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))):U)(await a.t(rp.f(o.tail,n))))(o.head):a.asJsBool(await a.t(fp.f(o)))?await(async f=>(await a.t(dp.f(o,a.r([f]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(o.tail,n))))):U)(await a.t(rp.f(o.head,n))):a.asJsBool(await a.t(fp.f(o)))?await(async f=>(await a.t(dp.f(o,a.r([ta,f]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([ta,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(e.tail,n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(e.tail,n))):U)(await a.t(rp.f(o.tail,n))))(o.head):U)(await a.t(rp.f(o.tail,n))))(o.head):U)(await a.t(rp.f(o.tail,n))):U)(await a.t(rp.f(o.head,n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(t.head,n))):U)(await a.t(rp.f(t,n)))):e)(await(async t=>a.isCons(t)?await(async e=>a.isCons(e)?await(async o=>a.isCons(o)?await(async l=>Y===l?await(async o=>a.isCons(o)?await(async l=>await(async o=>a.isCons(o)?await(async r=>await(async o=>null===o?await(async e=>a.isCons(e)?await(async o=>Nt===o?await(async e=>a.isCons(e)?await(async o=>a.isCons(o)?await(async f=>await(async o=>a.isCons(o)?await(async w=>A===w?await(async o=>a.isCons(o)?await(async w=>await(async o=>null===o?await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))):a.asJsBool(await a.t(fp.f(o)))?(await a.t(dp.f(o,null,n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))):U)(await a.t(rp.f(o.tail,n))))(o.head):a.asJsBool(await a.t(fp.f(o)))?await(async w=>(await a.t(dp.f(o,a.r([w]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(o.tail,n))):a.asJsBool(await a.t(fp.f(w)))?(await a.t(dp.f(w,A,n)),await(async t=>(await a.t(Cp.f(w,n)),t))(await(async o=>a.isCons(o)?await(async w=>await(async o=>null===o?await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))):a.asJsBool(await a.t(fp.f(o)))?(await a.t(dp.f(o,null,n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))):U)(await a.t(rp.f(o.tail,n))))(o.head):a.asJsBool(await a.t(fp.f(o)))?await(async w=>(await a.t(dp.f(o,a.r([w]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(o.tail,n))))):U)(await a.t(rp.f(o.head,n))):a.asJsBool(await a.t(fp.f(o)))?await(async w=>(await a.t(dp.f(o,a.r([A,w]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(o.tail,n))))(o.head):a.asJsBool(await a.t(fp.f(o)))?await(async f=>await(async w=>(await a.t(dp.f(o,a.r([f,A,w]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,await a.t(rp.f(w,n))])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))))(await a.t(Op.f(n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(e.tail,n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(e.tail,n))):U)(await a.t(rp.f(o.tail,n))))(o.head):U)(await a.t(rp.f(o.tail,n))))(o.head):U)(await a.t(rp.f(o.tail,n))):U)(await a.t(rp.f(o.head,n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(t.head,n))):U)(await a.t(rp.f(t,n)))):e)(await(async t=>a.isCons(t)?await(async e=>a.isCons(e)?await(async o=>a.isCons(o)?await(async l=>Z===l?await(async o=>a.isCons(o)?await(async l=>await(async o=>a.isCons(o)?await(async r=>await(async o=>null===o?await(async e=>a.isCons(e)?await(async o=>Nt===o?await(async e=>a.isCons(e)?await(async o=>a.isCons(o)?await(async f=>Zl===f?await(async o=>a.isCons(o)?await(async f=>await(async o=>null===o?await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))):a.asJsBool(await a.t(fp.f(o)))?(await a.t(dp.f(o,null,n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))):U)(await a.t(rp.f(o.tail,n))))(o.head):a.asJsBool(await a.t(fp.f(o)))?await(async f=>(await a.t(dp.f(o,a.r([f]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(o.tail,n))):a.asJsBool(await a.t(fp.f(f)))?(await a.t(dp.f(f,Zl,n)),await(async t=>(await a.t(Cp.f(f,n)),t))(await(async o=>a.isCons(o)?await(async f=>await(async o=>null===o?await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))):a.asJsBool(await a.t(fp.f(o)))?(await a.t(dp.f(o,null,n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))):U)(await a.t(rp.f(o.tail,n))))(o.head):a.asJsBool(await a.t(fp.f(o)))?await(async f=>(await a.t(dp.f(o,a.r([f]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(o.tail,n))))):U)(await a.t(rp.f(o.head,n))):a.asJsBool(await a.t(fp.f(o)))?await(async f=>(await a.t(dp.f(o,a.r([Zl,f]),n)),await(async t=>(await a.t(Cp.f(o,n)),t))(await(async e=>null===e?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail):a.asJsBool(await a.t(fp.f(e)))?(await a.t(dp.f(e,null,n)),await(async t=>(await a.t(Cp.f(e,n)),t))(await(async t=>(await a.t(Gv.f()),await a.t(wp.f(s,a.r([a.r([await a.t(rp.f(l,n)),Nt,await a.t(rp.f(f,n))]),a.r([await a.t(rp.f(r,n)),Nt,a.r([Zl,await a.t(rp.f(f,n))])])],await a.t(rp.f(t,n))),n,i))))(t.tail))):U)(await a.t(rp.f(e.tail,n))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(e.tail,n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(e.tail,n))):U)(await a.t(rp.f(o.tail,n))))(o.head):U)(await a.t(rp.f(o.tail,n))))(o.head):U)(await a.t(rp.f(o.tail,n))):U)(await a.t(rp.f(o.head,n))):U)(await a.t(rp.f(e.head,n))):U)(await a.t(rp.f(t.head,n))):U)(await a.t(rp.f(t,n)))))),a.d("shen.show",a.l(async(t,s,n,i)=>a.asJsBool(ui.get())?(await a.t(c_.f()),await a.t(h_.f(await a.t(op.f(t,n)))),await a.t(Nd.f(1)),await a.t(Nd.f(1)),await a.t(y_.f(await a.t(op.f(s,n)),1)),await a.t(Xa.f("\n> ",await a.t(Qa.f()))),await a.t(d_.f()),a.b(Ks.f,i)):a.b(Ks.f,i))),a.d("shen.line",a.l(async()=>await(async t=>a.b(Xa.f,"____________________________________________________________ "+a.asString(await a.t(e.f(t," inference"+a.asString(await a.t(e.f(1===t?"":"s"," \n?- ",l))),l))),await a.t(Qa.f())))(await a.t(yC.f())))),a.d("shen.show-p",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&Nt===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.b(Xa.f,await a.t(e.f(a.asCons(t).head," : "+a.asString(await a.t(e.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head,"",wu))),wu)),await a.t(Qa.f())):a.b(Xa.f,await a.t(e.f(t,"",wu)),await a.t(Qa.f())))),a.d("shen.show-assumptions",a.l(async(t,s)=>null===t?ha:a.isCons(t)?(await a.t(Xa.f(await a.t(e.f(s,". ",l)),await a.t(Qa.f()))),await a.t(h_.f(t.head)),await a.t(Nd.f(1)),a.b(y_.f,t.tail,a.asNumber(s)+1)):a.b(Na.f,C_))),a.d("shen.pause-for-user",a.l(async()=>await(async t=>94===t?a.raise("input aborted\n"):a.b(Nd.f,1))(a.asInStream(await a.t(xv.f())).read()))),a.d("shen.typedf?",a.l(async t=>a.asShenBool(a.isCons(await a.t(dt.f(t,Ct.get())))))),a.d("shen.sigf",a.l(async t=>a.b(eC.f,u_,t))),a.d("shen.placeholder",a.l(async()=>a.b(oa.f,ul))),a.d("shen.base",a.l(async(t,s,n,i)=>await(async e=>e===U?await(async e=>e===U?await(async e=>e===U?await(async e=>e===U?await(async t=>null===t?await(async t=>a.isCons(t)?await(async s=>Zl===s?await(async t=>a.isCons(t)?await(async s=>await(async t=>null===t?(await a.t(Gv.f()),a.b(Ks.f,i)):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,n)),await(async s=>(await a.t(Cp.f(t,n)),s))((await a.t(Gv.f()),await a.t(Ks.f(i))))):U)(await a.t(rp.f(t.tail,n))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([s]),n)),await(async s=>(await a.t(Cp.f(t,n)),s))((await a.t(Gv.f()),await a.t(Ks.f(i))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(t.tail,n))):a.asJsBool(await a.t(fp.f(s)))?(await a.t(dp.f(s,Zl,n)),await(async t=>(await a.t(Cp.f(s,n)),t))(await(async t=>a.isCons(t)?await(async s=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(Ks.f(i))):a.asJsBool(await a.t(fp.f(t)))?(await a.t(dp.f(t,null,n)),await(async s=>(await a.t(Cp.f(t,n)),s))((await a.t(Gv.f()),await a.t(Ks.f(i))))):U)(await a.t(rp.f(t.tail,n))))(t.head):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([s]),n)),await(async s=>(await a.t(Cp.f(t,n)),s))((await a.t(Gv.f()),await a.t(Ks.f(i))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(t.tail,n))))):U)(await a.t(rp.f(t.head,n))):a.asJsBool(await a.t(fp.f(t)))?await(async s=>(await a.t(dp.f(t,a.r([Zl,s]),n)),await(async s=>(await a.t(Cp.f(t,n)),s))((await a.t(Gv.f()),await a.t(Ks.f(i))))))(await a.t(Op.f(n))):U)(await a.t(rp.f(s,n))):U)(await a.t(rp.f(t,n))):e)(await(async s=>Bt===s?(await a.t(Gv.f()),await a.t(Yv.f(await a.t(b.f(await a.t(rp.f(t,n)))),n,a.l(async()=>a.b(Yv.f,a.asShenBool(!a.asJsBool(await a.t(b_.f(await a.t(rp.f(t,n)))))),n,i))))):a.asJsBool(await a.t(fp.f(s)))?(await a.t(dp.f(s,Bt,n)),await(async t=>(await a.t(Cp.f(s,n)),t))((await a.t(Gv.f()),await a.t(Yv.f(await a.t(b.f(await a.t(rp.f(t,n)))),n,a.l(async()=>a.b(Yv.f,a.asShenBool(!a.asJsBool(await a.t(b_.f(await a.t(rp.f(t,n)))))),n,i))))))):U)(await a.t(rp.f(s,n)))):e)(await(async s=>gt===s?(await a.t(Gv.f()),await a.t(Yv.f(a.asShenBool(a.isString(await a.t(rp.f(t,n)))),n,i))):a.asJsBool(await a.t(fp.f(s)))?(await a.t(dp.f(s,gt,n)),await(async t=>(await a.t(Cp.f(s,n)),t))((await a.t(Gv.f()),await a.t(Yv.f(a.asShenBool(a.isString(await a.t(rp.f(t,n)))),n,i))))):U)(await a.t(rp.f(s,n)))):e)(await(async s=>_t===s?(await a.t(Gv.f()),await a.t(Yv.f(await a.t(vt.f(await a.t(rp.f(t,n)))),n,i))):a.asJsBool(await a.t(fp.f(s)))?(await a.t(dp.f(s,_t,n)),await(async t=>(await a.t(Cp.f(s,n)),t))((await a.t(Gv.f()),await a.t(Yv.f(await a.t(vt.f(await a.t(rp.f(t,n)))),n,i))))):U)(await a.t(rp.f(s,n)))):e)(await(async s=>St===s?(await a.t(Gv.f()),await a.t(Yv.f(a.asShenBool(a.isNumber(await a.t(rp.f(t,n)))),n,i))):a.asJsBool(await a.t(fp.f(s)))?(await a.t(dp.f(s,St,n)),await(async t=>(await a.t(Cp.f(s,n)),t))((await a.t(Gv.f()),await a.t(Yv.f(a.asShenBool(a.isNumber(await a.t(rp.f(t,n)))),n,i))))):U)(await a.t(rp.f(s,n)))))),a.d("shen.by_hypothesis",a.l(async(t,s,n,i,e)=>await(async o=>o===U?await(async n=>a.isCons(n)?await(async n=>(await a.t(Gv.f()),a.b(l_.f,t,s,n,i,e)))(n.tail):U)(await a.t(rp.f(n,i))):o)(await(async n=>a.isCons(n)?await(async n=>a.isCons(n)?await(async o=>await(async n=>a.isCons(n)?await(async l=>Nt===l?await(async n=>a.isCons(n)?await(async l=>await(async n=>null===n?(await a.t(Gv.f()),await a.t(zd.f(t,o,i,a.l(async()=>a.b(Vy.f,s,l,i,e))))):U)(await a.t(rp.f(n.tail,i))))(n.head):U)(await a.t(rp.f(n.tail,i))):U)(await a.t(rp.f(n.head,i))):U)(await a.t(rp.f(n.tail,i))))(n.head):U)(await a.t(rp.f(n.head,i))):U)(await a.t(rp.f(n,i)))))),a.d("shen.t*-def",a.l(async(s,n,i,o,l)=>await(async s=>a.isCons(s)?await(async r=>wi===r?await(async s=>a.isCons(s)?await(async r=>await(async s=>await(async f=>await(async f=>(await a.t(Gv.f()),a.b(p_.f,await a.t(t.f(a.l(async t=>a.b(m_.f,t)),s,a.l(async t=>a.isCons(t)?a.raise("parse error here: "+a.asString(await a.t(e.f(t,"\n",gs)))):a.raise("parse error\n")))),r,n,i,o,l)))(await a.t(Op.f(o))))(await a.t(Op.f(o))))(s.tail))(s.head):U)(await a.t(rp.f(s.tail,o))):U)(await a.t(rp.f(s.head,o))):U)(await a.t(rp.f(s,o))))),a.d("shen.t*-defh",a.l(async(t,s,n,i,e,o)=>await(async t=>a.isCons(t)?await(async l=>await(async t=>(await a.t(Gv.f()),a.b(g_.f,l,await a.t(S_.f(l)),s,n,i,t,e,o)))(t.tail))(t.head):U)(await a.t(rp.f(t,e))))),a.d("shen.t*-defhh",a.l(async(t,s,n,i,e,o,l,r)=>(await a.t(Gv.f()),a.b(v_.f,o,s,1,n,a.r([a.r([n,Nt,s])],e),l,a.l(async()=>a.b(__.f,n,t,i,l,r)))))),a.d("shen.memo",a.l(async(t,s,n,i,e)=>await(async o=>(await a.t(Gv.f()),a.b(Vy.f,n,s,i,a.l(async()=>a.b(wp.f,o,await a.t(iC.f(await a.t(rp.f(t,i)),await a.t(rp.f(n,i)))),i,e)))))(await a.t(Op.f(i))))),a.d("shen.<sig+rules>",a.l(async t=>await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):await(async s=>a.equate(await a.t(f.f()),s)?a.b(f.f):a.b(h.f,a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s)))))(await a.t(B_.f(t))))(await a.t(w.f(t))))),a.d("shen.<non-ll-rules>",a.l(async t=>await(async s=>a.equate(s,await a.t(f.f()))?await(async t=>a.equate(await a.t(f.f()),t)?a.b(f.f):a.b(h.f,a.asCons(t).head,a.r([await a.t(d.f(t))])))(await a.t(P.f(t))):s)(await(async t=>a.equate(await a.t(f.f()),t)?await a.t(f.f()):await(async s=>a.equate(await a.t(f.f()),s)?await a.t(f.f()):await a.t(h.f(a.asCons(s).head,a.r([await a.t(d.f(t))],await a.t(d.f(s))))))(await a.t(B_.f(t))))(await a.t(P.f(t)))))),a.d("shen.ue",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail&&t.head===Ta?t:a.isCons(t)?a.b(T.f,a.l(async t=>a.b(x_.f,t)),t):a.asJsBool(await a.t(Oa.f(t)))?a.b(eC.f,ul,t):t)),a.d("shen.ue-sig",a.l(async t=>a.isCons(t)?a.b(T.f,a.l(async t=>a.b(S_.f,t)),t):a.asJsBool(await a.t(Oa.f(t)))?a.b(eC.f,q_,t):t)),a.d("shen.ues",a.l(async t=>a.asJsBool(await a.t(b_.f(t)))?a.r([t]):a.isCons(t)?a.b(Aa.f,await a.t(j_.f(t.head)),await a.t(j_.f(t.tail))):null)),a.d("shen.ue?",a.l(async t=>a.asShenBool(a.asJsBool(await a.t(b.f(t)))&&a.asJsBool(await a.t(J_.f(a.show(t))))))),a.d("shen.ue-h?",a.l(async t=>a.asJsBool(await a.t(ZS.f(t)))&&"&"===_d.f(t,0)&&a.asJsBool(await a.t(ZS.f(a.asNeString(t).substring(1))))&&"&"===_d.f(a.asNeString(t).substring(1),0)?V:U)),a.d("shen.t*-rules",a.l(async(t,s,n,i,o,r,f)=>await(async w=>a.b(Kv.f,w,await(async c=>c===U?await(async t=>t===U?await(async t=>(await a.t(Gv.f()),await a.t(wp.f(t,a.raise("type error in rule "+a.asString(await a.t(e.f(await a.t(rp.f(n,r))," of "+a.asString(await a.t(e.f(await a.t(rp.f(i,r)),"",l))),l)))),r,f))))(await a.t(Op.f(r))):t)(await(async t=>a.isCons(t)?await(async e=>await(async t=>(await a.t(Gv.f()),await a.t(N_.f(await a.t(x_.f(e)),s,o,r,a.l(async()=>a.b(Zv.f,w,r,a.l(async()=>a.b(v_.f,t,s,a.asNumber(n)+1,i,o,r,f))))))))(t.tail))(t.head):U)(await a.t(rp.f(t,r)))):c)(await(async t=>null===t?(await a.t(Gv.f()),await a.t(Ks.f(f))):U)(await a.t(rp.f(t,r))))))(await a.t(Wv.f())))),a.d("shen.t*-rule",a.l(async(t,s,n,i,e)=>await(async o=>a.b(Kv.f,o,await(async t=>a.isCons(t)?await(async l=>await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?await(async t=>(await a.t(Gv.f()),await a.t(k_.f(await a.t(O_.f(l)),n,t,i,a.l(async()=>a.b(A_.f,l,s,t,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(T_.f,await a.t(Mg.f(await a.t(x_.f(r)))),await a.t(E_.f(l,s)),await a.t(P_.f(l,s,n)),i,e))))))))))(await a.t(Op.f(i))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t,i)))))(await a.t(Wv.f())))),a.d("shen.placeholders",a.l(async t=>a.asJsBool(await a.t(b_.f(t)))?a.r([t]):a.isCons(t)?a.b(Aa.f,await a.t(O_.f(t.head)),await a.t(O_.f(t.tail))):null)),a.d("shen.newhyps",a.l(async(t,s,n,i,e)=>await(async o=>o===U?await(async t=>a.isCons(t)?await(async o=>await(async t=>await(async n=>a.isCons(n)?await(async l=>a.isCons(l)?await(async r=>await(async l=>a.isCons(l)?await(async f=>Nt===f?await(async l=>a.isCons(l)?await(async f=>await(async l=>null===l?await(async n=>(await a.t(Gv.f()),a.b(Vy.f,r,o,i,a.l(async()=>a.b(k_.f,t,s,n,i,e)))))(n.tail):a.asJsBool(await a.t(fp.f(l)))?(await a.t(dp.f(l,null,i)),await(async t=>(await a.t(Cp.f(l,i)),t))(await(async n=>(await a.t(Gv.f()),await a.t(Vy.f(r,o,i,a.l(async()=>a.b(k_.f,t,s,n,i,e))))))(n.tail))):U)(await a.t(rp.f(l.tail,i))))(l.head):a.asJsBool(await a.t(fp.f(l)))?await(async f=>(await a.t(dp.f(l,a.r([f]),i)),await(async t=>(await a.t(Cp.f(l,i)),t))(await(async n=>(await a.t(Gv.f()),await a.t(Vy.f(r,o,i,a.l(async()=>a.b(k_.f,t,s,n,i,e))))))(n.tail))))(await a.t(Op.f(i))):U)(await a.t(rp.f(l.tail,i))):a.asJsBool(await a.t(fp.f(f)))?(await a.t(dp.f(f,Nt,i)),await(async t=>(await a.t(Cp.f(f,i)),t))(await(async l=>a.isCons(l)?await(async f=>await(async l=>null===l?await(async n=>(await a.t(Gv.f()),await a.t(Vy.f(r,o,i,a.l(async()=>a.b(k_.f,t,s,n,i,e))))))(n.tail):a.asJsBool(await a.t(fp.f(l)))?(await a.t(dp.f(l,null,i)),await(async t=>(await a.t(Cp.f(l,i)),t))(await(async n=>(await a.t(Gv.f()),await a.t(Vy.f(r,o,i,a.l(async()=>a.b(k_.f,t,s,n,i,e))))))(n.tail))):U)(await a.t(rp.f(l.tail,i))))(l.head):a.asJsBool(await a.t(fp.f(l)))?await(async f=>(await a.t(dp.f(l,a.r([f]),i)),await(async t=>(await a.t(Cp.f(l,i)),t))(await(async n=>(await a.t(Gv.f()),await a.t(Vy.f(r,o,i,a.l(async()=>a.b(k_.f,t,s,n,i,e))))))(n.tail))))(await a.t(Op.f(i))):U)(await a.t(rp.f(l.tail,i))))):U)(await a.t(rp.f(l.head,i))):a.asJsBool(await a.t(fp.f(l)))?await(async f=>(await a.t(dp.f(l,a.r([Nt,f]),i)),await(async t=>(await a.t(Cp.f(l,i)),t))(await(async n=>(await a.t(Gv.f()),await a.t(Vy.f(r,o,i,a.l(async()=>a.b(k_.f,t,s,n,i,e))))))(n.tail))))(await a.t(Op.f(i))):U)(await a.t(rp.f(l.tail,i))))(l.head):a.asJsBool(await a.t(fp.f(l)))?await(async r=>await(async f=>(await a.t(dp.f(l,a.r([r,Nt,f]),i)),await(async t=>(await a.t(Cp.f(l,i)),t))(await(async n=>(await a.t(Gv.f()),await a.t(Vy.f(r,o,i,a.l(async()=>a.b(k_.f,t,s,n,i,e))))))(n.tail))))(await a.t(Op.f(i))))(await a.t(Op.f(i))):U)(await a.t(rp.f(n.head,i))):a.asJsBool(await a.t(fp.f(n)))?await(async l=>await(async r=>await(async f=>(await a.t(dp.f(n,a.r([a.r([l,Nt,r])],f),i)),await(async t=>(await a.t(Cp.f(n,i)),t))((await a.t(Gv.f()),await a.t(Vy.f(l,o,i,a.l(async()=>a.b(k_.f,t,s,f,i,e))))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))))(await a.t(Op.f(i))):U)(await a.t(rp.f(n,i))))(t.tail))(t.head):U)(await a.t(rp.f(t,i))):o)(await(async t=>null===t?(await a.t(Gv.f()),await a.t(Vy.f(n,s,i,e))):U)(await a.t(rp.f(t,i)))))),a.d("shen.patthyps",a.l(async(t,s,n)=>null===t?n:a.isCons(t)&&a.isCons(s)&&a.isCons(s.tail)&&O===a.asCons(s.tail).head&&a.isCons(a.asCons(s.tail).tail)&&null===a.asCons(a.asCons(s.tail).tail).tail?a.b(ys.f,a.r([await a.t(Mg.f(a.asCons(t).head)),Nt,a.asCons(s).head]),await a.t(P_.f(a.asCons(t).tail,a.asCons(a.asCons(a.asCons(s).tail).tail).head,n))):a.b(Na.f,I_))),a.d("shen.result-type",a.l(async(t,s)=>null===t&&a.isCons(s)&&O===s.head&&a.isCons(s.tail)&&null===a.asCons(s.tail).tail?a.asCons(a.asCons(s).tail).head:null===t?s:a.isCons(t)&&a.isCons(s)&&a.isCons(s.tail)&&O===a.asCons(s.tail).head&&a.isCons(a.asCons(s.tail).tail)&&null===a.asCons(a.asCons(s.tail).tail).tail?a.b(E_.f,a.asCons(t).tail,a.asCons(a.asCons(a.asCons(s).tail).tail).head):a.b(Na.f,L_))),a.d("shen.t*-patterns",a.l(async(t,s,n,i,e)=>await(async o=>o===U?await(async t=>a.isCons(t)?await(async o=>await(async t=>await(async s=>a.isCons(s)?await(async l=>await(async s=>a.isCons(s)?await(async r=>O===r?await(async s=>a.isCons(s)?await(async r=>await(async s=>null===s?(await a.t(Gv.f()),a.b(zv.f,a.r([await a.t(Mg.f(o)),Nt,l]),n,i,a.l(async()=>a.b(A_.f,t,r,n,i,e)))):U)(await a.t(rp.f(s.tail,i))))(s.head):U)(await a.t(rp.f(s.tail,i))):U)(await a.t(rp.f(s.head,i))):U)(await a.t(rp.f(s.tail,i))))(s.head):U)(await a.t(rp.f(s,i))))(t.tail))(t.head):U)(await a.t(rp.f(t,i))):o)(await(async t=>null===t?(await a.t(Gv.f()),await a.t(Ks.f(e))):U)(await a.t(rp.f(t,i)))))),a.d("shen.t*-action",a.l(async(t,s,n,i,e)=>await(async o=>a.b(Kv.f,o,await(async l=>l===U?await(async l=>l===U?await(async o=>o===U?(await a.t(Gv.f()),await a.t(zv.f(a.r([t,Nt,s]),n,i,e))):o)(await(async t=>a.isCons(t)?await(async l=>z===l?await(async t=>a.isCons(t)?await(async l=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(Zv.f(o,i,a.l(async()=>a.b(T_.f,a.r([M,a.r([Ve,a.r([a.r([$a,l]),a.r([as])])]),l]),s,n,i,e))))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async l=>z===l?await(async t=>a.isCons(t)?await(async l=>a.isCons(l)?await(async r=>a.isCons(r)?await(async f=>fe===f?await(async r=>a.isCons(r)?await(async f=>await(async r=>null===r?await(async l=>a.isCons(l)?await(async r=>await(async l=>null===l?await(async t=>null===t?(await a.t(Gv.f()),await a.t(Zv.f(o,i,a.l(async()=>a.b(T_.f,a.r([M,a.r([Ve,a.r([f,r])]),r]),s,n,i,e))))):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(l.tail,i))))(l.head):U)(await a.t(rp.f(l.tail,i))):U)(await a.t(rp.f(r.tail,i))))(r.head):U)(await a.t(rp.f(r.tail,i))):U)(await a.t(rp.f(r.head,i))):U)(await a.t(rp.f(l.head,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i)))):l)(await(async t=>a.isCons(t)?await(async l=>M===l?await(async t=>a.isCons(t)?await(async l=>await(async t=>a.isCons(t)?await(async r=>await(async t=>null===t?(await a.t(Gv.f()),await a.t(Zv.f(o,i,a.l(async()=>a.b(zv.f,a.r([l,Nt,_t]),n,i,a.l(async()=>a.b(Zv.f,o,i,a.l(async()=>a.b(T_.f,r,s,a.r([a.r([l,Nt,Ll])],n),i,e))))))))):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))))(t.head):U)(await a.t(rp.f(t.tail,i))):U)(await a.t(rp.f(t.head,i))):U)(await a.t(rp.f(t,i))))))(await a.t(Wv.f())))),a.d("findall",a.l(async(t,s,n,i,e)=>await(async o=>await(async r=>(await a.t(Gv.f()),a.b(wp.f,r,await a.t(oa.f(l)),i,a.l(async()=>a.b(wp.f,o,a.c(a.nameOf(a.asSymbol(await a.t(rp.f(r,i))))).set(null),i,a.l(async()=>a.b(F_.f,t,s,n,r,i,e)))))))(await a.t(Op.f(i))))(await a.t(Op.f(i))))),a.d("shen.findallhelp",a.l(async(t,s,n,i,e,o)=>await(async t=>t===U?(await a.t(Gv.f()),a.b(wp.f,n,a.valueOf(a.nameOf(a.asSymbol(await a.t(rp.f(i,e))))),e,o)):t)((await a.t(Gv.f()),await a.t(pp.f(s,e,a.l(async()=>a.b(D_.f,i,t,e,a.l(async()=>a.b(Yv.f,U,e,o)))))))))),a.d("shen.remember",a.l(async(t,s,n,i)=>await(async e=>(await a.t(Gv.f()),a.b(wp.f,e,a.c(a.nameOf(a.asSymbol(await a.t(op.f(t,n))))).set(a.r([await a.t(op.f(s,n))],a.valueOf(a.nameOf(a.asSymbol(await a.t(op.f(t,n))))))),n,i)))(await a.t(Op.f(n))))),a.d("shen.repl",a.l(async()=>(await a.t(M_.f()),a.b(R_.f)))),a.d("shen.loop",a.l(async()=>(await a.t($_.f()),await a.t(z_.f()),await(async()=>{try{return await a.t(U_.f())}catch(t){return await a.t(V_.f(t))}})(),a.b(R_.f)))),a.d("shen.toplevel-display-exception",a.l(async t=>a.b(vd.f,a.asError(t).message,await a.t(Qa.f())))),a.d("shen.credits",a.l(async()=>(await a.t(Xa.f("Shen, copyright (C) 2010-2015 Mark Tarver\n",await a.t(Qa.f()))),await a.t(Xa.f("www.shenlanguage.org, "+a.asString(await a.t(e.f(ki.get(),"\n",l))),await a.t(Qa.f()))),await a.t(Xa.f("running under "+a.asString(await a.t(e.f(Iv.get(),", implementation: "+a.asString(await a.t(e.f(Dv.get(),"",l))),l))),await a.t(Qa.f()))),a.b(Xa.f,"\nport "+a.asString(await a.t(e.f(Lv.get()," ported by "+a.asString(await a.t(e.f(Fv.get(),"\n",l))),l))),await a.t(Qa.f()))))),a.d("shen.initialise_environment",a.l(async()=>a.b(W_.f,a.r([K_,0,G_,0,Y_,0,X_,0])))),a.d("shen.multiple-set",a.l(async t=>null===t?null:a.isCons(t)&&a.isCons(t.tail)?(a.c(a.nameOf(a.asSymbol(a.asCons(t).head))).set(a.asCons(a.asCons(t).tail).head),a.b(W_.f,a.asCons(a.asCons(t).tail).tail)):a.b(Na.f,Q_))),a.d("destroy",a.l(async t=>a.b(iC.f,t,Bt))),a.d("shen.read-evaluate-print",a.l(async()=>await(async t=>await(async s=>await(async t=>await(async s=>await(async t=>a.b(tB.f,t))(await a.t(Gd.f(t))))(await a.t(aB.f(t,s))))(await a.t(H_.f(t,s))))(Ds.get()))(await a.t(Z_.f())))),a.d("shen.retrieve-from-history-if-needed",a.l(async(t,s)=>a.asJsBool(await a.t(Qy.f(t)))&&a.isCons(await a.t(rd.f(t)))&&a.asJsBool(await a.t(m.f(a.asCons(await a.t(rd.f(t))).head,a.r([await a.t(sB.f()),await a.t(Kp.f())]))))?a.b(H_.f,await a.t(Ay.f(await a.t(Gd.f(t)),a.asCons(await a.t(rd.f(t))).tail)),s):a.asJsBool(await a.t(Qy.f(t)))&&a.isCons(await a.t(rd.f(t)))&&a.isCons(a.asCons(await a.t(rd.f(t))).tail)&&null===a.asCons(a.asCons(await a.t(rd.f(t))).tail).tail&&a.isCons(s)&&a.equate(a.asCons(await a.t(rd.f(t))).head,await a.t(nB.f()))&&a.equate(a.asCons(a.asCons(await a.t(rd.f(t))).tail).head,await a.t(nB.f()))?await(async t=>a.asCons(s).head)(await a.t(iB.f(await a.t(rd.f(a.asCons(s).head))))):a.asJsBool(await a.t(Qy.f(t)))&&a.isCons(await a.t(rd.f(t)))&&a.equate(a.asCons(await a.t(rd.f(t))).head,await a.t(nB.f()))?await(async t=>await(async t=>await(async a=>t)(await a.t(iB.f(await a.t(rd.f(t))))))(await a.t(Ud.f(await a.t(oB.f(t,s))))))(await a.t(eB.f(a.asCons(await a.t(rd.f(t))).tail,s))):a.asJsBool(await a.t(Qy.f(t)))&&a.isCons(await a.t(rd.f(t)))&&null===a.asCons(await a.t(rd.f(t))).tail&&a.equate(a.asCons(await a.t(rd.f(t))).head,await a.t(lB.f()))?(await a.t(rB.f(a.l(async a=>V),await a.t(Jt.f(s)),0)),a.b(fB.f)):a.asJsBool(await a.t(Qy.f(t)))&&a.isCons(await a.t(rd.f(t)))&&a.equate(a.asCons(await a.t(rd.f(t))).head,await a.t(lB.f()))?await(async t=>await(async t=>a.b(fB.f))(await a.t(rB.f(t,await a.t(Jt.f(s)),0))))(await a.t(eB.f(a.asCons(await a.t(rd.f(t))).tail,s))):t)),a.d("shen.percent",a.l(()=>37)),a.d("shen.exclamation",a.l(()=>33)),a.d("shen.prbytes",a.l(async t=>(await a.t(ba.f(a.l(async t=>a.b(vd.f,String.fromCharCode(a.asNumber(t)),await a.t(Qa.f()))),t)),a.b(Nd.f,1)))),a.d("shen.update_history",a.l((t,s)=>Ds.set(a.r([t],s)))),a.d("shen.toplineread",a.l(async()=>a.b(wB.f,await a.t(Ep.f(await a.t(xv.f()))),null))),a.d("shen.toplineread_loop",a.l(async(s,n)=>a.equate(s,await a.t(Wp.f()))?a.raise("line read aborted"):a.asJsBool(await a.t(m.f(s,a.r([await a.t(Kp.f()),await a.t(Gp.f())]))))?await(async t=>await(async i=>t===Yp||a.asJsBool(await a.t(ut.f(t)))?a.b(wB.f,await a.t(Ep.f(await a.t(xv.f()))),await a.t(Ra.f(n,a.r([s])))):a.b(Ay.f,t,n))(await a.t(zp.f(n))))(await a.t(t.f(a.l(async t=>a.b(Rp.f,t)),n,a.l(async a=>Yp)))):a.b(wB.f,await a.t(Ep.f(await a.t(xv.f()))),-1===s?n:await a.t(Ra.f(n,a.r([s])))))),a.d("shen.hat",a.l(()=>94)),a.d("shen.newline",a.l(()=>10)),a.d("shen.carriage-return",a.l(()=>13)),a.d("tc",a.l(t=>ol===t?Ms.set(V):rl===t?Ms.set(U):a.raise("tc expects a + or -"))),a.d("shen.prompt",a.l(async()=>a.asJsBool(Ms.get())?a.b(Xa.f,"\n\n("+a.asString(await a.t(e.f(await a.t(Ga.f(Ds.get())),"+) ",l))),await a.t(Qa.f())):a.b(Xa.f,"\n\n("+a.asString(await a.t(e.f(await a.t(Ga.f(Ds.get())),"-) ",l))),await a.t(Qa.f())))),a.d("shen.toplevel",a.l(async t=>a.b(cB.f,t,Ms.get()))),a.d("shen.find-past-inputs",a.l(async(t,s)=>await(async t=>a.asJsBool(await a.t(ut.f(t)))?a.raise("input not found\n"):t)(await a.t(hB.f(t,s))))),a.d("shen.make-key",a.l(async(s,n)=>await(async t=>a.asJsBool(await a.t(Ld.f(t)))?a.l(async s=>a.asShenBool(a.equate(s,await a.t(Jd.f(a.asNumber(t)+1,await a.t(Jt.f(n))))))):a.l(async t=>a.b(bg.f,s,await a.t(yB.f(await a.t(rd.f(t)))))))(a.asCons(await a.t(t.f(a.l(async t=>a.b(Rp.f,t)),s,a.l(async t=>a.isCons(t)?a.raise("parse error here: "+a.asString(await a.t(e.f(t,"\n",gs)))):a.raise("parse error\n"))))).head))),a.d("shen.trim-gubbins",a.l(async t=>a.isCons(t)&&a.equate(t.head,await a.t(sB.f()))?a.b(yB.f,a.asCons(t).tail):a.isCons(t)&&a.equate(t.head,await a.t(Kp.f()))?a.b(yB.f,a.asCons(t).tail):a.isCons(t)&&a.equate(t.head,await a.t(Gp.f()))?a.b(yB.f,a.asCons(t).tail):a.isCons(t)&&a.equate(t.head,await a.t(dB.f()))?a.b(yB.f,a.asCons(t).tail):a.isCons(t)&&a.equate(t.head,await a.t(CB.f()))?a.b(yB.f,a.asCons(t).tail):t)),a.d("shen.space",a.l(()=>32)),a.d("shen.tab",a.l(()=>9)),a.d("shen.left-round",a.l(()=>40)),a.d("shen.find",a.l(async(t,s)=>null===s?null:a.isCons(s)&&a.asJsBool(await a.t(t(s.head)))?a.r([a.asCons(s).head],await a.t(hB.f(t,a.asCons(s).tail))):a.isCons(s)?a.b(hB.f,t,s.tail):a.b(Na.f,uB))),a.d("shen.prefix?",a.l((t,s)=>null===t?V:a.isCons(t)&&a.isCons(s)&&a.equate(s.head,t.head)?a.b(bg.f,a.asCons(t).tail,a.asCons(s).tail):U)),a.d("shen.print-past-inputs",a.l(async(t,s,n)=>null===s?ea:a.isCons(s)&&!a.asJsBool(await a.t(t(s.head)))?a.b(rB.f,t,a.asCons(s).tail,a.asNumber(n)+1):a.isCons(s)&&a.asJsBool(await a.t(Qy.f(s.head)))?(await a.t(Xa.f(await a.t(e.f(n,". ",l)),await a.t(Qa.f()))),await a.t(iB.f(await a.t(rd.f(a.asCons(s).head)))),a.b(rB.f,t,a.asCons(s).tail,a.asNumber(n)+1)):a.b(Na.f,bB))),a.d("shen.toplevel_evaluate",a.l(async(t,s)=>a.isCons(t)&&a.isCons(t.tail)&&Nt===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail&&V===s?a.b(SC.f,a.asCons(t).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head):a.isCons(t)&&a.isCons(t.tail)?(await a.t(cB.f(a.r([a.asCons(t).head]),s)),await a.t(Nd.f(1)),a.b(cB.f,a.asCons(t).tail,s)):a.isCons(t)&&null===t.tail&&V===s?a.b(SC.f,a.asCons(t).head,await a.t(oa.f(In))):a.isCons(t)&&null===t.tail&&U===s?await(async t=>a.b(Sd.f,t))(await a.t(dC.f(a.asCons(t).head))):a.b(Na.f,pB))),a.d("shen.typecheck-and-evaluate",a.l(async(t,s)=>await(async s=>s===U?a.raise("type error\n"):await(async t=>await(async s=>a.b(Xa.f,await a.t(e.f(t," : "+a.asString(await a.t(e.f(s,"",wu))),gs)),await a.t(Qa.f())))(await a.t(mB.f(s))))(await a.t(dC.f(t))))(await a.t(Fp.f(t,s))))),a.d("shen.pretty-type",a.l(async t=>a.b(gB.f,Pn.get(),await a.t(SB.f(t)),t))),a.d("shen.extract-pvars",a.l(async t=>a.asJsBool(await a.t(fp.f(t)))?a.r([t]):a.isCons(t)?a.b(Aa.f,await a.t(SB.f(t.head)),await a.t(SB.f(t.tail))):null)),a.d("shen.mult_subst",a.l(async(t,s,n)=>null===t?n:null===s?n:a.isCons(t)&&a.isCons(s)?a.b(gB.f,a.asCons(t).tail,a.asCons(s).tail,await a.t(id.f(a.asCons(t).head,a.asCons(s).head,n))):a.b(Na.f,vB))),a.d("shen.f_error",a.l(async t=>(await a.t(Xa.f("partial function "+a.asString(await a.t(e.f(t,";\n",l))),await a.t(Qa.f()))),!a.asJsBool(await a.t(_B.f(t)))&&a.asJsBool(await a.t(Iy.f("track "+a.asString(await a.t(e.f(t,"? ",l))))))&&await a.t(BB.f(await a.t(bd.f(t)))),a.raise("aborted")))),a.d("shen.tracked?",a.l(async t=>a.b(m.f,t,En.get()))),a.d("track",a.l(async t=>await(async t=>a.b(BB.f,t))(await a.t(bd.f(t))))),a.d("shen.track-function",a.l(async t=>a.isCons(t)&&ht===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?await(async t=>await(async t=>await(async a=>t)(En.set(a.r([t],En.get()))))(await a.t(Ba.f(t))))(a.r([ht,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,await a.t(xB.f(a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).head))])):a.b(Na.f,qB))),a.d("shen.insert-tracking-code",a.l(async(t,s,n)=>a.r([Hi,a.r([li,K_,a.r([ol,a.r([al,K_]),1])]),a.r([Hi,a.r([jB,a.r([al,K_]),t,await a.t(Ju.f(s))]),a.r([Hi,a.r([JB]),a.r([Pa,Zt,n,a.r([Hi,a.r([NB,a.r([al,K_]),t,Zt]),a.r([Hi,a.r([li,K_,a.r([rl,a.r([al,K_]),1])]),a.r([Hi,a.r([JB]),Zt])])])])])])]))),a.d("step",a.l(t=>ol===t?yr.set(V):rl===t?yr.set(U):a.raise("step expects a + or a -.\n"))),a.d("spy",a.l(t=>ol===t?ui.set(V):rl===t?ui.set(U):a.raise("spy expects a + or a -.\n"))),a.d("shen.terpri-or-read-char",a.l(async()=>a.asJsBool(yr.get())?a.b(kB.f,a.asInStream(XS.get()).read()):a.b(Nd.f,1))),a.d("shen.check-byte",a.l(async t=>a.equate(t,await a.t(Wp.f()))?a.raise("aborted"):V)),a.d("shen.input-track",a.l(async(t,s,n)=>(await a.t(Xa.f("\n"+a.asString(await a.t(e.f(await a.t(OB.f(t)),"<"+a.asString(await a.t(e.f(t,"> Inputs to "+a.asString(await a.t(e.f(s," \n"+a.asString(await a.t(e.f(await a.t(OB.f(t)),"",l))),l))),l))),l))),await a.t(Qa.f()))),a.b(AB.f,n)))),a.d("shen.recursively-print",a.l(async t=>null===t?a.b(Xa.f," ==>",await a.t(Qa.f())):a.isCons(t)?(await a.t(Sd.f(t.head)),await a.t(Xa.f(", ",await a.t(Qa.f()))),a.b(AB.f,t.tail)):a.b(Na.f,TB))),a.d("shen.spaces",a.l(t=>0===t?"":" "+a.asString(a.t(OB.f(a.asNumber(t)-1))))),a.d("shen.output-track",a.l(async(t,s,n)=>a.b(Xa.f,"\n"+a.asString(await a.t(e.f(await a.t(OB.f(t)),"<"+a.asString(await a.t(e.f(t,"> Output from "+a.asString(await a.t(e.f(s," \n"+a.asString(await a.t(e.f(await a.t(OB.f(t)),"==> "+a.asString(await a.t(e.f(n,"",gs))),l))),l))),l))),l))),await a.t(Qa.f())))),a.d("untrack",a.l(async t=>await(async s=>await(async s=>a.b(tC.f,await a.t(bd.f(t))))(En.set(await a.t(ms.f(t,s)))))(En.get()))),a.d("profile",a.l(async t=>a.b(EB.f,await a.t(bd.f(t))))),a.d("shen.profile-help",a.l(async t=>a.isCons(t)&&ht===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).tail).tail).tail?await(async s=>await(async n=>await(async s=>await(async n=>await(async s=>a.asCons(a.asCons(t).tail).head)(await a.t(dC.f(s))))(await a.t(dC.f(n))))(a.r([ht,s,a.asCons(a.asCons(a.asCons(t).tail).tail).head,await a.t(id.f(s,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).tail).head))])))(a.r([ht,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,await a.t(IB.f(a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.r([s],a.asCons(a.asCons(a.asCons(t).tail).tail).head)))])))(await a.t(oa.f(PB))):a.raise("Cannot profile.\n"))),a.d("unprofile",a.l(async t=>a.b(zy.f,t))),a.d("shen.profile-func",a.l((t,s,n)=>a.r([Pa,WC,a.r([de,Ul]),a.r([Pa,Zt,n,a.r([Pa,KC,a.r([rl,a.r([de,Ul]),WC]),a.r([Pa,LB,a.r([FB,t,a.r([ol,a.r([DB,t]),KC])]),Zt])])])]))),a.d("profile-results",a.l(async t=>await(async s=>await(async n=>a.b(Ay.f,t,s))(await a.t(RB.f(t,0))))(await a.t(MB.f(t))))),a.d("shen.get-profile",a.l(async t=>await(async()=>{try{return await a.t(g.f(t,io,v.get()))}catch(a){return 0}})())),a.d("shen.put-profile",a.l((t,s)=>a.b(ya.f,t,io,s,v.get()))),a.d("declare",a.l(async(t,s)=>await(async n=>await(async n=>await(async s=>await(async n=>await(async i=>await(async s=>await(async s=>await(async s=>await(async s=>await(async a=>t)(await a.t(dC.f(s))))(a.r([wi,n],await a.t(Ra.f(i,await a.t(Ra.f(a.r([Pu,Hu]),a.r([F,s]))))))))(await a.t(Zu.f(s))))(await a.t(Yu.f(s,i))))(a.r([a.r([n,ii]),rl,a.r([a.r([Go,ii,s])])])))(await a.t(ma.f(1))))(await a.t(eC.f(u_,t))))(await a.t(UC.f(await a.t(q.f(s))))))(await(async()=>{try{return await a.t($B.f(t,s))}catch(a){return ha}})()))(Ct.set(a.r([a.r([t],s)],Ct.get()))))),a.d("shen.demodulate",a.l(async t=>await(async s=>a.equate(s,t)?t:a.b(q.f,s))(await a.t(NC.f(Ws.get(),t))))),a.d("shen.variancy-test",a.l(async(t,s)=>await(async n=>await(async a=>ha)(Bt===n||(a.asJsBool(await a.t(zB.f(n,s)))||await a.t(Xa.f("warning: changing the type of "+a.asString(await a.t(e.f(t," may create errors\n",l))),await a.t(Qa.f()))))))(await a.t(Fp.f(t,Ln))))),a.d("shen.variant?",a.l(async(t,s)=>a.equate(s,t)?V:a.isCons(t)&&a.isCons(s)&&a.equate(s.head,t.head)?a.b(zB.f,a.asCons(t).tail,a.asCons(s).tail):a.isCons(t)&&a.isCons(s)&&a.asJsBool(await a.t(fp.f(t.head)))&&a.asJsBool(await a.t(Oa.f(s.head)))?a.b(zB.f,await a.t(id.f(l,a.asCons(t).head,a.asCons(t).tail)),await a.t(id.f(l,a.asCons(s).head,a.asCons(s).tail))):a.isCons(t)&&a.isCons(t.head)&&a.isCons(s)&&a.isCons(s.head)?a.b(zB.f,await a.t(Ra.f(a.asCons(t).head,a.asCons(t).tail)),await a.t(Ra.f(a.asCons(s).head,a.asCons(s).tail))):U)),a.d("shen.type-signature-of-absvector?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-adjoin",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([a.r([Zl,i]),O,a.r([Zl,i])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-and",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([_t,O,a.r([_t,O,_t])]),s,n)))),a.d("shen.type-signature-of-shen.app",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([gt,O,a.r([Bt,O,gt])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-append",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),O,a.r([a.r([Zl,i]),O,a.r([Zl,i])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-arity",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,St]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-assoc",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([a.r([Zl,a.r([Zl,i])]),O,a.r([Zl,i])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-boolean?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-bound?",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,_t]),s,n)))),a.d("shen.type-signature-of-cd",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,gt]),s,n)))),a.d("shen.type-signature-of-close",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([$l,i]),O,a.r([Zl,e])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-cn",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,a.r([gt,O,gt])]),s,n)))),a.d("shen.type-signature-of-compile",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,ur,e]),O,a.r([i,O,a.r([a.r([i,O,e]),O,e])])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-cons?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-destroy",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,O,e]),O,Bt]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-difference",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),O,a.r([a.r([Zl,i]),O,a.r([Zl,i])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-do",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([e,O,e])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-<e>",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),ur,a.r([Zl,e])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-<!>",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),ur,a.r([Zl,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-element?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([a.r([Zl,i]),O,_t])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-empty?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-enable-type-theory",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,_t]),s,n)))),a.d("shen.type-signature-of-external",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,a.r([Zl,Bt])]),s,n)))),a.d("shen.type-signature-of-error-to-string",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([er,O,gt]),s,n)))),a.d("shen.type-signature-of-explode",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([Zl,gt])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-fail",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,Bt]),s,n)))),a.d("shen.type-signature-of-fail-if",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Bt,O,_t]),O,a.r([Bt,O,Bt])]),s,n)))),a.d("shen.type-signature-of-fix",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,O,i]),O,a.r([i,O,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-freeze",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([Hl,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-fst",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([e,A,i]),O,e]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-function",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,O,e]),O,a.r([i,O,e])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-gensym",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,Bt]),s,n)))),a.d("shen.type-signature-of-<-vector",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([ta,i]),O,a.r([St,O,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-vector->",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([ta,i]),O,a.r([St,O,a.r([i,O,a.r([ta,i])])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-vector",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([ta,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-get-time",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,St]),s,n)))),a.d("shen.type-signature-of-hash",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([St,O,St])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-head",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),O,i]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-hdv",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([ta,i]),O,i]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-hdstr",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,gt]),s,n)))),a.d("shen.type-signature-of-if",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([_t,O,a.r([i,O,a.r([i,O,i])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-it",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,gt]),s,n)))),a.d("shen.type-signature-of-implementation",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,gt]),s,n)))),a.d("shen.type-signature-of-include",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,Bt]),O,a.r([Zl,Bt])]),s,n)))),a.d("shen.type-signature-of-include-all-but",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,Bt]),O,a.r([Zl,Bt])]),s,n)))),a.d("shen.type-signature-of-inferences",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,St]),s,n)))),a.d("shen.type-signature-of-shen.insert",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([gt,O,gt])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-integer?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-internal",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,a.r([Zl,Bt])]),s,n)))),a.d("shen.type-signature-of-intersection",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),O,a.r([a.r([Zl,i]),O,a.r([Zl,i])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-kill",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,i]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-language",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,gt]),s,n)))),a.d("shen.type-signature-of-length",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),O,St]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-limit",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([ta,i]),O,St]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-load",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,Bt]),s,n)))),a.d("shen.type-signature-of-map",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,O,e]),O,a.r([a.r([Zl,i]),O,a.r([Zl,e])])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-mapcan",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,O,a.r([Zl,e])]),O,a.r([a.r([Zl,i]),O,a.r([Zl,e])])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-maxinferences",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,St]),s,n)))),a.d("shen.type-signature-of-n->string",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,gt]),s,n)))),a.d("shen.type-signature-of-nl",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,St]),s,n)))),a.d("shen.type-signature-of-not",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([_t,O,_t]),s,n)))),a.d("shen.type-signature-of-nth",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([a.r([Zl,i]),O,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-number?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-occurrences",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([e,O,St])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-occurs-check",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,_t]),s,n)))),a.d("shen.type-signature-of-optimise",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,_t]),s,n)))),a.d("shen.type-signature-of-or",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([_t,O,a.r([_t,O,_t])]),s,n)))),a.d("shen.type-signature-of-os",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,gt]),s,n)))),a.d("shen.type-signature-of-package?",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,_t]),s,n)))),a.d("shen.type-signature-of-port",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,gt]),s,n)))),a.d("shen.type-signature-of-porters",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,gt]),s,n)))),a.d("shen.type-signature-of-pos",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,a.r([St,O,gt])]),s,n)))),a.d("shen.type-signature-of-pr",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,a.r([a.r([$l,Kl]),O,gt])]),s,n)))),a.d("shen.type-signature-of-print",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,i]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-profile",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,O,e]),O,a.r([i,O,e])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-preclude",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,Bt]),O,a.r([Zl,Bt])]),s,n)))),a.d("shen.type-signature-of-shen.proc-nl",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,gt]),s,n)))),a.d("shen.type-signature-of-profile-results",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,O,e]),O,a.r([a.r([i,O,e]),A,St])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-protect",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,Bt]),s,n)))),a.d("shen.type-signature-of-preclude-all-but",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,Bt]),O,a.r([Zl,Bt])]),s,n)))),a.d("shen.type-signature-of-shen.prhush",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,a.r([a.r([$l,Kl]),O,gt])]),s,n)))),a.d("shen.type-signature-of-ps",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,a.r([Zl,Fl])]),s,n)))),a.d("shen.type-signature-of-read",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([$l,tr]),O,Fl]),s,n)))),a.d("shen.type-signature-of-read-byte",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([$l,tr]),O,St]),s,n)))),a.d("shen.type-signature-of-read-file-as-bytelist",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,a.r([Zl,St])]),s,n)))),a.d("shen.type-signature-of-read-file-as-string",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,gt]),s,n)))),a.d("shen.type-signature-of-read-file",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,a.r([Zl,Fl])]),s,n)))),a.d("shen.type-signature-of-read-from-string",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,a.r([Zl,Fl])]),s,n)))),a.d("shen.type-signature-of-release",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,gt]),s,n)))),a.d("shen.type-signature-of-remove",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([a.r([Zl,i]),O,a.r([Zl,i])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-reverse",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),O,a.r([Zl,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-simple-error",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,i]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-snd",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,A,e]),O,e]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-specialise",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,Bt]),s,n)))),a.d("shen.type-signature-of-spy",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,_t]),s,n)))),a.d("shen.type-signature-of-step",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,_t]),s,n)))),a.d("shen.type-signature-of-stinput",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,a.r([$l,tr])]),s,n)))),a.d("shen.type-signature-of-sterror",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,a.r([$l,Kl])]),s,n)))),a.d("shen.type-signature-of-stoutput",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,a.r([$l,Kl])]),s,n)))),a.d("shen.type-signature-of-string?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-str",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,gt]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-string->n",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,St]),s,n)))),a.d("shen.type-signature-of-string->symbol",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,Bt]),s,n)))),a.d("shen.type-signature-of-sum",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,St]),O,St]),s,n)))),a.d("shen.type-signature-of-symbol?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-systemf",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,Bt]),s,n)))),a.d("shen.type-signature-of-tail",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),O,a.r([Zl,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-tlstr",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,gt]),s,n)))),a.d("shen.type-signature-of-tlv",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([ta,i]),O,a.r([ta,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-tc",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,_t]),s,n)))),a.d("shen.type-signature-of-tc?",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,_t]),s,n)))),a.d("shen.type-signature-of-thaw",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Hl,i]),O,i]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-track",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,Bt]),s,n)))),a.d("shen.type-signature-of-trap-error",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([a.r([er,O,i]),O,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-tuple?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-undefmacro",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,Bt]),s,n)))),a.d("shen.type-signature-of-union",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([Zl,i]),O,a.r([a.r([Zl,i]),O,a.r([Zl,i])])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-unprofile",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([a.r([i,O,e]),O,a.r([i,O,e])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-untrack",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,Bt]),s,n)))),a.d("shen.type-signature-of-unspecialise",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([Bt,O,Bt]),s,n)))),a.d("shen.type-signature-of-variable?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-vector?",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,_t]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-version",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([O,gt]),s,n)))),a.d("shen.type-signature-of-write-to-file",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,a.r([i,O,i])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-write-byte",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([a.r([$l,Kl]),O,St])]),s,n)))),a.d("shen.type-signature-of-y-or-n?",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([gt,O,_t]),s,n)))),a.d("shen.type-signature-of->",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([St,O,_t])]),s,n)))),a.d("shen.type-signature-of-<",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([St,O,_t])]),s,n)))),a.d("shen.type-signature-of->=",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([St,O,_t])]),s,n)))),a.d("shen.type-signature-of-<=",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([St,O,_t])]),s,n)))),a.d("shen.type-signature-of-=",a.l(async(t,s,n)=>await(async i=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([i,O,_t])]),s,n)))(await a.t(Op.f(s))))),a.d("shen.type-signature-of-+",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([St,O,St])]),s,n)))),a.d("shen.type-signature-of-/",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([St,O,St])]),s,n)))),a.d("shen.type-signature-of--",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([St,O,St])]),s,n)))),a.d("shen.type-signature-of-*",a.l(async(t,s,n)=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([St,O,a.r([St,O,St])]),s,n)))),a.d("shen.type-signature-of-==",a.l(async(t,s,n)=>await(async i=>await(async e=>(await a.t(Gv.f()),a.b(Vy.f,t,a.r([i,O,a.r([e,O,_t])]),s,n)))(await a.t(Op.f(s))))(await a.t(Op.f(s))))),a.d("pr",a.l(async(t,s)=>await(async()=>{try{return await a.t(UB.f(t,s,0))}catch(a){return t}})())),a.d("shen.prh",a.l(async(t,s,n)=>a.b(UB.f,t,s,await a.t(VB.f(t,s,n))))),a.d("shen.write-char-and-inc",a.l(async(t,s,n)=>(Fy.f(a.asNeString(_d.f(t,n)).charCodeAt(0),s),a.asNumber(n)+1))),a.d("print",a.l(async t=>await(async s=>await(async a=>t)(await a.t(Xa.f(s,await a.t(Qa.f())))))(await a.t(WB.f(t,"~S"))))),a.d("shen.prhush",a.l(async(t,s)=>a.asJsBool(Ni.get())?t:a.b(vd.f,t,s))),a.d("shen.mkstr",a.l(async(t,s)=>a.isString(t)?a.b(KB.f,await a.t(Bv.f(t)),s):a.b(GB.f,a.r([pr,t]),s))),a.d("shen.mkstr-l",a.l(async(t,s)=>null===s?t:a.isCons(s)?a.b(KB.f,await a.t(YB.f(s.head,t)),s.tail):a.b(Na.f,XB))),a.d("shen.insert-l",a.l(async(t,s)=>""===s?"":a.asJsBool(await a.t(ZS.f(s)))&&"~"===_d.f(s,0)&&a.asJsBool(await a.t(ZS.f(a.asNeString(s).substring(1))))&&"A"===_d.f(a.asNeString(s).substring(1),0)?a.r([Cr,t,a.asNeString(a.asNeString(s).substring(1)).substring(1),l]):a.asJsBool(await a.t(ZS.f(s)))&&"~"===_d.f(s,0)&&a.asJsBool(await a.t(ZS.f(a.asNeString(s).substring(1))))&&"R"===_d.f(a.asNeString(s).substring(1),0)?a.r([Cr,t,a.asNeString(a.asNeString(s).substring(1)).substring(1),wu]):a.asJsBool(await a.t(ZS.f(s)))&&"~"===_d.f(s,0)&&a.asJsBool(await a.t(ZS.f(a.asNeString(s).substring(1))))&&"S"===_d.f(a.asNeString(s).substring(1),0)?a.r([Cr,t,a.asNeString(a.asNeString(s).substring(1)).substring(1),gs]):a.asJsBool(await a.t(ZS.f(s)))?a.b(QB.f,a.r([Yi,_d.f(s,0),await a.t(YB.f(t,a.asNeString(s).substring(1)))])):a.isCons(s)&&Yi===s.head&&a.isCons(s.tail)&&a.isCons(a.asCons(s.tail).tail)&&null===a.asCons(a.asCons(s.tail).tail).tail?a.r([Yi,a.asCons(a.asCons(s).tail).head,await a.t(YB.f(t,a.asCons(a.asCons(a.asCons(s).tail).tail).head))]):a.isCons(s)&&Cr===s.head&&a.isCons(s.tail)&&a.isCons(a.asCons(s.tail).tail)&&a.isCons(a.asCons(a.asCons(s.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(s.tail).tail).tail).tail?a.r([Cr,a.asCons(a.asCons(s).tail).head,await a.t(YB.f(t,a.asCons(a.asCons(a.asCons(s).tail).tail).head))],a.asCons(a.asCons(a.asCons(s).tail).tail).tail):a.b(Na.f,ZB))),a.d("shen.factor-cn",a.l(t=>a.isCons(t)&&Yi===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.isCons(a.asCons(a.asCons(t.tail).tail).head)&&Yi===a.asCons(a.asCons(a.asCons(t.tail).tail).head).head&&a.isCons(a.asCons(a.asCons(a.asCons(t.tail).tail).head).tail)&&a.isCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).head).tail).tail)&&null===a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).head).tail).tail).tail&&null===a.asCons(a.asCons(t.tail).tail).tail&&a.isString(a.asCons(t.tail).head)&&a.isString(a.asCons(a.asCons(a.asCons(a.asCons(t.tail).tail).head).tail).head)?a.r([Yi,a.asString(a.asCons(a.asCons(t).tail).head)+a.asString(a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).head).tail).head)],a.asCons(a.asCons(a.asCons(a.asCons(a.asCons(t).tail).tail).head).tail).tail):t)),a.d("shen.proc-nl",a.l(async t=>""===t?"":a.asJsBool(await a.t(ZS.f(t)))&&"~"===_d.f(t,0)&&a.asJsBool(await a.t(ZS.f(a.asNeString(t).substring(1))))&&"%"===_d.f(a.asNeString(t).substring(1),0)?String.fromCharCode(10)+a.asString(await a.t(Bv.f(a.asNeString(a.asNeString(t).substring(1)).substring(1)))):a.asJsBool(await a.t(ZS.f(t)))?_d.f(t,0)+a.asString(await a.t(Bv.f(a.asNeString(t).substring(1)))):a.b(Na.f,pr))),a.d("shen.mkstr-r",a.l(async(t,s)=>null===s?t:a.isCons(s)?a.b(GB.f,a.r([br,s.head,t]),s.tail):a.b(Na.f,HB))),a.d("shen.insert",a.l(async(t,s)=>a.b(ax.f,t,s,""))),a.d("shen.insert-h",a.l(async(t,s,n)=>""===s?n:a.asJsBool(await a.t(ZS.f(s)))&&"~"===_d.f(s,0)&&a.asJsBool(await a.t(ZS.f(a.asNeString(s).substring(1))))&&"A"===_d.f(a.asNeString(s).substring(1),0)?a.asString(n)+a.asString(await a.t(e.f(t,a.asNeString(a.asNeString(s).substring(1)).substring(1),l))):a.asJsBool(await a.t(ZS.f(s)))&&"~"===_d.f(s,0)&&a.asJsBool(await a.t(ZS.f(a.asNeString(s).substring(1))))&&"R"===_d.f(a.asNeString(s).substring(1),0)?a.asString(n)+a.asString(await a.t(e.f(t,a.asNeString(a.asNeString(s).substring(1)).substring(1),wu))):a.asJsBool(await a.t(ZS.f(s)))&&"~"===_d.f(s,0)&&a.asJsBool(await a.t(ZS.f(a.asNeString(s).substring(1))))&&"S"===_d.f(a.asNeString(s).substring(1),0)?a.asString(n)+a.asString(await a.t(e.f(t,a.asNeString(a.asNeString(s).substring(1)).substring(1),gs))):a.asJsBool(await a.t(ZS.f(s)))?a.b(ax.f,t,a.asNeString(s).substring(1),a.asString(n)+_d.f(s,0)):a.b(Na.f,tx))),a.d("shen.app",a.l(async(t,s,n)=>a.asString(await a.t(sx.f(t,n)))+a.asString(s))),a.d("shen.arg->str",a.l(async(t,s)=>a.equate(t,await a.t(f.f()))?"...":a.asJsBool(await a.t(nx.f(t)))?a.b(ix.f,t,s):a.isString(t)?a.b(ex.f,t,s):a.isArray(t)?a.b(ox.f,t,s):a.b(lx.f,t))),a.d("shen.list->str",a.l(async(t,s)=>wu===s?a.b(Ty.f,"(",await a.t(Ty.f(await a.t(rx.f(t,wu,await a.t(fx.f()))),")"))):a.b(Ty.f,"[",await a.t(Ty.f(await a.t(rx.f(t,s,await a.t(fx.f()))),"]"))))),a.d("shen.maxseq",a.l(()=>xi.get())),a.d("shen.iter-list",a.l(async(t,s,n)=>null===t?"":0===n?"... etc":a.isCons(t)&&null===t.tail?a.b(sx.f,a.asCons(t).head,s):a.isCons(t)?a.b(Ty.f,await a.t(sx.f(t.head,s)),await a.t(Ty.f(" ",await a.t(rx.f(t.tail,s,a.asNumber(n)-1))))):a.b(Ty.f,"|",await a.t(Ty.f(" ",await a.t(sx.f(t,s))))))),a.d("shen.str->str",a.l(async(t,s)=>l===s?t:a.b(Ty.f,String.fromCharCode(34),await a.t(Ty.f(t,String.fromCharCode(34)))))),a.d("shen.vector->str",a.l(async(t,s)=>a.asJsBool(await a.t(wx.f(t)))?a.b(await a.t(bp.f(await a.t(Wt.f(t,0)))),t):a.asJsBool(await a.t(Ry.f(t)))?a.b(Ty.f,"<",await a.t(Ty.f(await a.t(cx.f(t,1,s,await a.t(fx.f()))),">"))):a.b(Ty.f,"<",await a.t(Ty.f("<",await a.t(Ty.f(await a.t(cx.f(t,0,s,await a.t(fx.f()))),">>"))))))),a.d("shen.empty-absvector?",a.l(t=>a.asShenBool(a.equate(t,dr.get())))),a.d("shen.print-vector?",a.l(async t=>a.asShenBool(!a.asJsBool(await a.t(hx.f(t)))&&a.asJsBool(await(async t=>a.asShenBool(t===jy||t===Ny||t===_s||!a.isNumber(t)&&a.asJsBool(await a.t(yx.f(t)))))(await a.t(Wt.f(t,0))))))),a.d("shen.fbound?",a.l(async t=>await(async()=>{try{return await a.t(Rv.f(t)),V}catch(a){return U}})())),a.d("shen.tuple",a.l(async t=>"(@p "+a.asString(await a.t(e.f(await a.t(Wt.f(t,1))," "+a.asString(await a.t(e.f(await a.t(Wt.f(t,2)),")",gs))),gs))))),a.d("shen.dictionary",a.l(a=>"(dict ...)")),a.d("shen.iter-vector",a.l(async(t,s,n,i)=>0===i?"... etc":await(async e=>await(async o=>e===dx?"":o===dx?a.b(sx.f,e,n):a.b(Ty.f,await a.t(sx.f(e,n)),await a.t(Ty.f(" ",await a.t(cx.f(t,a.asNumber(s)+1,n,a.asNumber(i)-1))))))(await(async()=>{try{return await a.t(Wt.f(t,a.asNumber(s)+1))}catch(a){return dx}})()))(await(async()=>{try{return await a.t(Wt.f(t,s))}catch(a){return dx}})()))),a.d("shen.atom->str",a.l(async t=>await(async()=>{try{return a.show(t)}catch(t){return a.b(Cx.f)}})())),a.d("shen.funexstring",a.l(async()=>a.b(Ty.f,"",await a.t(Ty.f("f",await a.t(Ty.f("u",await a.t(Ty.f("n",await a.t(Ty.f("e",await a.t(Ty.f(await a.t(sx.f(await a.t(oa.f(a.symbolOf("x"))),l)),""))))))))))))),a.d("shen.list?",a.l(async t=>a.asShenBool(a.asJsBool(await a.t(ut.f(t)))||a.isCons(t)))),a.d("shen.yacc",a.l(async t=>a.isCons(t)&&yi===t.head&&a.isCons(t.tail)?a.b(ux.f,a.asCons(a.asCons(t).tail).head,a.asCons(a.asCons(t).tail).tail):a.b(Na.f,bx))),a.d("shen.yacc->shen",a.l(async(t,s)=>await(async s=>await(async s=>await(async s=>a.r([wi,t,Sx,F,await a.t(vx.f(s))]))(await a.t(gx.f(s))))(await a.t(T.f(a.l(async t=>a.b(mx.f,t)),s))))(await a.t(px.f(V,s,null))))),a.d("shen.kill-code",a.l(async t=>a.asNumber(await a.t(qd.f(Ae,t)))>0?a.r([$o,t,a.r([Ea,Mn,a.r([_x,Mn])])]):t)),a.d("kill",a.l(()=>a.raise("yacc kill"))),a.d("shen.analyse-kill",a.l(async t=>await(async s=>"yacc kill"===s?a.b(f.f):t)(a.asError(t).message))),a.d("shen.split_cc_rules",a.l(async(t,s,n)=>null===s&&null===n?null:null===s?a.r([await a.t(Bx.f(t,await a.t(Jt.f(n)),null))]):a.isCons(s)&&bl===s.head?a.r([await a.t(Bx.f(t,await a.t(Jt.f(n)),null))],await a.t(px.f(t,a.asCons(s).tail,null))):a.isCons(s)?a.b(px.f,t,s.tail,a.r([s.head],n)):a.b(Na.f,xx))),a.d("shen.split_cc_rule",a.l(async(t,s,n)=>a.isCons(s)&&$a===s.head&&a.isCons(s.tail)&&null===a.asCons(s.tail).tail?a.r([await a.t(Jt.f(n))],a.asCons(s).tail):a.isCons(s)&&$a===s.head&&a.isCons(s.tail)&&a.isCons(a.asCons(s.tail).tail)&&M===a.asCons(a.asCons(s.tail).tail).head&&a.isCons(a.asCons(a.asCons(s.tail).tail).tail)&&null===a.asCons(a.asCons(a.asCons(s.tail).tail).tail).tail?a.r([await a.t(Jt.f(n)),a.r([M,a.asCons(a.asCons(a.asCons(a.asCons(s).tail).tail).tail).head,a.asCons(a.asCons(s).tail).head])]):null===s?(await a.t(qx.f(t,n)),a.b(Bx.f,t,a.r([$a,await a.t(jx.f(await a.t(Jt.f(n))))]),n)):a.isCons(s)?a.b(Bx.f,t,s.tail,a.r([s.head],n)):a.b(Na.f,Jx))),a.d("shen.semantic-completion-warning",a.l(async(t,s)=>V===t?(await a.t(Xa.f("warning: ",await a.t(Qa.f()))),await a.t(ba.f(a.l(async t=>a.b(Xa.f,await a.t(e.f(t," ",l)),await a.t(Qa.f()))),await a.t(Jt.f(s)))),a.b(Xa.f,"has no semantics.\n",await a.t(Qa.f()))):ha)),a.d("shen.default_semantics",a.l(async t=>null===t?null:a.isCons(t)&&null===t.tail&&a.asJsBool(await a.t(Nx.f(t.head)))?a.asCons(t).head:a.isCons(t)&&a.asJsBool(await a.t(Nx.f(t.head)))?a.r([Ri,a.asCons(t).head,await a.t(jx.f(a.asCons(t).tail))]):a.isCons(t)?a.r([Z,t.head,await a.t(jx.f(t.tail))]):a.b(Na.f,kx))),a.d("shen.grammar_symbol?",a.l(async t=>a.asShenBool(a.asJsBool(await a.t(b.f(t)))&&a.asJsBool(await(async t=>a.asShenBool("<"===a.asCons(t).head&&">"===a.asCons(await a.t(Jt.f(t))).head))(await a.t(Ox.f(await a.t(Hd.f(t))))))))),a.d("shen.yacc_cases",a.l(async t=>a.isCons(t)&&null===t.tail?a.asCons(t).head:a.isCons(t)?await(async s=>a.r([Pa,s,t.head,a.r([Ht,a.r([$a,s,a.r([as])]),await a.t(gx.f(t.tail)),s])]))(Ax):a.b(Na.f,Tx))),a.d("shen.cc_body",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(Ex.f,a.asCons(t).head,Sx,a.asCons(a.asCons(t).tail).head):a.b(Na.f,Px))),a.d("shen.syntax",a.l(async(t,s,n)=>null===t&&a.isCons(n)&&M===n.head&&a.isCons(n.tail)&&a.isCons(a.asCons(n.tail).tail)&&null===a.asCons(a.asCons(n.tail).tail).tail?a.r([Ht,await a.t(Ix.f(a.asCons(a.asCons(n).tail).head)),a.r([Lx,a.r([Et,s]),await a.t(Ix.f(a.asCons(a.asCons(a.asCons(n).tail).tail).head))]),a.r([as])]):null===t?a.r([Lx,a.r([Et,s]),await a.t(Ix.f(n))]):a.isCons(t)?a.asJsBool(await a.t(Nx.f(t.head)))?a.b(Fx.f,t,s,n):a.asJsBool(await a.t(Oa.f(t.head)))?a.b(Dx.f,t,s,n):a.asJsBool(await a.t(Mx.f(t.head)))?a.b(Rx.f,t,s,n):a.asJsBool(await a.t($x.f(t.head)))?a.b(zx.f,t,s,n):a.isCons(t.head)?a.b(Ux.f,await a.t(Vx.f(t.head)),t.tail,s,n):a.raise(a.asString(await a.t(e.f(t.head," is not legal syntax\n",l)))):a.b(Na.f,Wx))),a.d("shen.list-stream",a.l(async(t,s,n,i)=>await(async e=>await(async o=>await(async s=>await(async t=>a.r([Ht,e,t,a.r([as])]))(await a.t(Qx.f(s,o,await a.t(Ex.f(t,a.r([Lx,a.r([Kx,n]),a.r([Xx,n])]),o))))))(await a.t(Ex.f(s,a.r([Lx,a.r([Yx,n]),a.r([Xx,n])]),i))))(await a.t(oa.f(Gx))))(a.r([fs,a.r([At,a.r([Et,n])]),a.r([At,a.r([Kx,n])])])))),a.d("shen.decons",a.l(t=>a.isCons(t)&&Z===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).head&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([a.asCons(a.asCons(t).tail).head]):a.isCons(t)&&Z===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.r([a.asCons(a.asCons(t).tail).head],a.t(Vx.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head))):t)),a.d("shen.insert-runon",a.l(async(t,s,n)=>a.isCons(n)&&Lx===n.head&&a.isCons(n.tail)&&a.isCons(a.asCons(n.tail).tail)&&null===a.asCons(a.asCons(n.tail).tail).tail&&a.equate(a.asCons(a.asCons(n.tail).tail).head,s)?t:a.isCons(n)?a.b(T.f,a.l(async n=>a.b(Qx.f,t,s,n)),n):n)),a.d("shen.strip-pathname",a.l(async t=>a.asJsBool(await a.t(m.f(".",t)))?a.isCons(t)?a.b(Ox.f,t.tail):a.b(Na.f,Zx):t)),a.d("shen.recursive_descent",a.l(async(t,s,n)=>a.isCons(t)?await(async s=>await(async n=>await(async i=>a.r([Pa,await a.t(eC.f(Hx,t.head)),s,a.r([Ht,a.r([Ve,a.r([$a,a.r([as]),await a.t(eC.f(Hx,t.head))])]),n,i])]))(a.r([as])))(await a.t(Ex.f(t.tail,await a.t(eC.f(Hx,t.head)),n))))(a.r([t.head,s])):a.b(Na.f,aq))),a.d("shen.variable-match",a.l(async(t,s,n)=>a.isCons(t)?await(async i=>await(async t=>await(async s=>a.r([Ht,i,t,s]))(a.r([as])))(a.r([Pa,await a.t(eC.f(Hx,t.head)),a.r([Kx,s]),await a.t(Ex.f(t.tail,a.r([Lx,a.r([Yx,s]),a.r([Xx,s])]),n))])))(a.r([At,a.r([Et,s])])):a.b(Na.f,tq))),a.d("shen.terminal?",a.l(t=>a.isCons(t)?U:a.asJsBool(a.t(Oa.f(t)))?U:V)),a.d("shen.jump_stream?",a.l(a=>a===ea?V:U)),a.d("shen.check_stream",a.l(async(t,s,n)=>a.isCons(t)?await(async i=>await(async e=>await(async t=>await(async s=>a.r([Ht,i,t,s]))(a.r([as])))(a.r([Pa,e,a.r([Lx,a.r([Yx,s]),a.r([Xx,s])]),await a.t(Ex.f(t.tail,e,n))])))(await a.t(oa.f(sq))))(a.r([fs,a.r([At,a.r([Et,s])]),a.r([$a,t.head,a.r([Kx,s])])])):a.b(Na.f,nq))),a.d("shen.jump_stream",a.l(async(t,s,n)=>a.isCons(t)?await(async i=>await(async t=>await(async s=>a.r([Ht,i,t,s]))(a.r([as])))(await a.t(Ex.f(t.tail,a.r([Lx,a.r([Yx,s]),a.r([Xx,s])]),n))))(a.r([At,a.r([Et,s])])):a.b(Na.f,iq))),a.d("shen.semantics",a.l(async t=>null===t?null:a.asJsBool(await a.t(Nx.f(t)))?a.r([Xx,await a.t(eC.f(Hx,t))]):a.asJsBool(await a.t(Oa.f(t)))?a.b(eC.f,Hx,t):a.isCons(t)?a.b(T.f,a.l(async t=>a.b(Ix.f,t)),t):t)),a.d("shen.pair",a.l((t,s)=>a.r([t,s]))),a.d("shen.hdtl",a.l(t=>a.asCons(a.asCons(t).tail).head)),a.d("shen.hdhd",a.l(t=>a.asCons(a.asCons(t).head).head)),a.d("shen.tlhd",a.l(t=>a.asCons(a.asCons(t).head).tail)),a.d("shen.snd-or-fail",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.asCons(a.asCons(t).tail).head:a.b(f.f))),a.d("fail",a.l(()=>eq)),a.d("<!>",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.r([null,a.asCons(t).head]):a.b(f.f))),a.d("<e>",a.l(async t=>a.isCons(t)&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.r([a.asCons(t).head,null]):a.b(Na.f,wl))),a.d("shen.x.features.cond-expand-macro",a.l(async t=>a.isCons(t)&&oq===t.head&&null===t.tail?a.raise("Unfulfilled shen.x.features.cond-expand clause."):a.isCons(t)&&oq===t.head&&a.isCons(t.tail)&&V===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)&&null===a.asCons(a.asCons(t.tail).tail).tail?a.asCons(a.asCons(a.asCons(t).tail).tail).head:a.isCons(t)&&oq===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&fs===a.asCons(a.asCons(t.tail).head).head&&null===a.asCons(a.asCons(t.tail).head).tail&&a.isCons(a.asCons(t.tail).tail)?a.asCons(a.asCons(a.asCons(t).tail).tail).head:a.isCons(t)&&oq===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&fs===a.asCons(a.asCons(t.tail).head).head&&a.isCons(a.asCons(a.asCons(t.tail).head).tail)&&a.isCons(a.asCons(t.tail).tail)?a.r([oq,a.asCons(a.asCons(a.asCons(a.asCons(t).tail).head).tail).head,a.r([oq,a.r([fs],a.asCons(a.asCons(a.asCons(a.asCons(t).tail).head).tail).tail)],a.asCons(a.asCons(t).tail).tail)],a.asCons(a.asCons(a.asCons(t).tail).tail).tail):a.isCons(t)&&oq===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&Ze===a.asCons(a.asCons(t.tail).head).head&&null===a.asCons(a.asCons(t.tail).head).tail&&a.isCons(a.asCons(t.tail).tail)?a.r([oq],a.asCons(a.asCons(a.asCons(t).tail).tail).tail):a.isCons(t)&&oq===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&Ze===a.asCons(a.asCons(t.tail).head).head&&a.isCons(a.asCons(a.asCons(t.tail).head).tail)&&a.isCons(a.asCons(t.tail).tail)?a.r([oq,a.asCons(a.asCons(a.asCons(a.asCons(t).tail).head).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).head,V,a.r([oq,a.r([Ze],a.asCons(a.asCons(a.asCons(a.asCons(t).tail).head).tail).tail)],a.asCons(a.asCons(t).tail).tail)]):a.isCons(t)&&oq===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).head)&&Ve===a.asCons(a.asCons(t.tail).head).head&&a.isCons(a.asCons(a.asCons(t.tail).head).tail)&&null===a.asCons(a.asCons(a.asCons(t.tail).head).tail).tail&&a.isCons(a.asCons(t.tail).tail)?a.r([oq,a.asCons(a.asCons(a.asCons(a.asCons(t).tail).head).tail).head,a.r([oq],a.asCons(a.asCons(a.asCons(t).tail).tail).tail),V,a.asCons(a.asCons(a.asCons(t).tail).tail).head]):a.isCons(t)&&oq===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)&&a.asJsBool(await a.t(m.f(a.asCons(t.tail).head,lq.get())))?a.asCons(a.asCons(a.asCons(t).tail).tail).head:a.isCons(t)&&oq===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)?a.r([oq],a.asCons(a.asCons(a.asCons(t).tail).tail).tail):t)),a.d("shen.x.features.current",a.l(()=>lq.get())),a.d("shen.x.features.initialise",a.l(async t=>await(async s=>await(async a=>await(async t=>a)(lq.set(t)))(await a.t(wq.f())))(await(async()=>{try{return lq.get()}catch(t){return lq.set(null),await a.t(gr.f(a.r([fq],a.l(async t=>a.b(rq.f,t))))),await a.t(KS.f(fq))}})()))),a.d("shen.x.features.add",a.l(async t=>await(async s=>await(async a=>s)(lq.set(await a.t(ys.f(t,s)))))(await a.t(wq.f())))),a.d("shen.x.launcher.quiet-load",a.l(async t=>await(async t=>a.b(T.f,a.l(async t=>a.b(dC.f,t)),t))(await a.t(wd.f(t))))),a.d("shen.x.launcher.version-string",a.l(async()=>a.b(e.f,await a.t(cq.f())," "+a.asString(await a.t(e.f(a.r([to,a.r([await a.t(hq.f()),await a.t(yq.f())]),Je,a.r([await a.t(dq.f()),await a.t(Cq.f())])]),"\n",wu))),l))),a.d("shen.x.launcher.help-text",a.l(async t=>"Usage: "+a.asString(await a.t(e.f(t," [--version] [--help] <COMMAND> [<ARGS>]\n\ncommands:\n    repl\n        Launches the interactive REPL.\n        Default action if no command is supplied.\n\n    script <FILE> [<ARGS>]\n        Runs the script in FILE. *argv* is set to [FILE | ARGS].\n\n    eval <ARGS>\n        Evaluates expressions and files. ARGS are evaluated from\n        left to right and can be a combination of:\n            -e, --eval <EXPR>\n                Evaluates EXPR and prints result.\n            -l, --load <FILE>\n                Reads and evaluates FILE.\n            -q, --quiet\n                Silences interactive output.\n            -s, --set <KEY> <VALUE>\n                Evaluates KEY, VALUE and sets as global.\n            -r, --repl\n                Launches the interactive REPL after evaluating\n                all the previous expresions.",l))))),a.d("shen.x.launcher.execute-all",a.l(async t=>null===t?a.r([uq]):a.isCons(t)?(await a.t(Ks.f(t.head)),a.b(bq.f,t.tail)):a.b(Na.f,pq))),a.d("shen.x.launcher.eval-string",a.l(async t=>a.b(tC.f,await a.t(Ud.f(await a.t(yd.f(t))))))),a.d("shen.x.launcher.eval-flag-map",a.l(a=>"-e"===a?"--eval":"-l"===a?"--load":"-q"===a?"--quiet":"-s"===a?"--set":"-r"===a?"--repl":U)),a.d("shen.x.launcher.eval-command-h",a.l(async(t,s)=>null===t?a.b(bq.f,await a.t(Jt.f(s))):a.isCons(t)&&"--eval"===t.head&&a.isCons(t.tail)?a.b(mq.f,a.asCons(a.asCons(t).tail).tail,a.r([a.l(async()=>a.b(Xa.f,await a.t(e.f(await a.t(gq.f(a.asCons(a.asCons(t).tail).head)),"\n",l)),await a.t(Qa.f())))],s)):a.isCons(t)&&"--load"===t.head&&a.isCons(t.tail)?a.b(mq.f,a.asCons(a.asCons(t).tail).tail,a.r([a.l(async()=>a.b(Td.f,a.asCons(a.asCons(t).tail).head))],s)):a.isCons(t)&&"--quiet"===t.head?a.b(mq.f,a.asCons(t).tail,a.r([a.l(async()=>Ni.set(V))],s)):a.isCons(t)&&"--set"===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)?a.b(mq.f,a.asCons(a.asCons(a.asCons(t).tail).tail).tail,a.r([a.l(async()=>a.c(a.nameOf(a.asSymbol(await a.t(gq.f(a.asCons(a.asCons(t).tail).head))))).set(await a.t(gq.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head))))],s)):a.isCons(t)&&"--repl"===t.head?(await a.t(mq.f(null,s)),a.r([Sq],a.asCons(t).tail)):await(async n=>a.isCons(t)?await(async t=>a.equate(t,await a.t(f.f()))?a.b(Ks.f,n):t)(await(async n=>U===n?await a.t(f.f()):await a.t(mq.f(a.r([n],t.tail),s)))(await a.t(_q.f(t.head)))):a.b(Ks.f,n))(a.l(async()=>a.isCons(t)?a.r([or,"Invalid eval argument: "+a.asString(await a.t(e.f(t.head,"",l)))]):a.b(Na.f,vq))))),a.d("shen.x.launcher.eval-command",a.l(async t=>a.b(mq.f,t,null))),a.d("shen.x.launcher.script-command",a.l(async(t,s)=>(Bq.set(a.r([t],s)),await a.t(xq.f(t)),a.r([uq])))),a.d("shen.x.launcher.launch-shen",a.l(async t=>a.isCons(t)&&null===t.tail?a.r([Sq]):a.isCons(t)&&a.isCons(t.tail)&&"--help"===a.asCons(t.tail).head?a.r([qq,await a.t(jq.f(a.asCons(t).head))]):a.isCons(t)&&a.isCons(t.tail)&&"--version"===a.asCons(t.tail).head?a.r([uq,await a.t(Jq.f())]):a.isCons(t)&&a.isCons(t.tail)&&"repl"===a.asCons(t.tail).head?a.r([Sq],a.asCons(a.asCons(t).tail).tail):a.isCons(t)&&a.isCons(t.tail)&&"script"===a.asCons(t.tail).head&&a.isCons(a.asCons(t.tail).tail)?a.b(Nq.f,a.asCons(a.asCons(a.asCons(t).tail).tail).head,a.asCons(a.asCons(a.asCons(t).tail).tail).tail):a.isCons(t)&&a.isCons(t.tail)&&"eval"===a.asCons(t.tail).head?a.b(kq.f,a.asCons(a.asCons(t).tail).tail):a.isCons(t)&&a.isCons(t.tail)?a.r([Oq],t):a.b(Na.f,Aq))),a.d("shen.x.launcher.default-handle-result",a.l(async t=>a.isCons(t)&&uq===t.head&&null===t.tail?Tq:a.isCons(t)&&uq===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(Xa.f,await a.t(e.f(a.asCons(a.asCons(t).tail).head,"\n",l)),await a.t(Qa.f())):a.isCons(t)&&or===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(Xa.f,"ERROR: "+a.asString(await a.t(e.f(a.asCons(a.asCons(t).tail).head,"\n",l))),await a.t(Qa.f())):a.isCons(t)&&Sq===t.head?a.b(Eq.f):a.isCons(t)&&qq===t.head&&a.isCons(t.tail)&&null===a.asCons(t.tail).tail?a.b(Xa.f,await a.t(e.f(a.asCons(a.asCons(t).tail).head,"\n",l)),await a.t(Qa.f())):a.isCons(t)&&Oq===t.head&&a.isCons(t.tail)&&a.isCons(a.asCons(t.tail).tail)?a.b(Xa.f,"ERROR: Invalid argument: "+a.asString(await a.t(e.f(a.asCons(a.asCons(a.asCons(t).tail).tail).head,"\nTry `"+a.asString(await a.t(e.f(a.asCons(a.asCons(t).tail).head," --help' for more information.\n",l))),l))),await a.t(Qa.f())):a.b(Na.f,Pq))),a.d("shen.x.launcher.main",a.l(async t=>a.b(Iq.f,await a.t(Lq.f(t))))),a=s(13)(a),await a.t(Fq.f()),a}},function(a,t){a.exports=a=>{const{asArray:t,asCons:s,asNumber:n,asShenBool:i,cons:e,defun:o,equate:l,isArray:r,isCons:f,isSymbol:w,lookup:c,nameOf:h,raise:y,s:d,settle:C,toArray:u,toList:b}=a,asMap=a=>a instanceof Map?a:y("dict expected"),p=d`shen.pvar`,m=d`shen.tuple`,g=d`arity`,S=d`true`,v=d`false`,_=c("*property-vector*");o("@p",(a,t)=>[m,a,t]),o("shen.pvar?",a=>i(r(a)&&a.length>0&&a[0]===p)),o("shen.byte->digit",a=>a-48),o("shen.numbyte?",a=>i(a>=48&&a<=57)),o("integer?",a=>i(Number.isInteger(a))),o("symbol?",a=>i(w(a)&&a!==S&&a!==v)),o("variable?",a=>i(w(a)&&(a=>a>=65&&a<=90)(h(a).charCodeAt(0)))),o("shen.fillvector",(a,s,i,e)=>t(a).fill(e,n(s),n(i)+1)),o("shen.initialise_arity_table",a=>{for(;f(a);a=a.tail.tail)_.get().set(a.head,e(e(g,a.tail.head),null));return null}),o("put",(a,t,n,i)=>{const o=asMap(i).has(a)?i.get(a):null,r=u(o);for(const e of r)if(l(t,s(e).head))return e.tail=n,i.set(a,b(r)),n;return r.push(e(t,n)),i.set(a,b(r)),n}),o("shen.dict",a=>new Map),o("shen.dict?",a=>i(a instanceof Map)),o("shen.dict-count",a=>asMap(a).size),o("shen.dict->",(a,t,s)=>(asMap(a).set(t,s),s)),o("shen.<-dict",(a,t)=>asMap(a).has(t)?a.get(t):y("value not found in dict\r\n")),o("shen.dict-rm",(a,t)=>(asMap(a).delete(t),t)),o("shen.dict-fold",async(a,t,s)=>{for(const[n,i]of asMap(a))s=await C(t(n,i,s));return s}),o("shen.dict-keys",a=>b([...asMap(a).keys()])),o("shen.dict-values",a=>b([...asMap(a).values()]));const B=a.show;a.show=a=>a instanceof Map?`<Dict ${a.size}>`:B(a);const x=c("shen.credits").f,q=c("pr").f,j=c("*stoutput*");return o("shen.credits",async()=>(await C(x()),await C(q("exit REPL with (node.exit)",j.get())))),a}},function(a,t,s){var n={"./frontend.node.js":15,"./frontend.web.js":18};function webpackContext(a){var t=webpackContextResolve(a);return s(t)}function webpackContextResolve(a){if(!s.o(n,a)){var t=new Error("Cannot find module '"+a+"'");throw t.code="MODULE_NOT_FOUND",t}return n[a]}webpackContext.keys=function webpackContextKeys(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,a.exports=webpackContext,webpackContext.id=14},function(a,t,s){(function(t,n){const i=s(4);a.exports=async a=>{const{caller:e,define:o,defineTyped:l,defmacro:r,isArray:f,lookup:w,s:c,symbol:h,symbolOf:y,toList:d,valueOf:C}=a=await i(a);await l("node.exit",[c`number`,c`-->`,c`unit`],a=>t.exit(a)),await r("node.exit-macro",a=>{if(f(a)&&1===a.length&&a[0]===c`node.exit`)return[...a,0]}),await o("node.require",a=>s(17)(a)),await h("node.global",n),w("js.globalThis").valueExists||await h("js.globalThis",n);const u=[c`shen-script`,c`js`,c`node`,y(C("*os*").toLowerCase())];return await e("shen.x.features.initialise")(d(u)),a}}).call(this,s(1),s(16))},function(a,t){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(a){"object"==typeof window&&(s=window)}a.exports=s},function(a,t){function webpackEmptyContext(a){var t=new Error("Cannot find module '"+a+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,a.exports=webpackEmptyContext,webpackEmptyContext.id=17},function(a,t,s){const{Id:n}=s(2),i=s(4),{onReady:e}=s(0);a.exports=async a=>{const{asShenBool:t,asString:s,caller:o,define:l,defineTyped:r,defun:f,evalJs:w,inline:c,isFunction:h,isNeArray:y,isString:d,isSymbol:C,lookup:u,nameOf:b,raise:p,s:m,settle:g,show:S,symbol:v,symbolOf:_,toArray:B,toArrayTree:x,toList:q,valueOf:j}=a=await i(a);await r("web.atob",[m`string`,m`-->`,m`string`],a=>atob(s(a))),await r("web.btoa",[m`string`,m`-->`,m`string`],a=>btoa(s(a))),await f("y-or-n?",a=>new Promise(s=>s(t(confirm(a))))),await r("web.confirm?",[m`string`,m`-->`,m`boolean`],a=>new Promise(s=>s(t(confirm(a))))),await r("web.fetch-text",[m`string`,m`-->`,m`string`],a=>fetch(a).then(a=>a.text())),await r("web.fetch-json",[m`string`,m`-->`,m`A`],a=>fetch(a).then(a=>a.json())),await r("web.fetch-text*",[[m`list`,m`string`],m`-->`,[m`list`,m`string`]],a=>Promise.all(B(a).map(a=>fetch(a).then(a=>a.text()))).then(a=>q(a))),await r("web.fetch-json*",[[m`list`,m`string`],m`-->`,[m`list`,m`A`]],a=>Promise.all(B(a).map(a=>fetch(a).then(a=>a.json()))).then(a=>q(a))),await v("web.document",document),await v("web.navigator",navigator),await v("web.self",()=>w(n("self"))),await v("web.window",window),c("web.self",null,[],()=>n("self")),u("js.globalThis").valueExists||await v("js.globalThis",window),await l("local-storage.clear",()=>(localStorage.clear(),null)),await l("local-storage.get",a=>localStorage.getItem(a)),await l("local-storage.has?",a=>t(void 0!==localStorage.getItem(a))),await l("local-storage.remove",a=>(localStorage.removeItem(a),null)),await l("local-storage.set",(a,t)=>(localStorage.setItem(a,t),null)),"undefined"!=typeof Worker&&await v("web.Worker",Worker);const buildTree=a=>d(a)?document.createTextNode(a):y(a)&&C(a[0])?b(a[0]).startsWith("@")?((a,t)=>Object.assign(document.createAttribute(a),{value:t}))(b(a[0]).substring(1),a[1]):b(a[0]).startsWith("!")?((a,t)=>Object.assign(t,{event:a}))(b(a[0]).substring(1),a[1]):((a,t)=>(t.forEach(t=>t instanceof Attr?a.setAttributeNode(t):h(t)?a["on"+t.event]=a=>(g(t(a)),null):a.appendChild(t)),a))(document.createElement(b(a[0])),a.slice(1).map(buildTree)):(a=>p(`dom.build: invalid form: ${S(a)}`))(a);await l("dom.append",(a,t)=>(a.appendChild(t),null)),await l("dom.build",a=>buildTree(x(a))),await l("dom.onready",a=>(e(()=>g(a())),null)),await l("dom.prepend",(a,t)=>(a.insertBefore(t,a.firstChild),null)),await l("dom.query",a=>document.querySelector(a)),await l("dom.query*",a=>q([...document.querySelectorAll(a).entries()])),await l("dom.remove",a=>(a.parentNode&&a.parentNode.removeChild(a),null)),await l("dom.replace",(a,t)=>(a.parentNode&&a.parentNode.replaceChild(t,a),null));const J=[m`shen-script`,m`js`,m`web`,_(j("*implementation*").toLowerCase().split(" ").join("-")),_(j("*os*").toLowerCase())];return await o("shen.x.features.initialise")(q(J)),a}}]);
